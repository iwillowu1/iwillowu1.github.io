(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+U72":function(e){e.exports=JSON.parse('[{"id":"open","name":"Open"},{"id":"inProgress","name":"In progress"},{"id":"acknowledged","name":"Acknowledged"},{"id":"closed","name":"Closed"}]')},"+pm9":function(e,t,a){e.exports={carousel:"_34AIk7oWwpIi4QnsKeLPbl",images:"GX3KrTow8BMECSuGtAhcS",img:"_2pFs9I1cSiFvUu6Um4hob_",buttons:"_1O7Hr8mwr99iqJwlGcFjNg",button:"_1rs0dAVwSFvGMCmLZiEk4P",selected:"JhvwsAUWDRpN8YNUz3BFo"}},"/M+F":function(e,t,a){e.exports={floatingPanel:"_3d0C_p9OFD0t0fzLwYE8Ow",header:"_1yj7c3D9b8uTxf-Tzs7lZr",isOpen:"_2nD3L5qvd_QsVJ0DL7pFd1",chevron:"p7oBKPmWWvGz2s7VFC5sn",content:"mi97VUj0KSn5NFfqqmrjb"}},"0dnp":function(e,t,a){},"1Lox":function(e,t,a){e.exports={button:"_2g9B0M2MUEXYCPNG8jqRE-",chevron:"HISy-cthClg7gj_Gn3TIC",chevronIcon:"_1xwdo2y72Ajv5Sr95ubvUs",group:"_3lLIJG3HVEF8wnE1Z57VGS",isOpen:"oYw4-LvYKTnHIVcbCZlT6",header:"_3T3Wlv0cm0Oz33sKnkzxf-",content:"_20CimuM2l_DHq_ibC6-gWu"}},"22nM":function(e,t,a){e.exports={point:"_3K1qJXTXUx9lz1J2KZagxh",isSelected:"n_YC48sacMQF1wk7FTao1",icon:"_3_bETNem--zYra8E4NGRY4",isVisible:"_3bVZKuJp0uLrluCRaZ_v8p"}},"3DdC":function(e,t,a){e.exports={toolbar:"XLqvskn9ULRckiC1s1cHG"}},"3QjJ":function(e,t,a){e.exports={userProfile:"_3Z37VgH285goSvtxd7O_2P",content:"_37IHJ6vKHzNaeWJST-nxXX"}},"3ipZ":function(e,t,a){var n=a("ERkP");function l(e){return n.createElement("svg",e,[n.createElement("g",{key:0},[n.createElement("g",{key:0},[n.createElement("path",{d:"M93,0a1.41,1.41,0,0,1,1.41,1.4,1.41,1.41,0,0,1-2.82,0A1.41,1.41,0,0,1,93,0Z",key:0}),n.createElement("path",{d:"M93,21.29a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,21.29Z",key:1}),n.createElement("path",{d:"M93,42.57A1.41,1.41,0,1,1,91.56,44,1.41,1.41,0,0,1,93,42.57Z",key:2}),n.createElement("path",{d:"M93,63.86a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,63.86Z",key:3}),n.createElement("path",{d:"M93,85.15a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,85.15Z",key:4}),n.createElement("path",{d:"M93,106.44a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,106.44Z",key:5}),n.createElement("path",{d:"M93,127.16a1.41,1.41,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,127.16Z",key:6}),n.createElement("path",{d:"M93,148.45a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,148.45Z",key:7}),n.createElement("path",{d:"M93,169.74a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,169.74Z",key:8}),n.createElement("path",{d:"M93,191a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,191Z",key:9}),n.createElement("path",{d:"M93,212.31a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,93,212.31Z",key:10}),n.createElement("path",{d:"M111.39,10.64A1.4,1.4,0,1,1,110,12,1.41,1.41,0,0,1,111.39,10.64Z",key:11}),n.createElement("path",{d:"M111.39,31.93a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,111.39,31.93Z",key:12}),n.createElement("path",{d:"M111.39,53.22a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,111.39,53.22Z",key:13}),n.createElement("path",{d:"M111.39,74.51a1.4,1.4,0,1,1-1.41,1.4A1.4,1.4,0,0,1,111.39,74.51Z",key:14}),n.createElement("path",{d:"M111.39,95.79a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,111.39,95.79Z",key:15}),n.createElement("path",{d:"M111.39,117.08a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,111.39,117.08Z",key:16}),n.createElement("path",{d:"M111.39,137.81a1.4,1.4,0,1,1-1.41,1.4A1.4,1.4,0,0,1,111.39,137.81Z",key:17}),n.createElement("path",{d:"M111.39,159.1a1.4,1.4,0,1,1-1.41,1.4A1.4,1.4,0,0,1,111.39,159.1Z",key:18}),n.createElement("path",{d:"M111.39,180.38a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,111.39,180.38Z",key:19}),n.createElement("path",{d:"M111.39,201.67a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,111.39,201.67Z",key:20}),n.createElement("path",{d:"M129.81,21.29a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,21.29Z",key:21}),n.createElement("path",{d:"M129.81,42.57a1.41,1.41,0,1,1-1.4,1.41A1.41,1.41,0,0,1,129.81,42.57Z",key:22}),n.createElement("path",{d:"M129.81,63.86a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,63.86Z",key:23}),n.createElement("path",{d:"M129.81,85.15a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,85.15Z",key:24}),n.createElement("path",{d:"M129.81,106.44a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,106.44Z",key:25}),n.createElement("path",{d:"M129.81,127.72a1.41,1.41,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,127.72Z",key:26}),n.createElement("path",{d:"M129.81,148.45a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,148.45Z",key:27}),n.createElement("path",{d:"M129.81,169.74a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,169.74Z",key:28}),n.createElement("path",{d:"M129.81,191a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,129.81,191Z",key:29}),n.createElement("path",{d:"M147.69,31.93a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,147.69,31.93Z",key:30}),n.createElement("path",{d:"M147.69,53.22a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,147.69,53.22Z",key:31}),n.createElement("path",{d:"M147.69,74.51a1.4,1.4,0,1,1-1.38,1.4A1.39,1.39,0,0,1,147.69,74.51Z",key:32}),n.createElement("path",{d:"M147.69,95.79a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,147.69,95.79Z",key:33}),n.createElement("path",{d:"M147.69,117.08a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,147.69,117.08Z",key:34}),n.createElement("path",{d:"M147.69,138.37a1.4,1.4,0,1,1-1.38,1.4A1.39,1.39,0,0,1,147.69,138.37Z",key:35}),n.createElement("path",{d:"M147.69,159.1a1.4,1.4,0,1,1-1.38,1.4A1.39,1.39,0,0,1,147.69,159.1Z",key:36}),n.createElement("path",{d:"M147.69,180.38a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,147.69,180.38Z",key:37}),n.createElement("path",{d:"M166.12,42.57A1.41,1.41,0,1,1,164.73,44,1.4,1.4,0,0,1,166.12,42.57Z",key:38}),n.createElement("path",{d:"M166.12,63.86a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,166.12,63.86Z",key:39}),n.createElement("path",{d:"M166.12,85.15a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,166.12,85.15Z",key:40}),n.createElement("path",{d:"M166.12,106.44a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,166.12,106.44Z",key:41}),n.createElement("path",{d:"M166.12,127.72a1.41,1.41,0,1,1-1.39,1.4A1.39,1.39,0,0,1,166.12,127.72Z",key:42}),n.createElement("path",{d:"M166.12,149a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,166.12,149Z",key:43}),n.createElement("path",{d:"M166.12,169.74a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,166.12,169.74Z",key:44}),n.createElement("path",{d:"M184.53,53.22a1.4,1.4,0,1,1-1.39,1.4A1.4,1.4,0,0,1,184.53,53.22Z",key:45}),n.createElement("path",{d:"M184.53,74.51a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,184.53,74.51Z",key:46}),n.createElement("path",{d:"M184.53,95.79a1.4,1.4,0,1,1-1.39,1.4A1.4,1.4,0,0,1,184.53,95.79Z",key:47}),n.createElement("path",{d:"M184.53,117.08a1.4,1.4,0,1,1-1.39,1.4A1.4,1.4,0,0,1,184.53,117.08Z",key:48}),n.createElement("path",{d:"M184.53,138.37a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,184.53,138.37Z",key:49}),n.createElement("path",{d:"M184.53,159.66a1.4,1.4,0,1,1-1.39,1.4A1.39,1.39,0,0,1,184.53,159.66Z",key:50}),n.createElement("path",{d:"M74.54,10.64A1.4,1.4,0,1,1,73.13,12,1.41,1.41,0,0,1,74.54,10.64Z",key:51}),n.createElement("path",{d:"M74.54,31.93a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,74.54,31.93Z",key:52}),n.createElement("path",{d:"M74.54,53.22a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,74.54,53.22Z",key:53}),n.createElement("path",{d:"M74.54,74.51a1.4,1.4,0,1,1-1.41,1.4A1.4,1.4,0,0,1,74.54,74.51Z",key:54}),n.createElement("path",{d:"M74.54,95.79a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,74.54,95.79Z",key:55}),n.createElement("path",{d:"M74.54,117.08a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,74.54,117.08Z",key:56}),n.createElement("path",{d:"M74.54,137.81a1.4,1.4,0,1,1-1.41,1.4A1.4,1.4,0,0,1,74.54,137.81Z",key:57}),n.createElement("path",{d:"M74.54,159.1a1.4,1.4,0,1,1-1.41,1.4A1.4,1.4,0,0,1,74.54,159.1Z",key:58}),n.createElement("path",{d:"M74.54,180.38a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,74.54,180.38Z",key:59}),n.createElement("path",{d:"M74.54,201.67a1.4,1.4,0,1,1-1.41,1.4A1.41,1.41,0,0,1,74.54,201.67Z",key:60}),n.createElement("path",{d:"M56.12,21.29a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,21.29Z",key:61}),n.createElement("path",{d:"M56.12,42.57A1.41,1.41,0,1,1,54.72,44,1.41,1.41,0,0,1,56.12,42.57Z",key:62}),n.createElement("path",{d:"M56.12,63.86a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,63.86Z",key:63}),n.createElement("path",{d:"M56.12,85.15a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,85.15Z",key:64}),n.createElement("path",{d:"M56.12,106.44a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,106.44Z",key:65}),n.createElement("path",{d:"M56.12,127.72a1.41,1.41,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,127.72Z",key:66}),n.createElement("path",{d:"M56.12,148.45a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,148.45Z",key:67}),n.createElement("path",{d:"M56.12,169.74a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,169.74Z",key:68}),n.createElement("path",{d:"M56.12,191a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,56.12,191Z",key:69}),n.createElement("path",{d:"M38.24,31.93a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,38.24,31.93Z",key:70}),n.createElement("path",{d:"M38.24,53.22a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,38.24,53.22Z",key:71}),n.createElement("path",{d:"M38.24,74.51a1.4,1.4,0,1,1-1.38,1.4A1.39,1.39,0,0,1,38.24,74.51Z",key:72}),n.createElement("path",{d:"M38.24,95.79a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,38.24,95.79Z",key:73}),n.createElement("path",{d:"M38.24,117.08a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,38.24,117.08Z",key:74}),n.createElement("path",{d:"M38.24,138.37a1.4,1.4,0,1,1-1.38,1.4A1.39,1.39,0,0,1,38.24,138.37Z",key:75}),n.createElement("path",{d:"M38.24,159.1a1.4,1.4,0,1,1-1.38,1.4A1.39,1.39,0,0,1,38.24,159.1Z",key:76}),n.createElement("path",{d:"M38.24,180.38a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,38.24,180.38Z",key:77}),n.createElement("path",{d:"M19.81,42.57A1.41,1.41,0,1,1,18.43,44,1.4,1.4,0,0,1,19.81,42.57Z",key:78}),n.createElement("path",{d:"M19.81,63.86a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,19.81,63.86Z",key:79}),n.createElement("path",{d:"M19.81,85.15a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,19.81,85.15Z",key:80}),n.createElement("path",{d:"M19.81,106.44a1.4,1.4,0,1,1-1.38,1.4A1.39,1.39,0,0,1,19.81,106.44Z",key:81}),n.createElement("path",{d:"M19.81,127.72a1.41,1.41,0,1,1-1.38,1.4A1.4,1.4,0,0,1,19.81,127.72Z",key:82}),n.createElement("path",{d:"M19.81,149a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,19.81,149Z",key:83}),n.createElement("path",{d:"M19.81,169.74a1.4,1.4,0,1,1-1.38,1.4A1.4,1.4,0,0,1,19.81,169.74Z",key:84}),n.createElement("path",{d:"M1.4,53.22A1.4,1.4,0,1,1,0,54.62,1.4,1.4,0,0,1,1.4,53.22Z",key:85}),n.createElement("path",{d:"M1.4,74.51A1.4,1.4,0,1,1,0,75.91,1.4,1.4,0,0,1,1.4,74.51Z",key:86}),n.createElement("path",{d:"M1.4,95.79A1.4,1.4,0,1,1,0,97.19,1.4,1.4,0,0,1,1.4,95.79Z",key:87}),n.createElement("path",{d:"M1.4,117.08a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,1.4,117.08Z",key:88}),n.createElement("path",{d:"M1.4,138.37a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,1.4,138.37Z",key:89}),n.createElement("path",{d:"M1.4,159.66a1.4,1.4,0,1,1-1.4,1.4A1.4,1.4,0,0,1,1.4,159.66Z",key:90})]),n.createElement("g",{key:1},[n.createElement("path",{d:"M19.54,58.91a6.17,6.17,0,1,1-6.14,6.17A6.15,6.15,0,0,1,19.54,58.91Z",key:0}),n.createElement("path",{d:"M19.54,79.49a6.18,6.18,0,1,1-6.14,6.18A6.16,6.16,0,0,1,19.54,79.49Z",key:1}),n.createElement("path",{d:"M19.54,100.1a6.16,6.16,0,1,1-6.14,6.16A6.15,6.15,0,0,1,19.54,100.1Z",key:2}),n.createElement("path",{d:"M19.54,120.68a6.15,6.15,0,1,1-6.14,6.15A6.14,6.14,0,0,1,19.54,120.68Z",key:3}),n.createElement("path",{d:"M19.54,141.26a6.17,6.17,0,1,1-6.14,6.16A6.15,6.15,0,0,1,19.54,141.26Z",key:4}),n.createElement("path",{d:"M19.54,162a6.16,6.16,0,1,1-6.14,6.16A6.15,6.15,0,0,1,19.54,162Z",key:5}),n.createElement("path",{d:"M166.41,58.91a6.17,6.17,0,1,1-6.14,6.17A6.15,6.15,0,0,1,166.41,58.91Z",key:6}),n.createElement("path",{d:"M166.41,79.49a6.18,6.18,0,1,1-6.14,6.18A6.16,6.16,0,0,1,166.41,79.49Z",key:7}),n.createElement("path",{d:"M166.41,100.1a6.16,6.16,0,1,1-6.14,6.16A6.15,6.15,0,0,1,166.41,100.1Z",key:8}),n.createElement("path",{d:"M166.41,120.68a6.15,6.15,0,1,1-6.14,6.15A6.14,6.14,0,0,1,166.41,120.68Z",key:9}),n.createElement("path",{d:"M166.41,141.26a6.17,6.17,0,1,1-6.14,6.16A6.15,6.15,0,0,1,166.41,141.26Z",key:10}),n.createElement("path",{d:"M166.41,162a6.16,6.16,0,1,1-6.14,6.16A6.15,6.15,0,0,1,166.41,162Z",key:11}),n.createElement("path",{d:"M93.25,100.93a6.16,6.16,0,1,1-6.13,6.16A6.15,6.15,0,0,1,93.25,100.93Z",key:12}),n.createElement("path",{d:"M93.25,121.53a6.15,6.15,0,1,1-6.13,6.15A6.15,6.15,0,0,1,93.25,121.53Z",key:13}),n.createElement("path",{d:"M74.27,109.89a6.17,6.17,0,1,1-6.14,6.16A6.15,6.15,0,0,1,74.27,109.89Z",key:14}),n.createElement("path",{d:"M74.27,130.47a6.17,6.17,0,1,1-6.14,6.16A6.15,6.15,0,0,1,74.27,130.47Z",key:15}),n.createElement("path",{d:"M111.68,109.89a6.17,6.17,0,1,1-6.14,6.16A6.15,6.15,0,0,1,111.68,109.89Z",key:16}),n.createElement("path",{d:"M111.68,130.47a6.17,6.17,0,1,1-6.14,6.16A6.15,6.15,0,0,1,111.68,130.47Z",key:17}),n.createElement("path",{d:"M55.84,121.1a6.16,6.16,0,1,1-6.14,6.16A6.15,6.15,0,0,1,55.84,121.1Z",key:18}),n.createElement("path",{d:"M55.84,141.7a6.15,6.15,0,1,1-6.14,6.15A6.14,6.14,0,0,1,55.84,141.7Z",key:19}),n.createElement("path",{d:"M130.67,121.1a6.16,6.16,0,1,1-6.14,6.16A6.15,6.15,0,0,1,130.67,121.1Z",key:20}),n.createElement("path",{d:"M130.67,141.7a6.15,6.15,0,1,1-6.14,6.15A6.14,6.14,0,0,1,130.67,141.7Z",key:21}),n.createElement("path",{d:"M38.26,48.83a3.64,3.64,0,1,1-3.63,3.64A3.64,3.64,0,0,1,38.26,48.83Z",key:22}),n.createElement("path",{d:"M38.26,70a3.65,3.65,0,1,1-3.63,3.65A3.63,3.63,0,0,1,38.26,70Z",key:23}),n.createElement("path",{d:"M38.26,91.22a3.64,3.64,0,1,1-3.63,3.64A3.63,3.63,0,0,1,38.26,91.22Z",key:24}),n.createElement("path",{d:"M38.26,112.42a3.65,3.65,0,1,1-3.63,3.65A3.64,3.64,0,0,1,38.26,112.42Z",key:25}),n.createElement("path",{d:"M38.26,133.61a3.64,3.64,0,1,1-3.63,3.64A3.63,3.63,0,0,1,38.26,133.61Z",key:26}),n.createElement("path",{d:"M38.26,154.8a3.64,3.64,0,1,1-3.63,3.64A3.63,3.63,0,0,1,38.26,154.8Z",key:27}),n.createElement("path",{d:"M38.26,176a3.65,3.65,0,1,1-3.63,3.65A3.64,3.64,0,0,1,38.26,176Z",key:28}),n.createElement("path",{d:"M19.83,38.19a3.64,3.64,0,1,1-3.63,3.64A3.64,3.64,0,0,1,19.83,38.19Z",key:29}),n.createElement("path",{d:"M19.83,59.38A3.64,3.64,0,1,1,16.2,63,3.64,3.64,0,0,1,19.83,59.38Z",key:30}),n.createElement("path",{d:"M19.83,80.57a3.65,3.65,0,1,1-3.63,3.65A3.64,3.64,0,0,1,19.83,80.57Z",key:31}),n.createElement("path",{d:"M19.83,101.76a3.65,3.65,0,1,1-3.63,3.65A3.64,3.64,0,0,1,19.83,101.76Z",key:32}),n.createElement("path",{d:"M19.83,123a3.65,3.65,0,1,1-3.63,3.64A3.64,3.64,0,0,1,19.83,123Z",key:33}),n.createElement("path",{d:"M19.83,144.16a3.64,3.64,0,1,1-3.63,3.64A3.64,3.64,0,0,1,19.83,144.16Z",key:34}),n.createElement("path",{d:"M19.83,165.35A3.64,3.64,0,1,1,16.2,169,3.64,3.64,0,0,1,19.83,165.35Z",key:35}),n.createElement("path",{d:"M147.69,48.83a3.64,3.64,0,1,1-3.64,3.64A3.64,3.64,0,0,1,147.69,48.83Z",key:36}),n.createElement("path",{d:"M147.69,70a3.65,3.65,0,1,0,3.63,3.65A3.64,3.64,0,0,0,147.69,70Z",key:37}),n.createElement("path",{d:"M147.69,91.22a3.64,3.64,0,1,0,3.63,3.64A3.64,3.64,0,0,0,147.69,91.22Z",key:38}),n.createElement("path",{d:"M147.69,112.42a3.65,3.65,0,1,1-3.64,3.65A3.64,3.64,0,0,1,147.69,112.42Z",key:39}),n.createElement("path",{d:"M147.69,133.61a3.64,3.64,0,1,0,3.63,3.64A3.64,3.64,0,0,0,147.69,133.61Z",key:40}),n.createElement("path",{d:"M147.69,154.8a3.64,3.64,0,1,0,3.63,3.64A3.64,3.64,0,0,0,147.69,154.8Z",key:41}),n.createElement("path",{d:"M147.69,176a3.65,3.65,0,1,1-3.64,3.65A3.64,3.64,0,0,1,147.69,176Z",key:42}),n.createElement("path",{d:"M166.11,38.19a3.64,3.64,0,1,1-3.63,3.64A3.64,3.64,0,0,1,166.11,38.19Z",key:43}),n.createElement("path",{d:"M166.12,59.38A3.64,3.64,0,1,0,169.75,63,3.63,3.63,0,0,0,166.12,59.38Z",key:44}),n.createElement("path",{d:"M166.12,80.57a3.65,3.65,0,1,0,3.63,3.65A3.63,3.63,0,0,0,166.12,80.57Z",key:45}),n.createElement("path",{d:"M166.11,101.76a3.65,3.65,0,1,1-3.63,3.65A3.64,3.64,0,0,1,166.11,101.76Z",key:46}),n.createElement("path",{d:"M166.12,123a3.65,3.65,0,1,0,3.63,3.64A3.63,3.63,0,0,0,166.12,123Z",key:47}),n.createElement("path",{d:"M166.12,144.16a3.64,3.64,0,1,0,3.63,3.64A3.63,3.63,0,0,0,166.12,144.16Z",key:48}),n.createElement("path",{d:"M166.11,165.35a3.64,3.64,0,1,1-3.63,3.64A3.64,3.64,0,0,1,166.11,165.35Z",key:49}),n.createElement("path",{d:"M93,81.88a3.64,3.64,0,1,1-3.62,3.64A3.63,3.63,0,0,1,93,81.88Z",key:50}),n.createElement("path",{d:"M93,103.08a3.64,3.64,0,1,0,3.63,3.64A3.63,3.63,0,0,0,93,103.08Z",key:51}),n.createElement("path",{d:"M93,124.27a3.64,3.64,0,1,0,3.63,3.64A3.63,3.63,0,0,0,93,124.27Z",key:52}),n.createElement("path",{d:"M93,145.45a3.66,3.66,0,1,1-3.62,3.66A3.64,3.64,0,0,1,93,145.45Z",key:53}),n.createElement("path",{d:"M75.11,91.41a3.64,3.64,0,1,1-3.63,3.64A3.63,3.63,0,0,1,75.11,91.41Z",key:54}),n.createElement("path",{d:"M75.11,112.6a3.64,3.64,0,1,0,3.63,3.64A3.63,3.63,0,0,0,75.11,112.6Z",key:55}),n.createElement("path",{d:"M75.11,133.79a3.65,3.65,0,1,0,3.63,3.64A3.63,3.63,0,0,0,75.11,133.79Z",key:56}),n.createElement("path",{d:"M75.11,155a3.65,3.65,0,1,1-3.63,3.65A3.64,3.64,0,0,1,75.11,155Z",key:57}),n.createElement("path",{d:"M55,102.05a3.64,3.64,0,1,1-3.62,3.64A3.63,3.63,0,0,1,55,102.05Z",key:58}),n.createElement("path",{d:"M55,123.24a3.65,3.65,0,1,0,3.63,3.64A3.63,3.63,0,0,0,55,123.24Z",key:59}),n.createElement("path",{d:"M55,144.44a3.64,3.64,0,1,0,3.63,3.64A3.63,3.63,0,0,0,55,144.44Z",key:60}),n.createElement("path",{d:"M55,165.62a3.66,3.66,0,1,1-3.62,3.65A3.63,3.63,0,0,1,55,165.62Z",key:61}),n.createElement("path",{d:"M129.26,102.05a3.64,3.64,0,1,1-3.64,3.64A3.63,3.63,0,0,1,129.26,102.05Z",key:62}),n.createElement("path",{d:"M129.27,123.24a3.65,3.65,0,1,0,3.63,3.64A3.63,3.63,0,0,0,129.27,123.24Z",key:63}),n.createElement("path",{d:"M129.27,144.44a3.64,3.64,0,1,0,3.63,3.64A3.63,3.63,0,0,0,129.27,144.44Z",key:64}),n.createElement("path",{d:"M129.26,165.62a3.66,3.66,0,1,1-3.64,3.65A3.63,3.63,0,0,1,129.26,165.62Z",key:65}),n.createElement("path",{d:"M110.84,90.84a3.65,3.65,0,1,1-3.62,3.65A3.65,3.65,0,0,1,110.84,90.84Z",key:66}),n.createElement("path",{d:"M110.84,112a3.64,3.64,0,1,0,3.63,3.64A3.64,3.64,0,0,0,110.84,112Z",key:67}),n.createElement("path",{d:"M110.84,133.23a3.65,3.65,0,1,0,3.63,3.64A3.64,3.64,0,0,0,110.84,133.23Z",key:68}),n.createElement("path",{d:"M110.84,154.41a3.65,3.65,0,1,1-3.62,3.65A3.64,3.64,0,0,1,110.84,154.41Z",key:69})])]),n.createElement("g",{key:1},[n.createElement("g",{key:0},[n.createElement("path",{d:"M370.24,98.13A26.48,26.48,0,0,1,372,88.39a20.42,20.42,0,0,1,5-7.55q6-5.64,15.88-5.64t15.8,5.64q6.75,6.39,6.75,17.29A27.18,27.18,0,0,1,413.7,108a20.45,20.45,0,0,1-5,7.59q-5.85,5.64-15.8,5.64T377,115.55a20.33,20.33,0,0,1-5-7.59A27,27,0,0,1,370.24,98.13Zm9.54,0q0,7.29,3.7,11.3a12.92,12.92,0,0,0,18.71.08q3.71-3.92,3.7-11.38t-3.7-11.34A12.35,12.35,0,0,0,392.88,83,12.07,12.07,0,0,0,383.43,87Q379.79,91.1,379.78,98.13Z",key:0}),n.createElement("path",{d:"M257.22,75.2l-10.44,31.55-9.35-28.26a4.52,4.52,0,0,0-4.26-3.29h-6.39l15.22,46h9.57l15.21-46Z",key:1}),n.createElement("path",{d:"M486.86,80.85l1.87-5.65h-6.25a4.54,4.54,0,0,0-4.27,2.94h0l-9.46,28.61L458.29,75.2h-9.65L438.2,106.75l-9.46-28.61h0a4.54,4.54,0,0,0-4.16-2.94H418.2l1.89,5.71.06.17,13.26,40.11H443l10.48-31.67,10.48,31.67h9.57l13.24-40C486.79,81.08,486.83,81,486.86,80.85Z",key:2}),n.createElement("path",{d:"M295.46,80.79l1.85-5.59h-6.24a4.54,4.54,0,0,0-4.27,2.94h0l-9.46,28.61L266.87,75.2h-9.56l15.21,46h9.57L295.3,81.28C295.36,81.12,295.41,81,295.46,80.79Z",key:3}),n.createElement("path",{d:"M337.27,113.48a3.59,3.59,0,0,1-3.59-3.59V56.73h0v-.1a4.36,4.36,0,0,0-4.22-4.3H324.8v4.31h0v55a9.56,9.56,0,0,0,9.55,9.55h6.75v-7.72Z",key:4}),n.createElement("path",{d:"M360,113.48a3.59,3.59,0,0,1-3.59-3.59V56.73h0v-.1a4.36,4.36,0,0,0-4.22-4.3h-4.66v4.31h0v55a9.56,9.56,0,0,0,9.55,9.55h6.75v-7.72Z",key:5}),n.createElement("path",{d:"M314.21,79.61v-.1a4.36,4.36,0,0,0-4.21-4.3h-4.67v4.31h0v41.68h8.88V79.61Z",key:6})]),n.createElement("g",{key:1},[n.createElement("path",{d:"M244.36,152.28V135.5h2.28v9.66l4.68-4.71h3l-5.52,5.45,5.61,6.38h-3.16l-4.59-5.37v5.37Z",key:0}),n.createElement("path",{d:"M256.07,152.28V140.45h2.26v1.32a3.89,3.89,0,0,1,1.5-1.23,4.49,4.49,0,0,1,1.95-.42,4.82,4.82,0,0,1,2,.36,3,3,0,0,1,1.28,1.05,4.6,4.6,0,0,1,.67,1.53,8.35,8.35,0,0,1,.21,2v7.24h-2.25v-7.14a3.82,3.82,0,0,0-.52-2.2,2.18,2.18,0,0,0-1.91-.73,2.59,2.59,0,0,0-2.15.9,3.71,3.71,0,0,0-.73,2.38v6.79Z",key:1}),n.createElement("path",{d:"M268.18,146.35a7.46,7.46,0,0,1,.45-2.64,5.35,5.35,0,0,1,1.29-2.05,5.48,5.48,0,0,1,4.08-1.54,5.38,5.38,0,0,1,4.05,1.54,6.31,6.31,0,0,1,1.73,4.69,7.73,7.73,0,0,1-.44,2.68,5.64,5.64,0,0,1-1.29,2.06,5.69,5.69,0,0,1-9.42-2.06A7.73,7.73,0,0,1,268.18,146.35Zm2.45,0a4.53,4.53,0,0,0,.95,3.07,3.19,3.19,0,0,0,4.81,0,5.5,5.5,0,0,0,0-6.18,3.12,3.12,0,0,0-2.39-1,3,3,0,0,0-2.43,1.1A4.51,4.51,0,0,0,270.63,146.35Z",key:2}),n.createElement("path",{d:"M280.5,140.45H283l2.59,8.28,2.81-8.28h1.93l2.73,8.28,2.68-8.28h2.36l-4.13,11.83H292L289.23,144l-2.8,8.28h-2Z",key:3}),n.createElement("path",{d:"M304.3,140.45H307l3.27,8.56,3-8.56h2.36L310.71,154a11,11,0,0,1-.74,1.64,5.45,5.45,0,0,1-.9,1.2,3.3,3.3,0,0,1-1.1.73,3.59,3.59,0,0,1-1.34.25,7.81,7.81,0,0,1-1.44-.14v-2a3.64,3.64,0,0,0,.83.11,2.72,2.72,0,0,0,1.33-.27,3.51,3.51,0,0,0,1.15-1.76l.3-.81c.19-.53.28-.8.28-.82Z",key:4}),n.createElement("path",{d:"M316.29,146.35a7.7,7.7,0,0,1,.44-2.64,5.6,5.6,0,0,1,1.29-2.05,5.51,5.51,0,0,1,4.08-1.54,5.4,5.4,0,0,1,4.06,1.54,6.35,6.35,0,0,1,1.73,4.69,7.73,7.73,0,0,1-.45,2.68,5.49,5.49,0,0,1-1.28,2.06,6.18,6.18,0,0,1-8.14,0,5.64,5.64,0,0,1-1.29-2.06A8,8,0,0,1,316.29,146.35Zm2.45,0a4.48,4.48,0,0,0,.95,3.07,3.18,3.18,0,0,0,4.8,0,5.5,5.5,0,0,0,0-6.18,3.11,3.11,0,0,0-2.39-1,3,3,0,0,0-2.43,1.1A4.56,4.56,0,0,0,318.74,146.35Z",key:5}),n.createElement("path",{d:"M330.16,140.45h2.26v6.75a14,14,0,0,0,.05,1.56q.22,1.65,2.13,1.65a3.69,3.69,0,0,0,1.41-.27,2.54,2.54,0,0,0,1-.76,2.79,2.79,0,0,0,.57-1.19,11.61,11.61,0,0,0,.1-1.81v-5.93H340v11.83h-2.26v-1.44a4.73,4.73,0,0,1-3.76,1.74,3.68,3.68,0,0,1-2.93-1.23,3,3,0,0,1-.73-1.49,16.33,16.33,0,0,1-.14-2.5Z",key:6}),n.createElement("path",{d:"M343.34,152.28V140.45h2.28v1.66a3.44,3.44,0,0,1,3.14-1.76,6.33,6.33,0,0,1,.82.07v2.34l-.58-.07-.4,0a2.72,2.72,0,0,0-2.5,1.29,4.28,4.28,0,0,0-.19.43c-.05.15-.1.31-.14.47a4.14,4.14,0,0,0-.09.46c0,.14,0,.27,0,.39s0,.24,0,.4,0,.34,0,.55v5.63Z",key:7}),n.createElement("path",{d:"M355.93,140.45h2.48l2.59,8.28,2.81-8.28h1.92l2.73,8.28,2.68-8.28h2.36l-4.13,11.83h-1.94L364.66,144l-2.8,8.28h-2Z",key:8}),n.createElement("path",{d:"M374.21,146.35a7.46,7.46,0,0,1,.45-2.64,5.6,5.6,0,0,1,1.29-2.05,5.48,5.48,0,0,1,4.08-1.54,5.38,5.38,0,0,1,4.05,1.54,6.32,6.32,0,0,1,1.74,4.69,7.73,7.73,0,0,1-.45,2.68,5.64,5.64,0,0,1-1.29,2.06,6.17,6.17,0,0,1-8.13,0,5.64,5.64,0,0,1-1.29-2.06A7.73,7.73,0,0,1,374.21,146.35Zm2.45,0a4.53,4.53,0,0,0,.95,3.07,3.19,3.19,0,0,0,4.81,0,5.5,5.5,0,0,0,0-6.18,3.12,3.12,0,0,0-2.39-1,3,3,0,0,0-2.43,1.1A4.57,4.57,0,0,0,376.66,146.35Z",key:9}),n.createElement("path",{d:"M388.21,152.28V140.45h2.28v1.66a3.44,3.44,0,0,1,3.14-1.76,6.19,6.19,0,0,1,.82.07v2.34l-.58-.07-.4,0A2.73,2.73,0,0,0,391,144a4.28,4.28,0,0,0-.19.43c0,.15-.1.31-.14.47a4,4,0,0,0-.08.46c0,.14,0,.27-.05.39s0,.24,0,.4,0,.34,0,.55v5.63Z",key:10}),n.createElement("path",{d:"M396.25,135.5h2.28V149a1.58,1.58,0,0,0,.26,1.06,1.34,1.34,0,0,0,1,.27h.46v2l-.6,0h-.34a3.1,3.1,0,0,1-2.32-.73,3.8,3.8,0,0,1-.7-2.57Z",key:11}),n.createElement("path",{d:"M401.75,146.35a6.51,6.51,0,0,1,1.54-4.54,5.13,5.13,0,0,1,4-1.69,6.29,6.29,0,0,1,1.35.14,3.5,3.5,0,0,1,1.06.41,5.87,5.87,0,0,1,.72.49,5.2,5.2,0,0,1,.54.52V135.5h2.27v16.78H411v-1.19l-.27.26-.27.24-.31.23-.4.24a3.85,3.85,0,0,1-1.07.42,5.71,5.71,0,0,1-1.35.14,5.14,5.14,0,0,1-4-1.71A6.54,6.54,0,0,1,401.75,146.35Zm2.41,0a4.72,4.72,0,0,0,.91,3.09,3,3,0,0,0,2.52,1.12,3.39,3.39,0,0,0,1.45-.29,2.8,2.8,0,0,0,1.07-.83,3.71,3.71,0,0,0,.68-1.33,6.46,6.46,0,0,0,.23-1.78,4.66,4.66,0,0,0-.92-3,3.31,3.31,0,0,0-2.72-1.16,3,3,0,0,0-2.21,1,3.36,3.36,0,0,0-.74,1.31A6,6,0,0,0,404.16,146.35Z",key:12})])])])}l.defaultProps={viewBox:"0 0 488.73 215.11"},e.exports=l,l.default=l},"3zYr":function(e,t,a){e.exports={insightSearch:"_1NhawlSDUeFBVUp_XXghSG",header:"DS61mWE4Gco5w29NqBLWc"}},"46oU":function(e,t,a){e.exports={hidden:"_379F7GoIqsQQfdvGWZ_afC"}},"5hf3":function(e,t,a){e.exports={willow:"wyYMYR8wK43g82d4Z5f7L"}},"5iOM":function(e,t,a){e.exports={timeMachine:"d5pempalsjyXa2e6-zSQS",content:"_1cFbhUIrz1gEiCyf9d-LHn",right:"_2E_xt-s9vb-HmonWjiQYi7"}},"6TGN":function(e,t,a){e.exports={booleanGraph:"_4S9OBpBEwtyywgJBeEmBT",isDimmed:"Dhx47i11MvTOFehBwuuOM",backgroundPath:"_2sw6qHqI11imfB0lLMeXRs"}},"7sEd":function(e,t,a){e.exports={layout:"_28_Yti8Fy61ETyCj5zBYKv",enter:"_1P_TGNyfwlQMyKEeS8ibn0"}},"89lp":function(e,t,a){e.exports={text:"_3jMLgyD2N3DXFVdr96eCq_"}},A5co:function(e,t,a){e.exports={addInsightDropdown:"xWKJYaY3wsH2xXCNEhwAL"}},AyMM:function(e,t,a){e.exports={tile:"_3kbUdsX59HvaCt39gPfKxQ",button:"_2vnEbZ9z21FVIWXu-g4NsI"}},BNEN:function(e,t,a){e.exports={label:"_2iYTJlOfuOOoOTWE7PecVB"}},CErF:function(e,t,a){e.exports={iframe:"_1akG20EXT-3LedAov24Nbf"}},CIT5:function(e,t,a){e.exports={tooltip:"TxOGcftK0ThnrXYt1ct-Q",line:"_1-yDN4FM_JPK5jwFxC84or",color:"_2OkaNCwbbsTLsio3a8F9gQ",header:"_2sxeETG2iXAdQfyb2eJWdL",value:"_2FK--lj11V7mk10NX_tPv8",booleanValue:"_3i6dvN8ih4i6ahkiXQ84t4"}},Cp5M:function(e,t,a){e.exports={footer:"_2Faz395mg-Jk6gpev7KXOP"}},DZg4:function(e,t,a){e.exports={icon:"_15-2qe68n6Bk_sYOx_JxhA"}},DcnG:function(e){e.exports=JSON.parse('["#09b742","#e7e7e7","#ffc11a","#00aae7","#eb4e3d","#723ae8","#7fffd4","#ffebcd","#deb887","#7fff00","#ff7f50","#6495ed","#ed143d","#00ffff","#ff8c00","#ff1493","#da70d6","#ffffff"]')},EcLt:function(e){e.exports=JSON.parse('{"light":"#cccccc","text":"#a4a5a6","textLight":"#eeeeee","red":"#fc2d3b","redLight":"#ff3848","orange":"#e66e04","orangeLight":"#ff973a","yellow":"#d2ba6c","yellowLight":"#f5db86"}')},Enyl:function(e,t,a){e.exports={input:"_15aN_3a9VVqbKdQqdeT98l"}},F6ZH:function(e,t,a){e.exports={mouse:"_1qchPxpbIzx11jQXEHYGhs",circle:"x0q4-KvIsNy42gQB10j2y",path:"_2XANZ8QVea2xq2L9usz9yz"}},GAjP:function(e){e.exports=JSON.parse('[{"id":1,"name":"Urgent"},{"id":2,"name":"High"},{"id":3,"name":"Medium"},{"id":4,"name":"Low"}]')},HISs:function(e,t,a){e.exports={equipment:"_3NJkk5eyRExE1gNP5Zat46",isClickable:"_29xdGZeOixME9p37aXDlm-",isSelected:"rMuzzNHkwSAzee0auboyG",colorRed:"_1bC0IC1usI9BDLO_1N88X7",colorOrange:"C1Wb4Q1t1E39YBhSjdftM",colorYellow:"_3wHU_C-M2H2GGbkUrm3h2",tooltip:"_2qDEVSSfAuoOALxRpx-8aQ",header:"Hp3Wd5krQ-vMfG2F-BiD7",showDetails:"_3PBRAkaDLLeGXAr7Wzexgq",content:"_19wdGV-0UqWsE5XW8aAwtD",isContentSelected:"V-qnD6_PXeDfbq4SU50op",corner:"_2Gzp5BciG4tQP-ZegmwKHk"}},HMpR:function(e,t,a){e.exports={floatingPanelSection:"_2L2yLJ8sj2jNo1txRG2ZFK",header:"_3AyBJQTBTWzyZ3vV95XeK6",chevron:"_2Wy7VNgUyH0rx00AufHHdc",isOpen:"_3UoDLRYcv_hkFR3i-mrv3J"}},HkdZ:function(e,t,a){e.exports={content:"_1xGbwcQlq5q0gbCaaO_Yl5"}},IsSF:function(e,t,a){e.exports={insight:"Q1N_pAdpcqF7tCE4gxgcH"}},JFGN:function(e,t,a){e.exports={graphContent:"XZKDZMLGCzed6Qv2s866W",line:"_2UO7b32ppAL_0lwy94lvTB",time:"_2yBrVWfdWhgqBWWpTNnx8S",timeWindow:"_24ohvU4KVuglB-o7QdnX9_"}},Jfnh:function(e,t,a){e.exports={floors:"_2IfnVFmPhZMh21iFS_Om"}},KFx7:function(e,t,a){e.exports={content:"x0gahvsfyt2A45s9M8EJY",up:"_1BXPmiZikB9T5iokD9YNSK",down:"_2IfDy5TopkbdwjwJ_EvIEx"}},"Kww/":function(e,t,a){e.exports={toolbar:"_2YBl5mhisabrvGhcujxB-5",add:"_1b6PYfC7M0LHqflLsSef3h"}},MVJS:function(e,t,a){e.exports={graph:"LTp14x0uDHFu6C2MQSTzi",content:"_3A5w-9dmalfID7xUmUwU_1"}},"MqT/":function(e,t,a){e.exports={layoutHeaderPanel:"_3GFG7iPl_Df7PVjKyejq2R"}},N0uF:function(e,t,a){e.exports={pill:"_1y_2cUglCXynL-KD3KSJq9"}},O62Z:function(e,t,a){e.exports={layoutHeader:"_3PMDvUKHpAYLJTM74QqTqz"}},Op1I:function(e,t,a){e.exports={buttons:"_37z92RsZgEHc-VdiOBS7bz",button:"_199WAjmXLGluUBZzt9Q2lr",visible:"_1w9p7pQOcxdlxCSOQiS7qL",tools:"_2v3CNuMonqv9F-hiEJviBZ",right:"_2yrYMN4WcDLa72AqmYi3zc"}},PBtA:function(e,t,a){e.exports={dropdown:"wBZAP68LPNXPwbMRIu6CC",dropdownIcon:"_3_iGlABXksz1sWXDKT3Gs_",isDisabled:"_3NYlAT8z1x2rxPpIEeZ_Ej",content:"KFypvxXAsEa_18hEtbbqt"}},Q43d:function(e,t,a){e.exports={header:"_13w4cwSpdhUSfJOFFb7noQ",content:"_1h_qvzXqCCWsSbUHEdd9xF",description:"_3RuCHQ6-AJ0EPqREuu6g2_",logo:"_1OayocrH0YrbA7od5SkWcS",img:"yVAEZ480WvsjzXeNlmPYS"}},R4Wl:function(e,t,a){e.exports={draggable:"_3il9IfQZ-VJTaSssb3MG94",row:"Rk1tPAn9KMTAFPjesuDhG",drag:"FlsnKo_rDaLAk1LrSsxYi",pill:"_1qTgEG7pE2rGjCCEofsRsq"}},Rga0:function(e,t,a){e.exports={additionalInformation:"_2GhlC6w9LB3hLoaNtc02Wc",button:"_1E65Cro0j9VJwcwlZ-osnx",buttonText:"_1Xw9c3JfrUavbMEgftfRB5",chevron:"_2kLBSPogE9XbJhuxv5JRA"}},SYKD:function(e,t,a){e.exports={input:"_1VU-WchnO3dkPE-KjNCX2I"}},StKd:function(e,t,a){e.exports={floorSelector:"_12dLsqyyJhuOfkSPKUVzHj",backButton:"_2LVWFMZtUCtw3yniw64G2a",isDisabled:"_2JGdauA1dVYrSIuLYecANL"}},T7aC:function(e,t,a){e.exports={tooltip:"_3US7W7hocU8hKlPBX131bc",isClickable:"_3w4021lZb_EssySTR96Awp",isSelected:"_2VRR8t9InPxpkCFzf_rCes"}},TvBC:function(e,t,a){e.exports={investigatedInsight:"_3uogd6h9gi0fTTlD6ogHS3"}},U13L:function(e,t,a){e.exports={site:"ly5W3EEi1Pgn-gNz7jyuI",content:"_2BM8Iw4oNOWj5q_Q82EPIX",icon:"_332Ksn0DztxyXv5cLeJQ3r"}},U2NX:function(e,t,a){e.exports={auth0Callback:"_2qdc4IniNBzhifb-NTGugO",willow:"_2Ka2cR_qRG63uZR2y3IEgT"}},"V/G/":function(e,t,a){e.exports={fileContainer:"_6bREdnnpzS45mSnE6KvgI",header:"aOsN7yTyvgk00RXYUlR4R",content:"_1zw24iDB6Ckk62Z2Vr-6Bp",hasScreenshots:"_33d-GX7EQaABWwQOjkoBRw",footer:"_3C3LwILyBh5n9No4ikIExT"}},Vhk0:function(e,t,a){e.exports={favorites:"Gtawa-gnoWCuWi-jizkGQ",header:"jrvEUPaa1cgQevxfyfsIR",hasFavorites:"DbtZ7zT0z0gh9-DbPBmnh",content:"_23YuBom3-lLXgYDEvXnyCd",favorite:"_EE7d4ZGsP1gSqp8cnm5U"}},Vz7R:function(e,t,a){e.exports={range:"_2PP-YyRxTIFj89S-pauo7Y",minus:"_1z3bi4A-5sHaSfi9lV8rwb",plus:"_2xAtdE-wv6Swnv44XyHSgi",track:"_1v9E1MqV38Xq4dIGT8tGwJ",trackCenter:"_1tbQuZro7bX8w8cWxVgCMq",highlightedTrack:"j7p65yAXx_pDrcDVTHx4l",point:"_3gmn05NH_SwbZtn8gkdA7t",drag:"_18g5Y45aApJ6ibhVLts-SR"}},ZPgp:function(e,t,a){e.exports={appSummary:"XbEX5ly7LMAGQi1I96uoF",content:"_2ni26N5HRXRX5Bh5Yr08Pq",logo:"_25phIwt0kd32K7oqubv8BU",pill:"_8fgZFZ_QPMTcTQVYf5O_Q",img:"_3bvEtwr3TPsOsfDRLRfsAU",installed:"_1iqWptfRHHDnaKf1h8KizP",isInstalled:"_35nSOYFgIArN5szappT4yD",description:"_1Ef6XwisQQ_6L-zgfUUXWz",add:"_1xpdCQ5rpANuL27YtKU_GP"}},a7LG:function(e,t,a){e.exports={loader:"_1SSd82D2JVkLI3Kgf9ah1D",error:"_2AiP8qqExjuIv1JlmeEtEN"}},"ac+n":function(e){e.exports=JSON.parse('[{"id":"open","name":"Open"},{"id":"inProgress","name":"In progress"},{"id":"limitedAvailability","name":"Limited availability"},{"id":"reassign","name":"Reassign"},{"id":"resolved","name":"Resolved"},{"id":"closed","name":"Closed"}]')},ae8Y:function(e,t,a){e.exports={header:"_1cERi1321xldz7MSqDea9-",headerTop:"_1ymkIt4BWxJgU6gM76qK-3",menu:"_2F7ltsQ62ZcluPM-meSPzH",icon:"_3zWSecX92G0kGl_uQX0ebx",willowLink:"_1npXQtTzjBl1QAh2lGjDLi",willow:"_12ai2Im3inK__pu4MP6hxD",logo:"_11g7yZ7Bz02lKDrtdWpyoi",logoImage:"_2Xf7nUt7mFV4ekKT0Mf7nj",headerContent:"lLFE0tzcL-4Fv3xw5F5gH",headerPanel:"_3G_WnRYhGlDrCIqYqkmg0s"}},afr4:function(e,t,a){e.exports={footer:"_1_E9MgTMKMZLKKDCQ5p6ls"}},aqpU:function(e,t,a){e.exports={portfolio:"_2Q7waFPjOiomg7nvBXKh4l",content:"VYGJfxmm6kdZZBn9i8xBJ"}},b1T3:function(e,t,a){e.exports={content:"V8EGF6TYZMiXOEerJRFId"}},bN1B:function(e,t,a){e.exports={xAxis:"zHSA-NUH4wvdSqroqaXbb"}},bqn4:function(e,t,a){e.exports={app:"_3DqSrubibO3d0ncIZ7C3Yc",tabsHeader:"_6mP70oYvIxOCvts4onvlV",tabsContent:"p0w00BuouOQaFRK25Eebc"}},cuDZ:function(e,t,a){e.exports={configuration:"_15dHgW8XjyC2_0_jiSaXWq",container:"_3b9HwGeR_R2BF5TIpmo4o",iframe:"_1a6jqLqwR8q2cMEP1BeYs8"}},d7oy:function(e,t,a){e.exports={container:"_3y-iugC0PxR9LYX1aAq2Jd",newLevel:"_1zMIi5R_GA_1BC3fudD3ML",hr:"_8YbQgRjd6Z_arkNhitNgq",panel:"_3E_XgdPUoFYABtljFF_GVp",floorName:"_1BLGL9C2QsisbtRhdi_h6Q",filesSelectButton:"_1Jjx3JlhzUTp4V2QLv861b",filesSelectButtonContent:"_1GIxsyJAJOKYoD_V2Akew1",filesSelectContent:"_2AnsJlnkVL4xE3JW8yI-2u",icon:"bl00CDpQSe7SoGvfIE0F5",upload:"_1a4C3nZqphfWIgh1B4VgAe"}},dkxU:function(e,t,a){e.exports={button:"_1OzBYvFwTBjTYA33xcPSEF",willow:"_3WyJ4YSmBoPxsfXpGuVLSE"}},eRg1:function(e,t,a){e.exports={sitesSelect:"_3PCfnC6K7Bn4nXTD6VifZG"}},ggaf:function(e,t,a){e.exports={floatingPanelFooter:"_33oEYN6kdwxbhbqPQSogGg"}},"h6S+":function(e,t,a){e.exports={accordion:"_2Dl6zEASiKcQUyiD3XDSlY",selected:"mlr3ma0X7BCXLNIxmoTmA",button:"_3Z2BVG8YOHqXdPurosh2sz",input:"_23eBibj8BMjFp0NBrEiU5U",isReadOnly:"_1BS2EDDj_WCD48qfOEE0Am",chevron:"_1r5n0ebzS5syuqUO9154k2"}},h8yV:function(e,t,a){e.exports={icon:"amYgSdKXRssKfs7TQqsWc",button:"n-TVT2f8jOqkHQTqtSPW6"}},hB7p:function(e,t,a){e.exports={apps:"KqwP7vl3d2cd92n2qwjMn"}},hjhf:function(e,t,a){e.exports={header:"_2-E4SId_bngZAc6-lNUbqH",logo:"_2jrcwtqHykVxqohXey7Je0",img:"_3ddjqaqyuUCP58YHPwXkA3",right:"wtR55b5PSjIumk1MCX0th",message:"_2t-2wUVCZMPUsZY6DBMHdh"}},"i+UY":function(e,t,a){e.exports={willow:"_2qH4krA4jwmDDKYpfFWnZH",icon:"_3WgBvBHzjmQP3WOluszZPF"}},jb66:function(e){e.exports=JSON.parse('[{"id":"customerUser","name":"Building"},{"id":"contractor","name":"Contractor"},{"id":"reporter","name":"Requestor"}]')},jtLR:function(e,t,a){e.exports={validations:"_1QJZ-ORq8a9sGeWdCDMYSf"}},mt16:function(e,t,a){e.exports={filesSelectButton:"wDItVDeP-HAfLk-9THIzK",filesSelectButtonContent:"_1JwYKi6YkxjKzIOfg35Edc",filesSelectContent:"_3oh3AFqGN56-GtrW9fRYTB",icon:"_24zDJETtZzPKTIXd9sjfJY",progress:"_3x-AZDsNgKU3dLl_yvm7T"}},ndMx:function(e,t,a){e.exports={isSelected:"_1fglYcZ7vRSoTIvR_FHnNP",investigate:"_21vwbspBDY1K35q6OOyaIz"}},nwlo:function(e,t,a){e.exports={icon:"_2wfkEZNP2mMnj8ik1ZYmlu",button:"_2CyaVV9B4yVuPaCfuLabL4"}},oRFQ:function(e,t,a){e.exports={countrySelect:"_3DSlCxru57xaZhnl6SItF5",icon:"_3p1N9P8W4i1jVdVcuiyBm5"}},ocZb:function(e,t,a){e.exports={filesSelectButton:"_3EYORITxRoykuO36mggh1_",filesSelectButtonContent:"_1UzmzlX8saekqIluZ5Gw3x",filesSelectContent:"_3uUoFMyZgQhLpl6MLexX_P",icon:"P6njTfXPWxyr8T7XcFtZL"}},pp9z:function(e,t,a){e.exports={background:"_18ZwZceJJPnDVigE5DxQ1y",enter:"_26tHr1BjHJxWh8Xgf7t66L",accountLayout:"_1Cm8nQ9IVlmt-WfE-Lvv2N",willow:"qBFSJ2JRQltd6c7KNyUaU",title:"_35zWbmlYq83cf3QVdCYdCY",content:"_1apLmnx0BWHifeGyRoPAb4",input:"_2WJaxq7OdCoG8yt1HL_dYz",inputControl:"_27iSEeh3U5Bnc6SvC6O0J0",icon:"_35sfCyqMr9vzSP9hzm5pJ1",passwordInputButton:"_1v-rRaD0fR9P8ck7x_NBPZ",button:"_1yPlL0ynpLfqF44ggL1Orv",link:"_1yKslvz8Xu-Kz9RDiZYw5o",message:"bIw37XA6IWBowb3_7-lwq"}},qhUf:function(e,t,a){e.exports={floorInformation:"_25fxoi2TqPjEjzD1d9omVl",isVisible:"_3HbC2OahDRG7hxgx0yKJ7m"}},qx7s:function(e,t,a){e.exports={tabsButton:"j8I1a6hgFr7ck9tiHMvUG",selected:"e-JTqYUZBbfgYeiJjpQak",visible:"_3juvrOu-RekcYOlDVVK2Ee"}},rgPR:function(e,t,a){e.exports={menuButton:"AtnOi4NZPmANTCftZEY3Z",selected:"_1AaiA_ZBv0NsnD7Q6hau4h"}},"s+M6":function(e,t,a){e.exports={imageLayer:"_3lin4DWQih-PE2a44Ersn7",isFirst:"_1rVWlPleIZWWwcQOuK1zRQ",toggle:"_30bpU_NVZlvt183ybpykl1",modeView:"QyRSuX3zmFrZ8uyOT2voV",delete:"_3xw5SMB80y2lPhOdwEgFBx",input:"Qkw1atC2KJK3fhU4hTp_U",hidden:"_2N2oOHFApsinAROrYgaLH2"}},sqAZ:function(e,t,a){e.exports={zone:"_229DoSZpUGDKAv4aAp5JCs",selected:"_1LEVN9PcPdGgf8ML1pGHM5",move:"_1y_xXw6_OETcn214xDyj3p",point:"gbsRU3rku7FRgAa73lbqD"}},tDnN:function(e,t,a){e.exports={captureButton:"_2BaI4u0SysEMBR39JwAt9M"}},tJ8s:function(e,t,a){e.exports={asset:"_36Fd0dJ_pK1kQyFlxrzUyq"}},tjUo:function(e,t,a){"use strict";a.r(t);var n=a("g0WC"),l=a("ERkP"),r=a.n(l),o=a("bk/2"),i=a.n(o),c=a("zCf4"),s=a("OE7a"),d=a("MmTa"),m=a("oRFQ"),u=a.n(m);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const E=[{value:"au",text:"AUS"},{value:"us",text:"USA"},{value:"eu",text:"EU"}];function h({...e}){const[t,a]=Object(l.useState)(()=>{var e;return null!==(e=s.ob.get("api"))&&void 0!==e?e:"au"});return Object(l.useEffect)(()=>{Object(s.qb)(t)},[t]),r.a.createElement(s.V,p({},e,{value:t,header:e=>{var t;return null===(t=E.find(t=>t.value===e))||void 0===t?void 0:t.text},icon:"country",className:u.a.countrySelect,iconClassName:u.a.icon,onChange:a}),E.map(e=>r.a.createElement(s.M,{key:e.value,value:e.value},e.text)))}var f=a("pp9z"),g=a.n(f);function b(){var e,t;const a=Object(c.h)(),n=Object(s.sb)();let l="Welcome back,";return(null===(e=a.state)||void 0===e?void 0:e.create)&&(l="Your password has been created,"),(null===(t=a.state)||void 0===t?void 0:t.reset)&&(l="Your password has been reset,"),r.a.createElement(s.z,{onSubmit:function(e){const t=s.ob.get("api");return new Promise((a,l)=>{new d.a({domain:n["auth0Domain-"+t],clientID:n["auth0ClientID-"+t],audience:n["auth0Audience-"+t]}).login({realm:"Username-Password-Authentication",email:e.data.email,password:e.data.password,redirectUri:s.pb.createUrl(window.location.origin+"/account/auth0callback",{redirect:s.pb.get("redirect"),regionCode:t}),responseType:"code"},e=>{if("request_error"!==e.code)return"invalid_request"===e.code?void l(new s.lb("Email and password must be given.")):"access_denied"===e.code?void l(new s.lb({message:"Wrong email or password",description:"Have you selected the right region to login to?"})):void l(new s.lb(e.error_description));l()})})}},e=>r.a.createElement(s.W,{size:"extraLarge"},r.a.createElement(s.db,{size:"h1",color:"light"},r.a.createElement("div",null,l),r.a.createElement("div",null,"sign in to your account:")),r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement(s.E,{name:"email",icon:"email",type:"email",placeholder:"enter your email address",error:e.errors.length>0,autoComplete:"username",className:g.a.input,inputClassName:g.a.inputControl,iconClassName:g.a.icon}),r.a.createElement(s.P,{name:"password",placeholder:"enter your password",error:e.errors.length>0,autoComplete:"current-password",className:g.a.input,inputClassName:g.a.inputControl,buttonClassName:g.a.passwordInputButton,iconClassName:g.a.icon})),r.a.createElement(s.W,{horizontal:!0,type:"content"},r.a.createElement(s.f,{type:"submit",color:"white",size:"large",width:"large",className:g.a.button},"Sign in"),r.a.createElement(s.W,{horizontal:!0,align:"top right"},r.a.createElement(s.f,{to:"/account/forgot-password",className:g.a.link},"Forgot password?")))))}function y(){const e=Object(s.rb)();return r.a.createElement(s.z,{debounce:!1,success:()=>r.a.createElement(s.W,{size:"extraLarge"},r.a.createElement(s.db,{size:"h1",color:"light"},r.a.createElement("div",null,"Enter your account email"),r.a.createElement("div",null,"to reset your password:")),r.a.createElement(s.H,{icon:"ok",className:g.a.message},"We have sent you a reset password link!"),r.a.createElement(s.W,{align:"right"},r.a.createElement(s.f,{to:"/account/login",className:g.a.link},"OK"))),onSubmit:function(t){return e.post(`/api/users/${t.data.email}/password/reset`)}},e=>{var t;return r.a.createElement(s.W,{size:"extraLarge"},r.a.createElement(s.db,{size:"h1",color:"light"},r.a.createElement("div",null,"Enter your account email"),r.a.createElement("div",null,"to reset your password:")),r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement(s.E,{name:"email",icon:"email",placeholder:"enter your email address",error:e.errors.length>0,autoComplete:"username",className:g.a.input,inputClassName:g.a.inputControl,iconClassName:g.a.icon})),r.a.createElement(s.W,{horizontal:!0,type:"content"},r.a.createElement(s.f,{type:"submit",color:"white",size:"large",width:"large",disabled:0===(null===(t=e.data.email)||void 0===t?void 0:t.length),className:g.a.button},"Submit"),r.a.createElement(s.W,{horizontal:!0,align:"top right"},r.a.createElement(s.f,{to:"/account/login",className:g.a.link},"Cancel"))))})}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function I({isValid:e,children:t,...a}){return r.a.createElement(s.W,v({},a,{horizontal:!0,size:"small"}),r.a.createElement(s.C,{icon:e?"ok":"error"}),r.a.createElement("span",null,t))}const w="@#$%^&*-_!+=[]{}|\\:',.?/`~\"();".replace("\\","\\\\",/g/).replace("[","\\[",/g/).replace("]","\\]",/g/).replace("(","\\(",/g/).replace(")","\\)",/g/).replace("{","\\{",/g/).replace("}","\\}",/g/).replace("-","\\-",/g/);var O=[{description:"minimum 8 characters",isValid:e=>e.length>=8},{description:"at least 1 upper case character A-Z",isValid:e=>/[A-Z]/.test(e)},{description:"at least 1 lower case character a-z",isValid:e=>/[a-z]/.test(e)},{description:"at least 1 number 0-9",isValid:e=>/[0-9]/.test(e)},{description:"at least 1 special character",isValid:e=>new RegExp(`[${w}]`).test(e),title:"@#$%^&*-_!+=[]{}|\\:',.?/`~\"();".split("").join(" ")},{description:"no spaces",isValid:e=>!/ /.test(e)}],k=a("jtLR"),C=a.n(k);function j({value:e}){return r.a.createElement(s.W,{size:"tiny",className:C.a.validations},O.map(t=>r.a.createElement(I,{key:t.description,isValid:t.isValid(e),title:t.title},t.description)))}function N(){const[e]=Object(l.useState)(()=>{const e=s.pb.get("region");return Object(s.qb)(e),s.pb.get("t")}),t=Object(c.h)(),a=Object(s.rb)(),n=t.pathname.endsWith("reset-password"),o=()=>r.a.createElement(c.a,{to:{pathname:"/account/login",state:{create:!n,reset:n}}});return r.a.createElement(s.s,{url:n?"/api/resetPasswordTokens/"+e:"/api/initializeUserTokens/"+e,error:null},(t,l)=>l.error?r.a.createElement(s.W,{size:"large"},r.a.createElement(s.H,{icon:"error"},401===l.error.status?r.a.createElement(s.W,{size:"tiny"},n?r.a.createElement(s.W,{size:"tiny"},r.a.createElement(s.db,{size:"large"},"Your reset password request has expired."),r.a.createElement(s.db,null,r.a.createElement("span",null,"Please request another password reset "),r.a.createElement(s.G,{to:"/account/forgot-password"},"here"),r.a.createElement("span",null,"."))):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.db,{size:"large"},"Your account activation has expired."),r.a.createElement(s.db,null,"Please contact your administrator to request a new activation email."))):r.a.createElement(c.a,{to:"/account/login"})),!n&&r.a.createElement(s.W,{align:"right"},r.a.createElement(s.f,{to:"/account/login",className:g.a.link},"OK"))):r.a.createElement(s.z,{success:o,onSubmit:function(l){const r=n?"put":"post",o=n?`/api/users/${window.encodeURIComponent(t.email)}/password`:`/api/users/${window.encodeURIComponent(t.email)}/initialize`;return a.ajax(r,o,{body:{token:e,password:l.data.password}})}},e=>{var a;const l=null!==(a=e.data.password)&&void 0!==a?a:"",o=O.every(e=>e.isValid(l));return r.a.createElement(s.W,{size:"extraLarge"},r.a.createElement(s.db,{size:"h1",color:"light",whiteSpace:"normal"},n?`Reset the password for your ${t.email} account.`:`Create the password for your ${t.email} account.`),r.a.createElement(s.W,{horizontal:!0},r.a.createElement(s.W,{size:"extraLarge"},r.a.createElement(s.P,{name:"password",size:"large",placeholder:"enter your new password",autoComplete:"current-password",maxLength:64,className:g.a.input,inputClassName:g.a.inputControl,buttonClassName:g.a.passwordInputButton,iconClassName:g.a.icon}),r.a.createElement(s.f,{type:"submit",color:"white",size:"large",width:"large",disabled:!o,className:g.a.button},n?"Reset password":"Create password")),r.a.createElement("div",null,r.a.createElement(j,{value:l}))))}))}var x=a("nsO7"),M=a.n(x),z=a("3ipZ"),A=a.n(z),S=a("5hf3"),q=a.n(S);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function L(e){return r.a.createElement(s.G,W({to:"/"},e),r.a.createElement(A.a,{className:q.a.willow}))}var D=a.p+"public/8f0a9641e4cb5d0e573bc981f728ab3a.jpg",Z=a.p+"public/99dc200cb8300dfa2d5bc757dff8e4ca.jpg",P=a.p+"public/960d6439bf740785ca2a03ff3b369457.jpg",_=a.p+"public/7fd950ebd58645c0cb87420d4f95f358.jpg",R=a.p+"public/059680c7c758d4702e5171a1505b7b0f.jpg",T=a.p+"public/aec1ccff5431c184cdf9fd34c305f9bf.jpg",F=a.p+"public/eeef401e9f33fbb9bb063c93d410ed6b.jpg";const G=M.a.sample([D,Z,P,_,R,T,F]);function $({children:e}){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g.a.background,style:{backgroundImage:`url(${G})`}}),r.a.createElement("div",{className:g.a.accountLayout},r.a.createElement(L,{className:g.a.willow}),r.a.createElement("div",{className:g.a.title},"The digital twin for the built world."),r.a.createElement("div",{className:g.a.content},e)))}var U=a("U2NX"),B=a.n(U);function X(){const e=Object(c.g)(),t=Object(s.rb)(),[a,n]=Object(l.useState)(!1);return Object(l.useEffect)(()=>{!async function(){const a=s.pb.get("code"),l=s.pb.get("token"),r=s.pb.get("regionCode");Object(s.qb)(r);try{var o;await t.post("/api/me/signin",null!=a?{authorizationCode:a,redirectUri:window.location.href}:{token:l}),e.replace(null!==(o=s.pb.get("redirect"))&&void 0!==o?o:"/")}catch(e){n(!0)}}()},[]),r.a.createElement("div",{className:B.a.auth0Callback},r.a.createElement(L,{to:a?"/":"",className:B.a.willow}),a?r.a.createElement(s.H,{icon:"error"},r.a.createElement("p",null,"An error has occurred trying to sign you in."),r.a.createElement("p",null,"Please contact your site administrator.")):r.a.createElement(s.C,{icon:"progress",size:"large"}))}const V=Object(l.createContext)();function H(){return Object(l.useContext)(V)}var Y=a("AyMM"),J=a.n(Y);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Q({header:e,tile:t,children:a,...n}){const l=Object(s.Db)();return r.a.createElement(s.f,K({},n,{width:"100%",className:J.a.button,onClick:()=>l.close()}),r.a.createElement(s.W,{horizontal:!0,type:"content",align:"middle",size:"large",width:"100%",padding:"medium large"},r.a.createElement(s.W,{align:"center middle",className:J.a.tile},t),r.a.createElement(s.W,null,r.a.createElement(s.db,null,e),r.a.createElement(s.db,{color:"dark",whiteSpace:"normal"},a))))}var ee=a("dkxU"),te=a.n(ee);function ae({onClose:e}){const t=H(),a=t.sites.some(e=>"admin"===e.userRole)||0===t.sites.length;return r.a.createElement(s.I,{header:e=>r.a.createElement(s.f,{to:"/",className:te.a.button,onClick:()=>e.close()},r.a.createElement(s.W,{horizontal:!0,size:"medium",align:"middle",padding:"large"},r.a.createElement(s.mb,{className:te.a.willow}),r.a.createElement(s.db,{type:"h1"},"Willow"))),type:"left",onClose:e},r.a.createElement(s.W,{padding:"large large small"},r.a.createElement(s.db,{type:"h3"},"Apps")),null!=t.site&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{header:"Dashboard",tile:"D",to:"/"},"Visualize building data, insights and tickets in one place"),r.a.createElement(Q,{header:"Marketplace",tile:"M",to:"/marketplace"},"View and install Apps on your buildings"),r.a.createElement(Q,{header:"Time Machine",tile:"T",to:"/time-machine"},"Compare live data trends"),r.a.createElement(s.r,{feature:"wp-kpi-enabled"},r.a.createElement(Q,{header:"KPI",tile:"K",to:"/kpi"}))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(Q,{header:"Admin",tile:"A",to:"/admin"},"Admin section")))}var ne=a("DZg4"),le=a.n(ne);function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function oe({children:e,...t}){return r.a.createElement(s.o,re({icon:"chevron",className:le.a.button,iconClassName:le.a.icon},t),e)}var ie=a("3QjJ"),ce=a.n(ie);function se(){const e=Object(s.rb)(),t=Object(s.Ib)();return r.a.createElement(s.n,{className:ce.a.userProfile},r.a.createElement(s.kb,{user:t,"data-tooltip":null}),r.a.createElement(s.p,{contentClassName:ce.a.content},r.a.createElement(oe,{onClick:function(){window.localStorage.clear(),document.location.reload()}},"Clear view settings"),r.a.createElement("hr",null),r.a.createElement(oe,{href:"https://support.willowinc.com"},"Help & Support"),r.a.createElement("hr",null),r.a.createElement(s.z,{showSubmitted:!1,onSubmit:function(){return e.post("/api/me/signout")},onSubmitted:()=>t.logout()},r.a.createElement(oe,{type:"submit",icon:null,closeOnClick:!1},"Log Out"))))}var de=a("ae8Y"),me=a.n(de);function ue(){var e;const t=Object(s.Ib)(),a=H(),[n,o]=Object(l.useState)(!1);return r.a.createElement("div",{className:me.a.header},r.a.createElement(s.W,{horizontal:!0,type:"content",align:"middle",size:"medium",className:me.a.headerTop},r.a.createElement(s.W,{horizontal:!0},r.a.createElement(s.f,{icon:"menu",className:me.a.menu,iconClassName:me.a.icon,onClick:()=>o(!0)}),n&&r.a.createElement(ae,{onClose:()=>o(!1)}),r.a.createElement(s.G,{to:"/",className:me.a.willowLink},r.a.createElement(s.mb,{className:me.a.willow})),(null===(e=t.customer)||void 0===e?void 0:e.logoUrl)&&r.a.createElement(s.W,{align:"middle",padding:"0 medium",className:me.a.logo},r.a.createElement("img",{src:t.customer.logoUrl,alt:"Logo",className:me.a.logoImage}))),r.a.createElement("div",{ref:a.headerRef,className:me.a.headerContent}),r.a.createElement(se,null)),r.a.createElement("div",{ref:a.headerPanelRef,className:me.a.headerPanel}))}var pe=a("O94r"),Ee=a.n(pe),he=a("O62Z"),fe=a.n(he);function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function be({type:e,className:t,children:a,...n}){const l=H();let o=e;null==e&&(o=1===r.a.Children.toArray(a).length?"header":"content");const i=Ee()(fe.a.layoutHeader,t);return r.a.createElement(s.R,{target:l.headerRef.current},r.a.createElement(s.W,ge({horizontal:!0,overflow:"hidden",height:"100%",align:"middle",size:"medium"},n,{type:o,className:i}),a))}a("MqT/");function ye({sites:e,children:t}){var a;const n=Object(c.h)(),o=Object(s.Ib)(),[i,d]=Object(l.useState)(!1),m=Object(l.useRef)(),u=Object(l.useRef)(),p=n.pathname.match(/\/sites\/(.+?)(\/|$)/),E=null!==(a=e.find(e=>{var t;return e.id===(null!==(t=null==p?void 0:p[1])&&void 0!==t?t:o.options.siteId)}))&&void 0!==a?a:e[0];Object(l.useEffect)(()=>{d(!0)},[]),Object(l.useEffect)(()=>{null!=E&&o.saveUserOptions("siteId",E.id)},[null==E?void 0:E.id]);const h={headerRef:m,headerPanelRef:u,sites:e,site:E,selectSite(e){o.saveUserOptions("siteId",e.id)},getSiteUrl:e=>n.pathname.replace(/\/sites\/(.+?)(\/|$)/,`/sites/${e}${p[2]}`)};return r.a.createElement(V.Provider,{value:h},r.a.createElement(ue,null),i&&(null!=t?t:null))}var ve=a("nwlo"),Ie=a.n(ve);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Oe({icon:e,children:t,...a}){return r.a.createElement(s.f,we({},a,{className:Ie.a.button}),r.a.createElement(s.W,{horizontal:!0,type:"content",align:"middle",size:"medium",width:"100%"},r.a.createElement(s.W,{align:"center middle",padding:"small",className:Ie.a.icon},r.a.createElement(s.C,{icon:e})),r.a.createElement(s.db,null,t)))}function ke({portfolio:e,onClose:t}){const a=Object(s.rb)(),n=Object(s.yb)(),l=Object(s.Ib)();return r.a.createElement(s.T,{header:"Delete portfolio",onSubmit:function(){return a.delete(`/api/customers/${l.customer.id}/portfolios/${e.id}`)},onSubmitted:function(e){e.closeAll(),n("portfolios")},onClose:t},"Are you sure you want to delete",r.a.createElement(s.W,{align:"center"},r.a.createElement(s.db,{whiteSpace:"normal"},'"',e.name,'"?')))}var Ce=a("afr4"),je=a.n(Ce);function Ne({portfolio:e,onClose:t}){const a=Object(s.rb)(),n=Object(s.yb)(),o=Object(s.Ib)(),[i,c]=Object(l.useState)(!1),d=null==e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.I,{header:d?"Add portfolio":e.name,onClose:t},r.a.createElement(s.z,{defaultValue:e,onSubmit:function(e){return a.post(`/api/customers/${o.customer.id}/portfolios`,{name:e.data.name})},onSubmitted:function(){t(),n("portfolios")}},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,null,r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.E,{name:"name",label:"Name"})),!d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.W,{size:"large",padding:"large"},r.a.createElement(s.t,{legend:"Categories"},r.a.createElement(Oe,{icon:"user",to:`/admin/portfolios/${e.id}/sites`},"Manage sites"))),r.a.createElement("hr",null),r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.f,{color:"red",onClick:()=>c(!0)},"Delete portfolio")))),r.a.createElement(s.W,{padding:"large",className:je.a.footer},r.a.createElement(s.f,{type:"submit",color:"blue"},"Add portfolio"))))),i&&r.a.createElement(ke,{portfolio:e,onClose:()=>c(!1)}))}var xe=a("aqpU"),Me=a.n(xe);function ze(){const e=Object(s.sb)(),[t,a]=Object(l.useState)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.ab,null,e.hasFeatureToggle("wp-admin-enabled")&&r.a.createElement(s.cb,null,r.a.createElement(s.f,{icon:"add",onClick:function(){a({name:""})}})),r.a.createElement(s.X,{header:"Portfolios"},r.a.createElement(s.s,{name:"portfolios",url:"/api/me/portfolios"},e=>r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.W,{horizontal:!0,type:"wrap",size:"medium"},e.map(e=>r.a.createElement(s.f,{key:e.id,className:Me.a.portfolio,onClick:()=>a(e)},r.a.createElement(s.W,{type:"content",size:"medium",padding:"medium"},r.a.createElement(s.db,null,e.name),r.a.createElement(s.W,{className:Me.a.content}))))))))),null!=t&&r.a.createElement(Ne,{portfolio:t,onClose:()=>a()}))}function Ae({header:e,value:t,onChange:a}){const[n,l]=t;return r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",size:"medium",overflow:"hidden"},r.a.createElement(s.db,null,e),r.a.createElement(s.E,{width:"small",placeholder:"Prefix",maxLength:4,value:n,onKeyDown:function(e){const t=e.which>=65&&e.which<=90,a="Backspace"===e.key,n="Enter"===e.key,l="Escape"===e.key,r="Tab"===e.key;t||a||n||l||r||e.preventDefault()},onChange:function(e){a([e.toUpperCase(),l])}}),r.a.createElement(s.L,{width:"small",maxLength:3,value:l,placeholder:"Levels",onChange:function(e){a([n,e])}}))}function Se({name:e,errorName:t}){var a,n;const o=Object(s.zb)(),[i,c]=Object(l.useState)([["B",null],["L",null],["",null],["T",null]]),d=null==o||null===(a=o.errors.find(a=>{var n;return(null===(n=a.name)||void 0===n?void 0:n.toLowerCase())===(null!=t?t.toLowerCase():null==e?void 0:e.toLowerCase())}))||void 0===a?void 0:a.message;function m(e,t){c(a=>a.map((a,n)=>n===e?t:a))}Object(l.useEffect)(()=>{o.setData(e,i),o.clearError(null!=t?t:e)},[i]);const u=null===(n=o.data[e])||void 0===n?void 0:n.some(e=>null!=e[1]);return r.a.createElement(s.t,{legend:"Levels",required:!u,error:d,padding:"0 large"},r.a.createElement(Ae,{header:"Basement levels",value:i[0],onChange:e=>m(0,e)}),r.a.createElement(Ae,{header:"Lobby levels",value:i[1],onChange:e=>m(1,e)}),r.a.createElement(Ae,{header:"Mid tower levels",value:i[2],onChange:e=>m(2,e)}),r.a.createElement(Ae,{header:"Top tower levels",value:i[3],onChange:e=>m(3,e)}))}function qe({site:e,onClose:t}){const a=Object(s.yb)(),n=Object(s.rb)(),l=Object(s.Ib)(),o=null==e.id;function i(e){var t,a;if(null==e.data.portfolioId)throw new s.lb({name:"portfolioId",message:"Portfolio must be given"});let r=null!==(t=null===(a=e.data.levels)||void 0===a?void 0:a.filter(e=>null!=e[1]))&&void 0!==t?t:[];if(!(r.length===M()(r).uniqBy(e=>e[0]).value().length))throw new s.lb({name:"floorCodes",message:"Level prefixes must be unique"});if(!o)throw new s.lb("Error saving site");return r=e.data.levels.map(e=>{const t=0!==e[1]?e[1]:1;return[e[0],[...Array(null!=t?t:0)].map((t,a)=>0!==e[1]?`${e[0]}${a+1}`:e[0])]}).map((e,t)=>0===t?[e[0],e[1].reverse()]:e).flatMap(e=>e[1]),n.post(`/api/customers/${l.customer.id}/portfolios/${e.data.portfolioId}/sites`,{name:e.data.name,code:e.data.code,timeZoneId:e.data.timeZoneId,address:e.data.address,suburb:e.data.suburb,country:e.data.country,latitude:e.data.latitude,longitude:e.data.longitude,floorCodes:r})}return r.a.createElement(s.I,{header:o?"Add new site":e.name,onClose:t},t=>r.a.createElement(s.s,{url:[o?void 0:"/api/sites/"+e.id,"/api/me/portfolios","/api/timezones"]},([n,l,c])=>r.a.createElement(s.z,{defaultValue:n,readOnly:!o,onSubmit:i,onSubmitted:()=>function(e){e.close(),a("sites")}(t)},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,{size:"large",padding:"large 0"},r.a.createElement(s.t,{padding:"0 large"},r.a.createElement(s.V,{name:"portfolioId",label:"Assigned Portfolio",required:!0,notFound:"No portfolios found"},l.map(e=>r.a.createElement(s.M,{key:e.id,value:e.id},e.name)))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Site info",padding:"0 large"},r.a.createElement(s.E,{name:"name",label:"Site name",required:!0}),r.a.createElement(s.E,{name:"code",label:"Site code",required:!0}),r.a.createElement(s.V,{name:"timeZoneId",label:"Timezone",required:!0},c.map(e=>r.a.createElement(s.M,{key:e.id,value:e.id},e.displayName)))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Site location",padding:"0 large"},r.a.createElement(s.E,{name:"address",label:"Address",required:!0}),r.a.createElement(s.E,{name:"suburb",label:"Suburb",required:!0}),r.a.createElement(s.V,{name:"country",label:"Country",required:!0},r.a.createElement(s.M,null,"Australia"),r.a.createElement(s.M,null,"United States"),r.a.createElement(s.M,null,"European Union"),r.a.createElement(s.M,null,"Canada"),r.a.createElement(s.M,null,"Hong Kong"),r.a.createElement(s.M,null,"United Kingdom")),r.a.createElement(s.L,{name:"latitude",label:"Latitude",min:-85,max:85}),r.a.createElement(s.L,{name:"longitude",label:"Longitude",min:-180,max:180})),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(Se,{name:"levels",errorName:"floorCodes"})),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Categories",padding:"0 large"},r.a.createElement(Oe,{icon:"user",to:`/admin/sites/${e.id}/users`},"Manage users"),r.a.createElement(Oe,{icon:"floors",to:`/dashboard/sites/${e.id}?admin=true`},"Manage floors")))),r.a.createElement(s.y,{showSubmit:o,onCancelClick:()=>function(e){e.close()}(t)},o?"Add site":"Save site")))))}var We=a("vHfG"),Le=a.n(We);function De(){const e=Object(c.i)(),t=Object(s.sb)(),a=Object(s.Ib)(),[n,o]=Object(l.useState)();return r.a.createElement(s.ab,null,r.a.createElement(s.Y,null),t.hasFeatureToggle("wp-admin-enabled")&&r.a.createElement(s.cb,null,r.a.createElement(s.f,{icon:"add",onClick:function(){o({timezoneId:Intl.DateTimeFormat().resolvedOptions().timeZone})}})),r.a.createElement(s.X,{header:"Sites"},r.a.createElement(s.s,{url:`/api/customers/${a.customer.id}/portfolios/${e.portfolioId}/sites`,notFound:"No sites found"},e=>r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.W,{horizontal:!0,type:"wrap",size:"medium"},e.map(e=>r.a.createElement(s.f,{key:e.id,className:Le.a.site,onClick:()=>o(e)},r.a.createElement(s.W,{type:"content",size:"medium",padding:"medium"},r.a.createElement(s.db,null,e.name),r.a.createElement(s.W,{className:Le.a.content},r.a.createElement(s.W,{horizontal:!0,height:"100%",size:"medium",align:"center bottom",padding:"medium"},r.a.createElement(s.f,{size:"small",color:"blue",icon:"user",to:`/admin/sites/${e.id}/users`,className:Le.a.icon,"data-tooltip":"Manage users"}),r.a.createElement(s.f,{size:"small",color:"blue",icon:"floors",to:`/dashboard/sites/${e.id}?admin=true`,className:Le.a.icon,"data-tooltip":"Manage floors"})))))))))),null!=n&&r.a.createElement(qe,{site:n,onClose:()=>o()}))}var Ze=a("h8yV"),Pe=a.n(Ze);function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Re({icon:e,children:t,...a}){return r.a.createElement(s.f,_e({},a,{className:Pe.a.button}),r.a.createElement(s.W,{horizontal:!0,type:"content",align:"middle",size:"medium",width:"100%"},r.a.createElement(s.W,{align:"center middle",padding:"small",className:Pe.a.icon},r.a.createElement(s.C,{icon:e})),r.a.createElement(s.db,null,t)))}function Te({header:e,value:t,onChange:a}){const[n,l]=t;return r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",size:"medium",overflow:"hidden"},r.a.createElement(s.db,null,e),r.a.createElement(s.E,{width:"small",placeholder:"Prefix",maxLength:4,value:n,onKeyDown:function(e){const t=e.which>=65&&e.which<=90,a="Backspace"===e.key,n="Enter"===e.key,l="Escape"===e.key,r="Tab"===e.key;t||a||n||l||r||e.preventDefault()},onChange:function(e){a([e.toUpperCase(),l])}}),r.a.createElement(s.L,{width:"small",maxLength:3,value:l,placeholder:"Levels",onChange:function(e){a([n,e])}}))}function Fe({name:e,errorName:t}){var a,n;const o=Object(s.zb)(),[i,c]=Object(l.useState)([["B",null],["L",null],["",null],["T",null]]),d=null==o||null===(a=o.errors.find(a=>{var n;return(null===(n=a.name)||void 0===n?void 0:n.toLowerCase())===(null!=t?t.toLowerCase():null==e?void 0:e.toLowerCase())}))||void 0===a?void 0:a.message;function m(e,t){c(a=>a.map((a,n)=>n===e?t:a))}Object(l.useEffect)(()=>{o.setData(e,i),o.clearError(null!=t?t:e)},[i]);const u=null===(n=o.data[e])||void 0===n?void 0:n.some(e=>null!=e[1]);return r.a.createElement(s.t,{legend:"Levels",required:!u,error:d,padding:"0 large"},r.a.createElement(Te,{header:"Basement levels",value:i[0],onChange:e=>m(0,e)}),r.a.createElement(Te,{header:"Lobby levels",value:i[1],onChange:e=>m(1,e)}),r.a.createElement(Te,{header:"Mid tower levels",value:i[2],onChange:e=>m(2,e)}),r.a.createElement(Te,{header:"Top tower levels",value:i[3],onChange:e=>m(3,e)}))}function Ge({site:e,onClose:t}){const a=Object(s.yb)(),n=Object(s.rb)(),l=Object(s.Ib)(),o=null==e.id;function i(e){var t,a;if(null==e.data.portfolioId)throw new s.lb({name:"portfolioId",message:"Portfolio must be given"});let r=null!==(t=null===(a=e.data.levels)||void 0===a?void 0:a.filter(e=>null!=e[1]))&&void 0!==t?t:[];if(!(r.length===M()(r).uniqBy(e=>e[0]).value().length))throw new s.lb({name:"floorCodes",message:"Level prefixes must be unique"});if(!o)throw new s.lb("Error saving site");return r=e.data.levels.map(e=>{const t=0!==e[1]?e[1]:1;return[e[0],[...Array(null!=t?t:0)].map((t,a)=>0!==e[1]?`${e[0]}${a+1}`:e[0])]}).map((e,t)=>0===t?[e[0],e[1].reverse()]:e).flatMap(e=>e[1]),n.post(`/api/customers/${l.customer.id}/portfolios/${e.data.portfolioId}/sites`,{name:e.data.name,code:e.data.code,timeZoneId:e.data.timeZoneId,address:e.data.address,suburb:e.data.suburb,country:e.data.country,latitude:e.data.latitude,longitude:e.data.longitude,floorCodes:r})}return r.a.createElement(s.I,{header:o?"Add new site":e.name,onClose:t},t=>r.a.createElement(s.s,{url:[o?void 0:"/api/sites/"+e.id,"/api/me/portfolios","/api/timezones"]},([n,l,c])=>r.a.createElement(s.z,{defaultValue:n,readOnly:!o,onSubmit:i,onSubmitted:()=>function(e){e.close(),a("sites")}(t)},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,{size:"large",padding:"large 0"},r.a.createElement(s.t,{padding:"0 large"},r.a.createElement(s.V,{name:"portfolioId",label:"Assigned Portfolio",required:!0,notFound:"No portfolios found"},l.map(e=>r.a.createElement(s.M,{key:e.id,value:e.id},e.name)))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Site info",padding:"0 large"},r.a.createElement(s.E,{name:"name",label:"Site name",required:!0}),r.a.createElement(s.E,{name:"code",label:"Site code",required:!0}),r.a.createElement(s.V,{name:"timeZoneId",label:"Timezone",required:!0},c.map(e=>r.a.createElement(s.M,{key:e.id,value:e.id},e.displayName)))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Site location",padding:"0 large"},r.a.createElement(s.E,{name:"address",label:"Address",required:!0}),r.a.createElement(s.E,{name:"suburb",label:"Suburb",required:!0}),r.a.createElement(s.V,{name:"country",label:"Country",required:!0},r.a.createElement(s.M,null,"Australia"),r.a.createElement(s.M,null,"United States"),r.a.createElement(s.M,null,"European Union"),r.a.createElement(s.M,null,"Canada"),r.a.createElement(s.M,null,"Hong Kong"),r.a.createElement(s.M,null,"United Kingdom")),r.a.createElement(s.L,{name:"latitude",label:"Latitude",min:-85,max:85}),r.a.createElement(s.L,{name:"longitude",label:"Longitude",min:-180,max:180})),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(Fe,{name:"levels",errorName:"floorCodes"})),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Categories",padding:"0 large"},r.a.createElement(Re,{icon:"user",to:`/admin/sites/${e.id}/users`},"Manage users"),r.a.createElement(Re,{icon:"floors",to:`/dashboard/sites/${e.id}?admin=true`},"Manage floors")))),r.a.createElement(s.y,{showSubmit:o,onCancelClick:()=>function(e){e.close()}(t)},o?"Add site":"Save site")))))}var $e=a("U13L"),Ue=a.n($e);function Be(){const e=Object(c.i)(),t=Object(s.sb)(),a=Object(s.Ib)(),[n,o]=Object(l.useState)();return r.a.createElement(s.ab,null,r.a.createElement(s.Y,null),t.hasFeatureToggle("wp-admin-enabled")&&r.a.createElement(s.cb,null,r.a.createElement(s.f,{icon:"add",onClick:function(){o({timezoneId:Intl.DateTimeFormat().resolvedOptions().timeZone})}})),r.a.createElement(s.X,{header:"Sites"},r.a.createElement(s.s,{url:t.hasFeatureToggle("wp-portfolios-enabled")?`/api/customers/${a.customer.id}/portfolios/${e.portfolioId}/sites`:"/api/me/sites",notFound:"No sites found"},e=>r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.W,{horizontal:!0,type:"wrap",size:"medium"},e.filter(e=>!!t.hasFeatureToggle("wp-portfolios-enabled")||"admin"===e.userRole).map(e=>r.a.createElement(s.f,{key:e.id,className:Ue.a.site,onClick:()=>o(e)},r.a.createElement(s.W,{type:"content",size:"medium",padding:"medium"},r.a.createElement(s.db,null,e.name),r.a.createElement(s.W,{className:Ue.a.content},r.a.createElement(s.W,{horizontal:!0,height:"100%",size:"medium",align:"center bottom",padding:"medium"},r.a.createElement(s.f,{size:"small",color:"blue",icon:"user",to:`/admin/sites/${e.id}/users`,className:Ue.a.icon,"data-tooltip":"Manage users"}),r.a.createElement(s.f,{size:"small",color:"blue",icon:"floors",to:`/dashboard/sites/${e.id}?admin=true`,className:Ue.a.icon,"data-tooltip":"Manage floors"})))))))))),null!=n&&r.a.createElement(Ge,{site:n,onClose:()=>o()}))}function Xe({user:e,onClose:t}){const a=Object(c.i)(),n=Object(s.rb)(),l=Object(s.yb)();return r.a.createElement(s.T,{header:"Delete user",onSubmit:function(){return n.delete(`/api/sites/${a.siteId}/persons/${e.id}?personType=${e.type}`)},onSubmitted:function(e){e.closeAll(),l("users")},onClose:t},"Are you sure you want to delete",r.a.createElement(s.W,{align:"center"},r.a.createElement(s.db,{whiteSpace:"normal"},'"',e.name,'"?')))}function Ve({user:e,onClose:t}){const a=Object(c.i)(),n=Object(s.rb)(),o=Object(s.Gb)(),i=Object(s.Ib)(),d=Object(s.yb)(),[m,u]=Object(l.useState)(!1),p=null==e.id;function E(t){var l,r;return p?n.post(`/api/sites/${a.siteId}/persons`,{type:t.data.type,firstName:t.data.firstName,lastName:t.data.lastName,fullName:t.data.fullName,email:t.data.email,contactNumber:t.data.contactNumber,company:t.data.company,roleId:null===(l=t.data.role)||void 0===l?void 0:l.id}):n.put(`/api/sites/${a.siteId}/persons/${e.id}`,{type:t.data.type,firstName:t.data.firstName,lastName:t.data.lastName,fullName:t.data.fullName,email:t.data.email,contactNumber:t.data.contactNumber,company:t.data.company,roleId:null===(r=t.data.role)||void 0===r?void 0:r.id})}return r.a.createElement(s.I,{header:p?"Add new user":"Edit user",onClose:t},t=>r.a.createElement(s.z,{defaultValue:{...e,fullName:e.name},onSubmit:E,onSubmitted:e=>function(e,t){var a;(null===(a=e.response)||void 0===a?void 0:a.message)&&o.show({icon:"ok",description:e.response.message}),t.close(),d("users")}(e,t)},a=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.W,{type:"header"},r.a.createElement("div",null,r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.V,{name:"type",label:"Type",placeholder:"Select a type",required:!0,disabled:!p},r.a.createElement(s.M,{value:"customerUser"},"Building"),!p&&"contractor"===a.data.type&&r.a.createElement(s.M,{value:"contractor"},"Contractor"),r.a.createElement(s.M,{value:"reporter"},"Requestor"))),null!=a.data.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"General info",padding:"large"},"customerUser"===a.data.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.E,{name:"firstName",label:"First name",required:!0}),r.a.createElement(s.E,{name:"lastName",label:"Last name",required:!0})),"reporter"===a.data.type&&r.a.createElement(s.E,{name:"fullName",label:"Name",required:!0}),r.a.createElement(s.E,{name:"email",label:"Email address",disabled:!p&&"reporter"!==e.type,required:!0}),r.a.createElement(s.E,{name:"contactNumber",label:"Contact",required:!0}),r.a.createElement(s.E,{name:"company",label:"Company"}),"customerUser"===a.data.type&&r.a.createElement(s.V,{name:"role",errorName:"roleId",label:"Role",required:!0,url:"/api/roles",header:e=>e.name,params:{preferredResourceType:"site"},cache:!0},e=>e.map(e=>r.a.createElement(s.M,{key:e.id,value:e},e.name))),!p&&null!=e.createdDate&&r.a.createElement(s.fb,{label:"User since"},r.a.createElement(s.gb,{value:e.createdDate}))),!p&&r.a.createElement(s.W,{size:"large"},r.a.createElement("hr",null),r.a.createElement(s.W,{padding:"0 large"},r.a.createElement(s.f,{color:"red",disabled:i.id===e.id,onClick:()=>u(!0)},"Delete user"))))),r.a.createElement(s.y,{onCancelClick:()=>function(e){e.close()}(t)},p?"Add user":"Save user")),m&&r.a.createElement(Xe,{user:e,onClose:()=>u(!1)}))))}var He=a("jb66");function Ye(){const e=Object(c.i)(),[t,a]=Object(l.useState)(""),[n,o]=Object(l.useState)();return r.a.createElement(s.ab,null,r.a.createElement(s.Y,null),r.a.createElement(s.X,{header:"Users"},r.a.createElement(s.cb,null,r.a.createElement(s.W,{width:"100%"},r.a.createElement(s.E,{icon:"search",inputType:"search",debounce:!0,placeholder:"Search",value:t,onChange:a})),r.a.createElement(s.f,{icon:"add",onClick:function(){o({firstName:"",lastName:"",email:"",roles:[]})}})),r.a.createElement(s.Z,{name:"users",url:`/api/sites/${e.siteId}/persons`,notFound:"No users found",filter:e=>e.filter(e=>{var a,n,l,r;return e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||(null!==(a=null===(n=e.contactNumber)||void 0===n?void 0:n.toLowerCase())&&void 0!==a?a:"").includes(t.toLowerCase())||(null!==(l=null===(r=e.company)||void 0===r?void 0:r.toLowerCase())&&void 0!==l?l:"").includes(t.toLowerCase())})},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,{sort:"name"},"Full Name"),r.a.createElement(s.h,{sort:"email"},"Email Address"),r.a.createElement(s.h,{sort:"contactNumber",width:200},"Contact"),r.a.createElement(s.h,{sort:"company",width:200},"Company"),r.a.createElement(s.h,{sort:e=>{var t,a;return null!==(t=null===(a=He.find(t=>t.id===e.type))||void 0===a?void 0:a.name)&&void 0!==t?t:"-"},width:120},"Type"),r.a.createElement(s.h,{sort:"role.name",width:100},"Role"),r.a.createElement(s.h,{sort:"createdDate",width:100},"User since"))),r.a.createElement(s.e,null,e.map(e=>{var t,a;return r.a.createElement(s.U,{key:e.id,selected:n===e,onClick:()=>o(e)},r.a.createElement(s.h,null,e.name),r.a.createElement(s.h,null,r.a.createElement(s.G,{href:"mailTo:"+e.email,onClick:e=>{e.stopPropagation()}},e.email)),r.a.createElement(s.h,null,e.contactNumber),r.a.createElement(s.h,null,r.a.createElement(s.db,{empty:"-"},e.company)),r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.Q,null,null!==(t=null===(a=He.find(t=>t.id===e.type))||void 0===a?void 0:a.name)&&void 0!==t?t:"-")),r.a.createElement(s.h,{type:"fill"},e.role?r.a.createElement(s.Q,null,e.role.name):"-"),r.a.createElement(s.h,null,null!=e.createdDate?r.a.createElement(s.gb,{value:e.createdDate,format:"date"}):"-"))}))))),null!=n&&r.a.createElement(Ve,{user:n,onClose:()=>o()}))}function Je(){const e=Object(s.sb)(),t=e.hasFeatureToggle("wp-portfolios-enabled")?"Portfolios":"Sites";return r.a.createElement(s.W,{type:"header",padding:"medium"},r.a.createElement(be,null,r.a.createElement(s.ab,{type:"primary"},r.a.createElement(s.X,{header:t,to:"/admin"}))),r.a.createElement(c.d,null,e.hasFeatureToggle("wp-portfolios-enabled")?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:"/admin",exact:!0,component:ze}),r.a.createElement(c.b,{path:"/admin/portfolios/:portfolioId/sites",exact:!0,component:De}),r.a.createElement(c.b,{path:"/admin/sites/:siteId/users",component:Ye})):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{path:"/admin",exact:!0,component:Be}),r.a.createElement(c.b,{path:"/admin/sites/:siteId/users",component:Ye}))))}var Ke=a("7sEd"),Qe=a.n(Ke);function et({children:e}){const t=Object(s.Ib)();return Object(l.useEffect)(()=>{t.clearUserOptions("panels")},[]),r.a.createElement(s.W,{position:"fixed",type:"content",className:Qe.a.layout},r.a.createElement(s.s,{name:"sites",url:"/api/me/sites"},t=>r.a.createElement(ye,{sites:t},0===t.length&&r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/admin",component:Je}),r.a.createElement(c.b,null,r.a.createElement(s.J,null,"No sites found"))),t.length>0&&e)))}function tt({children:e}){const t=Object(c.i)(),a=H();return t.siteId!==a.site.id?r.a.createElement(s.J,null,"No site found"):null!=e?e:null}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function nt({path:e,...t}){return r.a.createElement(c.b,{path:e},r.a.createElement(tt,null,r.a.createElement(c.b,at({path:e},t))))}function lt({feature:e,off:t=!1,allowAdmin:a=!1,showMessage:n=!1,children:l}){const o=H(),i=a&&"true"===s.pb.get("admin");return(t?!o.site.features[e]||i:o.site.features[e]||i)?null!=l?l:null:n?r.a.createElement(s.H,{icon:"error"},"This site does not have this page enabled"):null}var rt=a("3zYr"),ot=a.n(rt);function it({siteId:e}){const t=Object(s.vb)(),a=Object(s.tb)(),n=Object(s.Ib)(),o=Object(l.useRef)(),[i,c]=Object(l.useState)(""),[d,m]=Object(l.useState)(!1);return r.a.createElement(s.W,{type:"content",className:ot.a.insightSearch},r.a.createElement("div",null,d&&r.a.createElement(s.W,{padding:"medium",className:ot.a.header},r.a.createElement(s.E,{ref:o,icon:"search",debounce:!0,value:i,onChange:c}),r.a.createElement(s.j,{onMount:()=>o.current.focus()}))),r.a.createElement(s.Z,{url:`/api/sites/${e}/insights?tab=open`,notFound:"No insights found",defaultSort:[["priority","occurredDate"],["asc","desc"]],filter:e=>e.filter(e=>e.sequenceNumber.toLowerCase().includes(i.toLowerCase())||e.name.toLowerCase().includes(i.toLowerCase())||e.type.toLowerCase().includes(i.toLowerCase())||e.sequenceNumber.toLowerCase().includes(i.toLowerCase())||a(e.occurredDate).format("dateTime").toLowerCase().includes(i.toLowerCase())),onResponse:()=>m(!0)},a=>r.a.createElement(s.e,null,a.map(a=>r.a.createElement(s.U,{key:a.id,rowColor:`var(--priority${a.priority})`,onClick:()=>function(a){var l,r;n.saveUserOptions("insight",{id:a.id,siteId:e,sequenceNumber:a.sequenceNumber,screenshots:null!==(l=null===(r=n.options.insight)||void 0===r?void 0:r.screenshots)&&void 0!==l?l:[]}),t.close()}(a)},r.a.createElement(s.h,{width:120},a.sequenceNumber),r.a.createElement(s.h,null,""!==a.name&&r.a.createElement(s.db,{type:"label"},a.name,": "),r.a.createElement(s.db,{type:"value"},a.type)),r.a.createElement(s.h,{type:"fill",width:70},""!==a.floorCode&&r.a.createElement(s.Q,null,a.floorCode)),r.a.createElement(s.h,{width:130},r.a.createElement(s.gb,{value:a.occurredDate})))))))}var ct=a("A5co"),st=a.n(ct);function dt({targetRef:e,siteId:t}){return r.a.createElement(s.n,{showIcon:!1,className:st.a.addInsightDropdown},r.a.createElement(s.W,{horizontal:!0,align:"middle",size:"small"},r.a.createElement("span",null,"Add insight"),r.a.createElement(s.C,{icon:"add",size:"small"})),r.a.createElement(s.p,{targetRef:e,position:"right",useMinWidth:!0},r.a.createElement(it,{siteId:t})))}var mt=a("ts07"),ut=a.n(mt),pt=Object(l.forwardRef)((function(e,t){const a=Object(s.Hb)(),[n,o]=Object(l.useState)(!1);return Object(l.useImperativeHandle)(t,()=>({flash(){o(!0),a.setTimeout(()=>{o(!1)},1e3)}})),n?r.a.createElement("div",{className:ut.a.flash},r.a.createElement(s.C,{icon:"camera",className:ut.a.camera})):null})),Et=a("tDnN"),ht=a.n(Et);function ft({insight:e}){const t=Object(s.Hb)(),a=Object(s.Ib)(),n=Object(l.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.f,{icon:"camera",className:ht.a.captureButton,onClick:async function(){try{const l=await navigator.mediaDevices.getDisplayMedia();await t.sleep(2e3);const r=await function(e,t){return new Promise((a,n)=>{const l=document.createElement("video");l.onloadedmetadata=()=>{l.play(),l.pause(),t();const n=document.createElement("canvas");n.width=l.videoWidth,n.height=l.videoHeight;n.getContext("2d").drawImage(l,0,0,l.videoWidth,l.videoHeight),e.getTracks().forEach(e=>{e.stop()});const r=n.toDataURL("image/png");a(r)},l.onerror=e=>{n(e)},l.srcObject=e})}(l,n.current.flash);a.saveUserOptions("insight",{...e,screenshots:[...e.screenshots,r]})}catch(e){}}},"Capture"),r.a.createElement(pt,{ref:n}))}var gt=a("IsSF"),bt=a.n(gt);function yt({insight:e,onCloseClick:t}){return r.a.createElement(s.W,{horizontal:!0,align:"middle",className:bt.a.insight,padding:"0 0 0 medium"},r.a.createElement(s.G,{to:`/dashboard/sites/${e.siteId}/insights/${e.id}`},e.sequenceNumber),r.a.createElement(s.f,{icon:"close",iconSize:"tiny",size:"small",onClick:t}))}var vt=a("V/G/"),It=a.n(vt);function wt({siteId:e,insight:t}){const a=Object(s.Ib)(),n=Object(s.vb)();Object(l.useEffect)(()=>{null==t.id&&0===t.screenshots.length&&n.close()},[t]);const o=Ee()({[It.a.hasScreenshots]:t.screenshots.length>0});return r.a.createElement(s.W,{type:"content",overflow:"hidden",className:o},r.a.createElement("div",null,t.screenshots.length>0&&r.a.createElement(s.W,{align:"right",padding:"small",className:It.a.header},r.a.createElement(s.f,{color:"grey",size:"tiny",onClick:function(){a.saveUserOptions("insight",{...t,screenshots:[]})}},"Clear all"))),r.a.createElement(s.W,{className:It.a.content},t.screenshots.map((e,n)=>r.a.createElement(s.W,{key:n,horizontal:!0,type:"header",className:It.a.fileContainer},r.a.createElement(s.W,{padding:"medium"},r.a.createElement(s.u,{name:`screenshot-${n+1}.png`,src:e,className:It.a.file})),r.a.createElement(s.f,{icon:"close",iconSize:"small",onClick:()=>{return e=n,void a.saveUserOptions("insight",{...t,screenshots:t.screenshots.filter((t,a)=>a!==e)});var e}})))),r.a.createElement("div",null,r.a.createElement(s.W,{align:"center",padding:"medium",className:It.a.footer},r.a.createElement(s.f,{color:"blue",size:"small",width:"medium",to:null!=(null==t?void 0:t.id)&&t.siteId===e?`/dashboard/sites/${t.siteId}/tickets/new?insightId=${t.id}`:`/dashboard/sites/${e}/tickets/new?copy-screenshots=true`,onClick:function(){n.close()}},"Create ticket"))))}var Ot=a("PBtA"),kt=a.n(Ot);function Ct({targetRef:e,siteId:t,insight:a}){const n=null==a.id&&0===a.screenshots.length,l=Ee()(kt.a.dropdownIcon,{[kt.a.isDisabled]:n});return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.n,{className:kt.a.dropdown,disabled:n,dropdownIconClassName:l},r.a.createElement(s.p,{targetRef:e,position:"right",useMinWidth:!0,contentClassName:kt.a.content},r.a.createElement(wt,{siteId:t,insight:a}))),a.screenshots.length>0&&r.a.createElement(s.c,null,a.screenshots.length))}var jt=a("TvBC"),Nt=a.n(jt);function xt({siteId:e}){var t;const a=Object(s.Ib)(),n=Object(l.useRef)();let o=null!==(t=a.options.insight)&&void 0!==t?t:{};o={screenshots:[],...o};const i=null!=o.id&&o.siteId===e;return r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(lt,{feature:"isInsightsDisabled",off:!0},r.a.createElement(s.W,{ref:n,horizontal:!0,className:Nt.a.investigatedInsight},r.a.createElement(ft,{insight:o}),i&&r.a.createElement(yt,{insight:o,onCloseClick:function(){a.clearUserOptions("insight")}}),!i&&r.a.createElement(dt,{targetRef:n,siteId:e}),r.a.createElement(Ct,{targetRef:n,siteId:e,insight:o}))))}var Mt=a("eRg1"),zt=a.n(Mt);function At({value:e,to:t,onChange:a}){const n=H(),l=null!=e?e:n.site;return r.a.createElement(s.V,{value:l,header:e=>e.name,unselectable:!1,className:zt.a.sitesSelect},n.sites.map(e=>{const l=M.a.isFunction(t)?t(e):t;return r.a.createElement(s.M,{key:e.id,value:e,to:l,onClick:()=>function(e){n.selectSite(e),null==a||a(e)}(e)},e.name)}))}function St({isReadOnly:e}){const t=Object(c.h)(),a=Object(c.i)(),n=H(),l=t.pathname.includes("/tickets"),o=t.pathname.includes("/insights");return r.a.createElement(be,null,r.a.createElement(At,{to:t=>{let a="";l&&(a="/tickets"),o&&(a="/insights");const n=e?"":"?admin=true";return`/dashboard/sites/${t.id}${a}${n}`}}),r.a.createElement(s.W,{height:"100%"},r.a.createElement(s.ab,{type:"primary"},r.a.createElement(s.X,{header:"Dashboard",to:"/dashboard/sites/"+a.siteId,exclude:["/tickets","/insights"]}),r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.X,{header:"Tickets",to:`/dashboard/sites/${a.siteId}/tickets`})),r.a.createElement(lt,{feature:"isInsightsDisabled",off:!0},r.a.createElement(s.X,{header:"Insights",to:`/dashboard/sites/${a.siteId}/insights`})))),r.a.createElement(xt,{siteId:n.site.id}),!l&&!o&&"admin"===n.site.userRole&&r.a.createElement(s.g,null,r.a.createElement(s.f,{size:"tiny",color:e?"grey":"greyLight",selected:!e,to:t.pathname+"?admin=true"},"Admin"),r.a.createElement(s.f,{size:"tiny",color:e?"greyLight":"grey",selected:e,to:""+t.pathname},"User")))}var qt=a("ndMx"),Wt=a.n(qt);function Lt({insight:e,onInvestigateClick:t}){var a;const n=Object(c.i)(),o=Object(s.Gb)(),i=Object(s.Ib)(),d=Object(s.rb)(),[m,u]=Object(l.useState)(!1),p=Ee()(Wt.a.investigate,{[Wt.a.isSelected]:(null===(a=i.options.insight)||void 0===a?void 0:a.id)===e.id});return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.f,{color:"grey",size:"tiny",className:p,loading:m,onClick:()=>async function(){var a,l,r;if(e.id===(null===(a=i.options.insight)||void 0===a?void 0:a.id))i.clearUserOptions("insight");else if(i.saveUserOptions("insight",{id:e.id,siteId:n.siteId,sequenceNumber:e.sequenceNumber,screenshots:null!==(l=null===(r=i.options.insight)||void 0===r?void 0:r.screenshots)&&void 0!==l?l:[]}),null!=t)try{u(!0);const a=await d.get(`/api/sites/${n.siteId}/insights/${e.id}`);t({...e,floorId:a.floorId})}catch(e){o.show("An error has occurred loading insight detail"),u(!1)}}()},"Investigate"),m&&r.a.createElement(s.d,null))}var Dt=a("GAjP"),Zt=a("+U72"),Pt=a("46oU"),_t=a.n(Pt);function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Tt({showStatus:e=!0,isInsightIdSelected:t,onInsightClick:a,onInsightIdClick:n,onInvestigateClick:l,...o}){const i=Object(c.i)();return r.a.createElement(s.Z,Rt({notFound:"No insights found",defaultSort:[["priority","occurredDate"],["asc","desc"]]},o),o=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,null!=n&&r.a.createElement(s.h,{sort:"priority",width:50}),r.a.createElement(s.h,{sort:"sequenceNumber",width:150},"Id"),r.a.createElement(s.h,{sort:"priority",width:90},"Priority"),e&&r.a.createElement(s.h,{sort:"status",width:120},"Status"),r.a.createElement(s.h,{sort:"name"},"Summary"),r.a.createElement(s.h,{sort:"type",width:140},"Type"),r.a.createElement(s.h,{sort:"occurredDate",width:140},"Occurred"),e&&r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.h,{width:120})))),r.a.createElement(s.e,null,o.map(o=>{var c,d,m,u;return r.a.createElement(s.U,{key:o.id,selected:o.id===i.insightId,to:`/dashboard/sites/${i.siteId}/insights/${o.id}`,rowColor:`var(--priority${o.priority})`,onClick:e=>function(e,t){null!=a&&(e.preventDefault(),a(t))}(e,o)},null!=n&&r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.W,null,r.a.createElement(s.i,{tabIndex:-1,value:t(o.id),className:Ee()({[_t.a.hidden]:"open"!==o.status}),onChange:()=>n(o.id),onClick:e=>{e.stopPropagation()}}))),r.a.createElement(s.h,null,o.sequenceNumber),r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.Q,null,null!==(c=null===(d=Dt.find(e=>e.id===o.priority))||void 0===d?void 0:d.name)&&void 0!==c?c:"-")),e&&r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.Q,null,null!==(m=null===(u=Zt.find(e=>e.id===o.status))||void 0===u?void 0:u.name)&&void 0!==m?m:"-")),r.a.createElement(s.h,null,o.name),r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.Q,null,M.a.startCase(o.type))),r.a.createElement(s.h,null,r.a.createElement(s.gb,{value:o.occurredDate})),e&&r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.h,null,("open"===o.status||"inProgress"===o.status)&&r.a.createElement(Lt,{insight:o,onInvestigateClick:l}))))}))))}function Ft(){const e=Object(c.g)(),t=Object(c.i)(),a=Object(s.rb)(),n=Object(s.yb)(),[o,i]=Object(l.useState)([]),[d,m]=Object(l.useState)("open"),[u,p]=Object(l.useState)("");return r.a.createElement(s.W,{type:"content",padding:"medium"},r.a.createElement(s.ab,{type:"header"},r.a.createElement(s.X,{header:"Open",selected:"open"===d,onClick:()=>m("open")}),r.a.createElement(s.X,{header:"Acknowledged",selected:"acknowledged"===d,onClick:()=>m("acknowledged")}),r.a.createElement(s.X,{header:"Closed",selected:"closed"===d,onClick:()=>m("closed")}),r.a.createElement(s.W,{width:"100%"},r.a.createElement(s.E,{icon:"search",inputType:"search",debounce:!0,placeholder:"Search",value:u,onChange:p}))),r.a.createElement(s.bb,{type:"content"},"open"===d&&r.a.createElement(s.B,null,r.a.createElement(s.z,{onSubmit:function(){return a.post(`/api/sites/${t.siteId}/insights/status`,{ids:o,status:"acknowledged"})},onSubmitted:function(e){i([]),n("insights"),e.reset()}},r.a.createElement(s.f,{type:"submit",color:"grey",width:"medium",disabled:0===o.length},"Acknowledge"))),r.a.createElement(Tt,{name:"insights",url:`/api/sites/${t.siteId}/insights`,params:{tab:d},filter:e=>e.filter(e=>e.sequenceNumber.toLowerCase().includes(u.toLowerCase())||e.name.toLowerCase().includes(u.toLowerCase())),showStatus:"open"===d,isInsightIdSelected:e=>o.includes(e),onInsightIdClick:"open"===d?function(e){i(t=>M.a.xor(t,[e]))}:void 0,onInvestigateClick:function(a){let n="/dashboard/sites/"+t.siteId;null!=a.floorId&&(n=`/dashboard/sites/${t.siteId}/floors/${a.floorId}`,null!=a.equipmentId&&(n+="?equipmentId="+a.equipmentId)),e.push(n)}})))}var Gt=a("ac+n");function $t({insight:e}){var t,a;const n=Object(c.i)(),l=Object(s.rb)(),o=Object(s.yb)(),i=Object(s.Ib)();let d="/dashboard/sites/"+n.siteId;var m,u;null!=e.floorId&&(d=`/dashboard/sites/${n.siteId}/floors/${e.floorId}`,null!=(null===(m=e.equipment)||void 0===m?void 0:m.id)&&(d+="?equipmentId="+(null===(u=e.equipment)||void 0===u?void 0:u.id)));return r.a.createElement(s.W,{type:"content"},("open"===e.status||"inProgress"===e.status)&&r.a.createElement(s.B,{type:"content"},r.a.createElement("div",null,"open"===e.status&&r.a.createElement(s.z,{onSubmit:function(){return l.post(`/api/sites/${n.siteId}/insights/status`,{ids:[e.id],status:"acknowledged"})},onSubmitted:function(){o("insight")}},r.a.createElement(s.f,{type:"submit",color:"grey",width:"medium"},"Acknowledge"))),r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.W,{horizontal:!0,align:"right",size:"medium"},r.a.createElement(s.f,{color:"blue",width:"medium",to:d,onClick:function(){var t,a;i.saveUserOptions("insight",{id:e.id,siteId:n.siteId,sequenceNumber:e.sequenceNumber,screenshots:null!==(t=null===(a=i.options.insight)||void 0===a?void 0:a.screenshots)&&void 0!==t?t:[]})}},"Investigate"),r.a.createElement(s.f,{color:"blue",width:"medium",to:`/dashboard/sites/${n.siteId}/tickets/new?insightId=${e.id}`},"Create ticket")))),r.a.createElement("div",null,r.a.createElement(s.W,{width:"page",size:"large",padding:"large"},r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",overflow:"hidden"},r.a.createElement("span",null,r.a.createElement(s.db,{type:"label"},"Insight Id: "),r.a.createElement(s.db,{type:"value"},e.sequenceNumber)),r.a.createElement("span",null,r.a.createElement(s.db,{type:"label"},"Created: "),r.a.createElement(s.db,{type:"value"},r.a.createElement(s.gb,{value:e.createdDate})))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Insight Details",header:"Detailed information to assist with pro-active investigations of potential faults and issues"},r.a.createElement(s.fb,{label:"Insight type"},e.type),r.a.createElement(s.fb,{label:"Summary"},e.name),r.a.createElement(s.fb,{type:"textarea",label:"Description"},e.description)),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Priority & Status",header:"The advised priority for the insight and current status"},r.a.createElement(s.fb,{label:"Priority"},null===(t=Dt.find(t=>t.id===e.priority))||void 0===t?void 0:t.name),r.a.createElement(s.fb,{label:"Status"},null===(a=Zt.find(t=>t.id===e.status))||void 0===a?void 0:a.name)),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Dates",header:"Shows the dates in relation to the insight"},r.a.createElement(s.fb,{label:"Created date"},r.a.createElement(s.gb,{value:e.createdDate})),r.a.createElement(s.fb,{label:"Updated date"},r.a.createElement(s.gb,{value:e.updatedDate})),r.a.createElement(s.fb,{label:"Occurred date"},r.a.createElement(s.gb,{value:e.occurredDate})),r.a.createElement(s.fb,{label:"Detected date"},r.a.createElement(s.gb,{value:e.detectedDate}))),r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},e.tickets.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Tickets",header:"This insight is linked to ticket(s)"},e.tickets.map(e=>{var t,a;return r.a.createElement(s.fb,{key:e.id},r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",size:"medium",overflow:"hidden"},r.a.createElement(s.W,{align:"left"},r.a.createElement(s.G,{to:`/dashboard/sites/${n.siteId}/tickets/${e.id}`},e.sequenceNumber)),r.a.createElement(s.Q,null,null!==(t=null===(a=Gt.find(t=>t.id===e.status))||void 0===a?void 0:a.name)&&void 0!==t?t:"-")))})))),null!=e.equipment&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Assets",header:"Shows the asset this particular insight is related to"},r.a.createElement(s.fb,{label:"Equipment Name"},e.equipment.name))))))}function Ut(){const e=Object(c.i)();return r.a.createElement(s.W,{type:"header",padding:"medium"},r.a.createElement(s.ab,null,r.a.createElement(s.Y,null),r.a.createElement(s.X,{header:"Insight"},r.a.createElement(s.s,{name:"insight",url:[`/api/sites/${e.siteId}/insights/${e.insightId}`,`/api/sites/${e.siteId}/insights/${e.insightId}/tickets`]},([e,t])=>r.a.createElement($t,{insight:{...e,tickets:t}})))))}function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Xt({showStatus:e=!0,onTicketClick:t,...a}){const n=Object(c.i)();return r.a.createElement(s.Z,Bt({notFound:"No tickets found",defaultSort:[["priority","createdDate"],["asc","desc"]]},a),a=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,{sort:"priority",width:24}),r.a.createElement(s.h,{sort:"sequenceNumber",width:150},"Id"),r.a.createElement(s.h,{sort:"priority",width:90},"Priority"),e&&r.a.createElement(s.h,{sort:"status",width:160},"Status"),r.a.createElement(s.h,{sort:"summary"},"Summary"),r.a.createElement(s.h,{sort:"reporterName",width:50},"By"),r.a.createElement(s.h,{sort:"createdDate",width:140},"Created"))),r.a.createElement(s.e,null,a.map(a=>{var l,o,i,c,d;return r.a.createElement(s.U,{key:a.id,selected:a.id===n.ticketId,to:`/dashboard/sites/${n.siteId}/tickets/${a.id}`,rowColor:`var(--priority${a.priority})`,onClick:e=>function(e,a){null!=t&&(e.preventDefault(),t(a))}(e,a)},r.a.createElement(s.h,null),r.a.createElement(s.h,null,a.sequenceNumber),r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.Q,null,null!==(l=null===(o=Dt.find(e=>e.id===a.priority))||void 0===o?void 0:o.name)&&void 0!==l?l:"-")),e&&r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.Q,null,null!==(i=null===(c=Gt.find(e=>e.id===a.status))||void 0===c?void 0:c.name)&&void 0!==i?i:"-")),r.a.createElement(s.h,null,a.summary),r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.kb,{user:{firstName:a.reporterName.split(" ")[0],lastName:null!==(d=a.reporterName.split(" ").slice(1).slice(-1)[0])&&void 0!==d?d:""}})),r.a.createElement(s.h,null,r.a.createElement(s.gb,{value:a.createdDate})))}))))}function Vt(){const e=Object(c.i)(),[t,a]=Object(l.useState)("open"),[n,o]=Object(l.useState)("");return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.W,{type:"content",padding:"medium"},r.a.createElement(s.ab,{type:"header"},r.a.createElement(s.X,{header:"Open",selected:"open"===t,onClick:()=>a("open")}),r.a.createElement(s.X,{header:"Resolved",selected:"resolved"===t,onClick:()=>a("resolved")}),r.a.createElement(s.X,{header:"Closed",selected:"closed"===t,onClick:()=>a("closed")}),r.a.createElement(s.W,{width:"100%"},r.a.createElement(s.E,{icon:"search",inputType:"search",debounce:!0,placeholder:"Search",value:n,onChange:o}))),r.a.createElement(s.bb,{type:"content"},r.a.createElement(s.B,{align:"right"},r.a.createElement(s.f,{color:"blue",width:"medium",to:`/dashboard/sites/${e.siteId}/tickets/new`},"New ticket")),r.a.createElement(Xt,{url:`/api/sites/${e.siteId}/tickets`,params:{tab:t},showStatus:"open"===t,filter:e=>e.filter(e=>e.sequenceNumber.toLowerCase().includes(n.toLowerCase())||e.summary.toLowerCase().includes(n.toLowerCase()))}))))}function Ht({children:e}){const t=Object(s.Gb)(),a=Object(s.Ib)(),[n,o]=Object(l.useState)();return Object(l.useEffect)(()=>{!async function(){try{var e,n;const t=null!==(e=null===(n=a.options.insight)||void 0===n?void 0:n.screenshots)&&void 0!==e?e:[],l=await Promise.all(t.map((e,t)=>async function(e,t){const a=await window.fetch(e),n=await a.blob();return new File([n],`screenshot-${t+1}.png`)}(e,t)));o(l)}catch(e){t.show("Error copying screenshots into ticket."),o([])}}()},[]),null==n?r.a.createElement(s.S,null):e(n)}var Yt=a("89lp"),Jt=a.n(Yt);function Kt(){var e;const t=Object(c.i)(),a=Object(s.rb)(),n=Object(s.yb)(),o=Object(s.Ib)(),i=Object(s.Gb)(),d=Object(s.zb)(),[m,u]=Object(l.useState)(!1),[p,E]=Object(l.useState)(!1);return r.a.createElement(s.t,{legend:`Comments (${d.data.comments.length})`},!d.readOnly&&r.a.createElement(s.W,{size:"medium",padding:"0 0 medium 0"},r.a.createElement(s.eb,{name:"comment",label:"Add comment"}),r.a.createElement(s.f,{color:"blue",width:"large",disabled:!(null===(e=d.data.comment)||void 0===e?void 0:e.length),loading:m,onClick:async function(){try{u(!0),await a.post(`/api/sites/${t.siteId}/tickets/${t.ticketId}/comments`,{text:d.data.comment}),n("ticket")}catch(e){u(!1),i.show("An error has occurred")}}},"Add")),d.data.comments.length>0&&r.a.createElement(s.W,{size:"medium"},d.data.comments.map(e=>{const c=e.creator.id===o.id;return r.a.createElement(l.Fragment,{key:e.id},!d.readOnly&&r.a.createElement("hr",null),r.a.createElement(s.W,{size:"medium"},r.a.createElement(s.W,{horizontal:!0,type:"header",overflow:"hidden",align:"middle"},r.a.createElement(s.W,{horizontal:!0,align:"middle",size:"medium"},r.a.createElement(s.kb,{user:e.creator}),r.a.createElement(s.db,null,e.creator.firstName," ",e.creator.lastName)),r.a.createElement(s.db,null,r.a.createElement(s.gb,{value:e.createdDate}))),r.a.createElement("div",{className:Jt.a.text},e.text),!d.readOnly&&c&&r.a.createElement(s.W,{align:"right"},r.a.createElement(s.f,{icon:"trash",iconSize:"small",size:"tiny",onClick:()=>async function(e){try{E(!0),await a.delete(`/api/sites/${t.siteId}/tickets/${t.ticketId}/comments/${e}`),n("ticket")}catch(e){E(!1),i.show("An error has occurred")}}(e.id)}))))})),(m||p)&&r.a.createElement(s.d,null))}function Qt({ticket:e}){const t=Object(c.g)(),a=Object(c.i)(),n=Object(s.rb)(),o=Object(s.tb)(),i=Object(s.yb)(),d=Object(s.Ib)(),[m]=Object(l.useState)(()=>o.now().startOfDay().format()),u="new"===a.ticketId;return r.a.createElement(s.z,{defaultValue:e,readOnly:"closed"===e.status,onSubmit:function(e){var t,l,r,o;return u?n.post(`/api/sites/${a.siteId}/tickets`,{reporterId:e.data.reporterId,reporterName:e.data.reporterName,reporterPhone:e.data.reporterPhone,reporterEmail:e.data.reporterEmail,reporterCompany:e.data.reporterCompany,summary:e.data.summary,description:e.data.description,floorCode:e.data.floorCode,attachmentFiles:e.data.attachments,issueId:e.data.issueId,issueType:e.data.issueType,insightId:e.data.insightId,assigneeId:null===(t=e.data.assignee)||void 0===t?void 0:t.id,assigneeType:null===(l=e.data.assignee)||void 0===l?void 0:l.type,priority:e.data.priority,dueDate:e.data.dueDate},{headers:{"Content-Type":"multipart/form-data"}}):n.put(`/api/sites/${a.siteId}/tickets/${e.data.id}`,{reporterId:e.data.reporterId,reporterName:e.data.reporterName,reporterPhone:e.data.reporterPhone,reporterEmail:e.data.reporterEmail,reporterCompany:e.data.reporterCompany,status:e.data.status,cause:e.data.cause,solution:e.data.solution,summary:e.data.summary,description:e.data.description,floorCode:e.data.floorCode,attachmentIds:e.data.attachments.map(e=>e.id).filter(e=>null!=e),newAttachmentFiles:e.data.attachments.filter(e=>e instanceof File),issueId:e.data.issueId,issueType:e.data.issueType,assigneeId:null===(r=e.data.assignee)||void 0===r?void 0:r.id,assigneeType:null===(o=e.data.assignee)||void 0===o?void 0:o.type,priority:e.data.priority,dueDate:e.data.dueDate},{headers:{"Content-Type":"multipart/form-data"}})},onSubmitted:function(e){var n;u?(null!=e.data.insightId&&e.data.insightId===(null===(n=d.options.insight)||void 0===n?void 0:n.id)&&d.clearUserOptions("insight"),t.replace(`/dashboard/sites/${a.siteId}/tickets/${e.response.id}`)):i("ticket")}},t=>r.a.createElement(s.W,{type:"content"},r.a.createElement(s.B,{type:"content",size:"medium"},r.a.createElement(s.f,{color:"grey",width:"medium",to:`/dashboard/sites/${a.siteId}/tickets`},"Cancel"),"closed"!==e.status&&r.a.createElement(s.W,{align:"right"},r.a.createElement(s.f,{type:"submit",color:"blue",width:"medium"},"Save ticket"))),r.a.createElement("div",null,r.a.createElement(s.W,{width:"page",size:"large",padding:"large"},!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",overflow:"hidden"},r.a.createElement("span",null,r.a.createElement(s.db,{type:"label"},"Ticket Id: "),r.a.createElement(s.db,{type:"value"},t.data.sequenceNumber)),r.a.createElement("span",null,r.a.createElement(s.db,{type:"label"},"Created: "),r.a.createElement(s.db,{type:"value"},r.a.createElement(s.gb,{value:t.data.createdDate})))),r.a.createElement("hr",null)),r.a.createElement(s.t,{legend:"Ticket Details",header:"Provide information related to the issue found"},r.a.createElement(s.E,{errorName:"reporterName",label:"Requestor",icon:null==t.data.reporterId?"search":"ok",url:`/api/sites/${a.siteId}/reporters`,notFound:"No requestors found",closeOnEmpty:!1,required:!0,value:t.data.reporterName,onChange:e=>{t.setData({reporterId:void 0,reporterName:e})},onOptionSelect:e=>{t.setData({reporterId:e.id,reporterName:e.name,reporterPhone:e.phone,reporterEmail:e.email,reporterCompany:e.company})}},e=>e.map(e=>r.a.createElement(s.F,{key:e.id,value:e},e.name))),r.a.createElement(s.E,{name:"reporterPhone",label:"Contact number",required:!0}),r.a.createElement(s.E,{type:"email",name:"reporterEmail",label:"Contact email",required:!0}),r.a.createElement(s.E,{name:"reporterCompany",label:"Company"}),r.a.createElement(s.V,{name:"status",label:"Status",disabled:u,onChange:()=>{""===e.cause&&t.setData({cause:"",solution:""})}},Gt.map(e=>r.a.createElement(s.M,{key:e.id,value:e.id},e.name))),r.a.createElement(s.E,{name:"summary",label:"Summary",required:!0}),r.a.createElement(s.eb,{name:"description",label:"Description",required:!0})),(["limitedAvailability","resolved","closed"].includes(t.data.status)||""!==e.cause)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Solution details",header:"Details for the root cause and fix"},r.a.createElement(s.E,{name:"cause",label:"Cause",required:!0}),r.a.createElement(s.eb,{name:"solution",label:"Solution",required:!0}),null!=t.data.resolvedDate&&r.a.createElement(s.fb,{label:"Resolved"},r.a.createElement(s.gb,{value:t.data.resolvedDate})))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Attachments and Screenshots",header:"Upload any information that can help with understanding and fixing the issue"},r.a.createElement(s.v,{errorName:u?"attachmentFiles":"attachmentIds",icon:"attachment",value:t.data.attachments.map(e=>e instanceof File?e:{...e,name:e.fileName}),onChange:e=>t.setData({attachments:e})},"Attach a document or image")),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Location and Asset Tags",header:"Provide the location for the issue and the asset it is related to (if known)"},r.a.createElement(s.V,{name:"floorCode",label:"Floor",url:`/api/sites/${a.siteId}/floors`,cache:!0,notFound:"No floors found",header:e=>e,onChange:e=>{t.setData({floorCode:null!=e?e:"",issueId:null,issueType:null,issueName:null})}},e=>e.map(e=>r.a.createElement(s.M,{key:e.id,value:e.code},e.code))),r.a.createElement(s.E,{errorName:"issueId",label:"Asset",icon:null==t.data.issueId?"search":"ok",notFound:"No assets found",disabled:""===t.data.floorCode,url:e=>e.length>0?`/api/sites/${a.siteId}/possibleTicketIssues`:void 0,params:e=>({floorCode:t.data.floorCode,keyword:e}),value:t.data.issueName,onChange:()=>{t.setData({issueId:null,issueType:null,issueName:null})},onOptionSelect:e=>{t.setData({issueId:e.id,issueType:e.type,issueName:e.name})}},e=>r.a.createElement(r.a.Fragment,null,null==e?void 0:e.map(e=>r.a.createElement(s.F,{key:e.id,value:e},e.name)),null==e&&r.a.createElement(s.J,null,"No assets found")))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Assign To",header:"Allocate this ticket to an assignee to start work"},r.a.createElement(s.V,{name:"assignee",errorName:"assigneeId",label:"Assignee",placeholder:"Unassigned",url:`/api/sites/${a.siteId}/possibleTicketAssignees`,header:e=>`${e.firstName} ${e.lastName}`},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.M,{value:null},"Unassigned"),r.a.createElement("hr",null),e.map(e=>r.a.createElement(s.M,{key:e.id,value:e},e.firstName," ",e.lastName)),0===e.length&&r.a.createElement(s.J,null,"No assignees found")))),r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Prioritisation and Dates",header:"Indicate the priority for this ticket and the due date (if any)"},r.a.createElement(s.V,{name:"priority",label:"Priority",required:!0},Dt.map(e=>r.a.createElement(s.M,{key:e.id,value:e.id},e.name))),r.a.createElement(s.k,{name:"dueDate",label:"Due date",min:m,position:"top"})),r.a.createElement(lt,{feature:"isInsightsDisabled",off:!0},null!=t.data.insightId&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(s.t,{legend:"Insight",header:"This ticket is linked to an insight"},r.a.createElement(s.fb,{label:"Id"},r.a.createElement(s.G,{to:`/dashboard/sites/${a.siteId}/insights/${t.data.insightId}`},t.data.insightName))))),!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(Kt,null))))))}function ea(){const e=Object(c.i)(),t=Object(s.Ib)(),a="new"===e.ticketId,n=a?"New Ticket":"Ticket",l=s.pb.get("insightId"),o=s.pb.get("copy-screenshots");return r.a.createElement(s.W,{type:"header",padding:"medium"},r.a.createElement(s.ab,null,r.a.createElement(s.Y,null),r.a.createElement(s.X,{header:n},a&&r.a.createElement(s.s,{name:"ticket",url:l?`/api/sites/${e.siteId}/insights/${l}`:void 0},e=>"acknowledged"===(null==e?void 0:e.status)||"closed"===(null==e?void 0:e.status)?r.a.createElement(s.J,null,'The insight "',e.sequenceNumber,'" is no longer available'):null==e?r.a.createElement(Ht,null,e=>r.a.createElement(Qt,{ticket:{reporterName:"",status:"open",cause:"",solution:"",floorCode:"",attachments:o?e:[]}})):r.a.createElement(Ht,null,a=>r.a.createElement(Qt,{ticket:{reporterId:t.id,reporterName:`${t.firstName} ${t.lastName}`,reporterPhone:t.mobile,reporterEmail:t.email,status:"open",summary:e.name,description:e.description,cause:"",solution:"",floorCode:e.floorCode,insightId:e.id,insightName:e.sequenceNumber,attachments:a}}))),!a&&r.a.createElement(s.s,{name:"ticket",url:`/api/sites/${e.siteId}/tickets/${e.ticketId}`},e=>r.a.createElement(Qt,{ticket:e})))))}const ta=Object(l.createContext)();function aa(){return Object(l.useContext)(ta)}var na=a("KFx7"),la=a.n(na);function ra({children:e}){const t=Object(l.useRef)();return r.a.createElement(s.W,{type:"content"},r.a.createElement(s.f,{icon:"chevron",className:la.a.up,onClick:function(){t.current.scrollTo({top:t.current.scrollTop-100,left:0,behavior:"smooth"})}}),r.a.createElement("div",{ref:t,className:la.a.content},e),r.a.createElement(s.f,{icon:"chevron",className:la.a.down,onClick:function(){t.current.scrollTo({top:t.current.scrollTop+100,left:0,behavior:"smooth"})}}))}var oa=a("StKd"),ia=a.n(oa);function ca({floors:e}){const t=Object(c.g)(),a=Object(c.i)(),n=H(),l=aa(),o=!n.site.features.is2DViewerDisabled||"true"===s.pb.get("admin");return r.a.createElement(s.W,{type:"content"},r.a.createElement("div",null,null!=a.floorId&&r.a.createElement(s.W,{padding:"medium 0 0"},r.a.createElement(s.Y,{to:"/dashboard/sites/"+a.siteId,className:ia.a.backButton}))),r.a.createElement(ra,null,r.a.createElement(s.W,{align:"center",padding:"tiny 0",className:ia.a.floorSelector},r.a.createElement(s.W,{size:"tiny"},e.map(e=>{let n;l.isReadOnly&&(1===e.insightsHighestPriority&&(n="red"),2===e.insightsHighestPriority&&(n="orange"),3===e.insightsHighestPriority&&(n="yellow"));const i=e.id===a.floorId,c=e.id===l.hoverFloorId,d=Ee()({[ia.a.isDisabled]:!o});return r.a.createElement(s.Q,{key:e.id,color:n,selected:i,hovering:c,to:`/dashboard/sites/${a.siteId}/floors/${e.id}${l.isReadOnly?"":"?admin=true"}`,className:d,onClick:n=>function(e,n){e.preventDefault(),o&&(a.floorId===n?t.push(`/dashboard/sites/${a.siteId}${l.isReadOnly?"":"?admin=true"}`):t.push(`/dashboard/sites/${a.siteId}/floors/${n}${l.isReadOnly?"":"?admin=true"}`))}(n,e.id),onPointerEnter:()=>l.setHoverFloorId(e.id),onPointerLeave:()=>l.setHoverFloorId(),onFocus:()=>l.setHoverFloorId(e.id),onBlur:()=>l.setHoverFloorId()},e.code)}),0===e.length&&r.a.createElement(s.W,{align:"center",padding:"small"},"-")))))}class sa extends r.a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){const{children:e}=this.props,{hasError:t}=this.state;return t?r.a.createElement(s.H,{icon:"error"},"An error has occurred"):e}}var da=a("qkpj"),ma=a("i8eK"),ua=a("4qIH");function pa(){const{gl:e,camera:t}=Object(da.d)(),a=Object(l.useRef)();return Object(da.c)(()=>a.current.update()),r.a.createElement("orbitControls",{ref:a,args:[t,e.domElement],screenSpacePanning:!0,enableDamping:!0,minDistance:100,maxDistance:800,mouseButtons:{LEFT:ma.MOUSE.PAN,RIGHT:ma.MOUSE.ROTATE}})}Object(da.b)({OrbitControls:ua.a});var Ea=a("AN3C");function ha({vertices:e,material:t}){return r.a.createElement("mesh",{material:t},r.a.createElement("meshLine",{attach:"geometry",vertices:e}))}function fa({geometry:e,meshMaterial:t,lineMaterial:a,...n}){const o=Object(l.useMemo)(()=>{const t=new ma.Shape;return t.moveTo(...e[0]),e.slice(1).forEach(e=>{t.lineTo(...e)}),t},[e]),i=Object(l.useMemo)(()=>new ma.ExtrudeGeometry(o,{depth:10,bevelEnabled:!1}),[o]),c=Object(l.useMemo)(()=>[e.map(e=>new ma.Vector3(e[0],e[1],0)),e.map(e=>new ma.Vector3(e[0],e[1],10))],[e]);return r.a.createElement("mesh",n,r.a.createElement("mesh",{geometry:i,material:t}),c.map((e,t)=>r.a.createElement(ha,{key:t,vertices:e,material:a})))}Object(da.b)({MeshLine:Ea.MeshLine,MeshLineMaterial:Ea.MeshLineMaterial});var ga=a("EcLt");function ba(){return(ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ya({floor:e,isHovering:t,...a}){let n="text";1===e.insightsHighestPriority&&(n="red"),2===e.insightsHighestPriority&&(n="orange"),3===e.insightsHighestPriority&&(n="yellow"),t&&(n+="Light"),n=ga[n];const o=Object(l.useMemo)(()=>new ma.MeshPhongMaterial({color:n,opacity:t?1:.5,transparent:!t}),[t]),i=Object(l.useMemo)(()=>new Ea.MeshLineMaterial({lineWidth:.15,color:ga.light}),[]);return e.geometry.map((t,n)=>r.a.createElement(fa,ba({key:`${e.id} ${n}`},a,{geometry:t,meshMaterial:o,lineMaterial:i})))}var va=a("qhUf"),Ia=a.n(va);function wa({floor:e}){const t=aa();let a;1===e.insightsHighestPriority&&(a="red"),2===e.insightsHighestPriority&&(a="orange"),3===e.insightsHighestPriority&&(a="yellow"),a=ga[a];const n=Ee()(Ia.a.floorInformation,{[Ia.a.isVisible]:t.hoverFloorId===e.id});return r.a.createElement(s.W,{key:e.id,size:"tiny",padding:"medium",className:n},r.a.createElement(s.db,{type:"label",style:{color:a}},e.code),r.a.createElement(s.db,{type:"h3"},e.name))}var Oa=a("Jfnh"),ka=a.n(Oa);function Ca(e){return e*Math.PI/180}function ja({floors:e}){const t=Object(c.i)(),a=Object(c.g)(),n=H(),o=aa(),i=!n.site.features.is2DViewerDisabled||"true"===s.pb.get("admin"),d=100*e.length,m=Object(l.useMemo)(()=>{let t=180;e.length>10&&(t=300),e.length>30&&(t=500),e.length>60&&(t=700);const a=Ca(-30),n=Ca(-30);return[Math.sin(a)*Math.cos(n)*t,Math.sin(a)*Math.sin(n)*t,Math.cos(a)*t]},[e.length]);return Object(l.useEffect)(()=>()=>{document.body.style.cursor=""},[]),r.a.createElement(s.W,{position:"absolute",className:ka.a.floors},0===e.length&&r.a.createElement(s.J,null,"No floors found"),e.length>0&&r.a.createElement(da.a,{camera:{position:m,fov:60}},r.a.createElement("ambientLight",null),r.a.createElement("pointLight",{position:[d,d,d],intensity:.4}),r.a.createElement("mesh",{position:[0,10*e.length/2,0],rotation:[Math.PI/2,0,0]},e.map((e,n)=>r.a.createElement(ya,{key:e.id,floor:e,position:[0,0,10*n],isHovering:o.hoverFloorId===e.id,onClick:n=>{n.stopPropagation(),i&&a.push(`/dashboard/sites/${t.siteId}/floors/${e.id}`)},onPointerDown:e=>{e.nativeEvent.preventDefault()},onPointerOver:t=>{t.stopPropagation(),i&&(document.body.style.cursor="pointer"),o.setHoverFloorId(e.id)},onPointerMove:t=>{t.stopPropagation(),i&&(document.body.style.cursor="pointer"),o.setHoverFloorId(e.id)},onPointerOut:()=>{o.setHoverFloorId(t=>{if(t!==e.id)return t;document.body.style.cursor=""})}}))),r.a.createElement(pa,null)),e.map(e=>r.a.createElement(wa,{key:e.id,floor:e})))}var Na=a("uez9"),xa=a.n(Na);function Ma({floors:e}){const t=Object(l.useMemo)(()=>function(e){var t;let a=e.map(e=>{let t=[];try{t=JSON.parse(e.geometry),M.a.isArray(t)||(t=[])}catch(e){}return{...e,geometry:t}});a=a.map(e=>({...e,geometry:e.geometry.map(e=>[...e,e[0]])}));const n=(null!==(t=M.a.findLast(a,e=>e.geometry.length>0))&&void 0!==t?t:{geometry:[[[0,0],[100,0],[100,100],[0,100],[0,0]]]}).geometry;a=a.map((e,t)=>t===a.length-1?{...e,geometry:n}:e),a=a.reduceRight((e,t)=>{const a=e.slice(-1)[0];return null==a?[t]:[...e,{...t,geometry:0===t.geometry.length?a.geometry:t.geometry}]},[]).reverse();const l=a.flatMap(e=>e.geometry.flatMap(e=>e.flatMap(e=>e))),r=Math.min(...l),o=Math.max(...l)-r;a=a.map(e=>({...e,geometry:e.geometry.map(e=>e.map(e=>[(e[0]-r)/o*100,(e[1]-r)/o*100]))}));const i=a.flatMap(e=>e.geometry.flatMap(e=>e)),c=i.flatMap(e=>e[0]),s=i.flatMap(e=>e[1]),d=Math.min(...c),m=Math.max(...c),u=Math.min(...s),p=Math.max(...s),E=(m-d)/2,h=(p-u)/2;return a=a.map(e=>({...e,geometry:e.geometry.map(e=>e.map(e=>[e[0]-d-E,e[1]-u-h]))})),a}(e),[e]);return r.a.createElement(sa,null,r.a.createElement("div",{className:xa.a.floors},r.a.createElement(ja,{floors:t})))}function za({floors:e}){const t=Object(c.i)(),a=H(),n=aa(),l=!a.site.features.isTicketingDisabled||!a.site.features.isInsightsDisabled;return n.isReadOnly?r.a.createElement(s.W,{horizontal:!0,type:"equal",height:"100%",size:"medium",padding:"medium"},r.a.createElement(Ma,{floors:e}),l&&r.a.createElement(s.W,{type:"equal",size:"medium",overflow:"auto"},r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"Tickets"},r.a.createElement(s.Z,{url:`/api/sites/${t.siteId}/tickets?tab=open`,notFound:"No tickets found",defaultSort:[["priority","createdDate"],["asc","desc"]]},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,{sort:"sequenceNumber",width:120},"Id"),r.a.createElement(s.h,{sort:e=>{var t;return null!==(t=e.issueName)&&void 0!==t?t:e.description}},"Summary"),r.a.createElement(s.h,{sort:"floorCode",width:70},"Floor"),r.a.createElement(s.h,{sort:"createdDate",width:140},"Created Date"))),r.a.createElement(s.e,null,e.map(e=>r.a.createElement(s.U,{key:e.id,to:`/dashboard/sites/${t.siteId}/tickets/${e.id}`,rowColor:`var(--priority${e.priority})`},r.a.createElement(s.h,{width:120},e.sequenceNumber),r.a.createElement(s.h,null,""!==e.issueName&&r.a.createElement(s.db,{type:"label"},e.issueName,": "),r.a.createElement(s.db,{type:"value"},e.description)),r.a.createElement(s.h,{type:"fill",width:70},""!==e.floorCode&&r.a.createElement(s.Q,null,e.floorCode)),r.a.createElement(s.h,{width:130},r.a.createElement(s.gb,{value:e.createdDate})))))))))),r.a.createElement(lt,{feature:"isInsightsDisabled",off:!0},r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"Insights"},r.a.createElement(s.Z,{url:`/api/sites/${t.siteId}/insights?tab=open`,notFound:"No insights found",defaultSort:[["priority","occurredDate"],["asc","desc"]]},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,{sort:"sequenceNumber",width:120},"Id"),r.a.createElement(s.h,{sort:"type"},"Summary"),r.a.createElement(s.h,{sort:"floorCode",width:70},"Floor"),r.a.createElement(s.h,{sort:"occurredDate",width:140},"Occurred Date"))),r.a.createElement(s.e,null,e.map(e=>r.a.createElement(s.U,{key:e.id,to:`/dashboard/sites/${t.siteId}/insights/${e.id}`,rowColor:`var(--priority${e.priority})`},r.a.createElement(s.h,null,e.sequenceNumber),r.a.createElement(s.h,null,""!==e.name&&r.a.createElement(s.db,{type:"label"},e.name,": "),r.a.createElement(s.db,{type:"value"},e.type)),r.a.createElement(s.h,{type:"fill"},""!==e.floorCode&&r.a.createElement(s.Q,null,e.floorCode)),r.a.createElement(s.h,null,r.a.createElement(s.gb,{value:e.occurredDate})))))))))))):r.a.createElement(s.J,null,"No floor selected")}function Aa(e){return{...e,layerGroups:e.layerGroups.map(e=>M.a.omit(e,"id"))}}function Sa(e){const t=M()(e.equipments).flatMap(e=>e.pointTags).uniqBy(e=>e.id).value();return{name:e.name,zones:e.zones.map(e=>({id:e.id,geometry:e.points,equipmentIds:[]})),equipments:e.equipments.map(e=>({id:e.id,name:e.name,geometry:e.points,tags:e.pointTags.map(e=>e.id)})),layers:t.map(e=>({name:e.name,tagName:e.name}))}}function qa({floor:e,updateLayerGroup:t,onSaving:a,onSaved:n,onError:r}){const o=Object(c.i)(),i=Object(s.rb)(),d=Object(l.useRef)(M.a.cloneDeep(e));const m=function(e,t){const a=Object(s.Cb)(e),n=Object(s.Hb)(),r=Object(l.useRef)(!1),o=Object(l.useRef)(!1);return Object(l.useRef)((...e)=>{!function l(){r.current?o.current=!0:(n.clearTimeout(),n.setTimeout((async function(){try{r.current=!0,await a(...e)}finally{r.current=!1,o.current&&(o.current=!1,l())}}),t))}()}).current}(async()=>{try{if(M.a.isEqual(Aa(d.current),Aa(e)))return;const l=e.modules2D.map(e=>e.id),r=d.current.modules2D.filter(e=>!l.includes(e.id)),c=e.layerGroups.filter(e=>"floor_layer"!==e.id).filter(e=>null==e.id),s=e.layerGroups.filter(e=>"floor_layer"!==e.id).filter(e=>{const t=d.current.layerGroups.find(t=>t.id===e.id);return null!=t&&!M.a.isEqual(e,t)}),m=e.layerGroups.filter(e=>"floor_layer"!==e.id).map(e=>e.id),u=d.current.layerGroups.filter(e=>"floor_layer"!==e.id).filter(e=>!m.includes(e.id)),p=e.floorName!==d.current.floorName,E=e.layerGroups.find(e=>"floor_layer"===e.id),h=d.current.layerGroups.find(e=>"floor_layer"===e.id),f=h.hasLoaded&&!M.a.isEqual(E,h);d.current=M.a.cloneDeep(e);(p||r.length>0||c.length>0||s.length>0||u.length>0||f)&&(a(),p&&await async function(t){await i.put(`/api/sites/${o.siteId}/floors/${e.floorId}`,{name:t})}(e.floorName),await async function(t){for(let a=0;a<t.length;a++){const n=t[a];await i.delete(`/api/sites/${o.siteId}/floors/${e.floorId}/module/${n.id}`)}}(r),await async function(a){for(let n=0;n<a.length;n++){const l=a[n],r=await i.post(`/api/sites/${o.siteId}/floors/${e.floorId}/layerGroups`,Sa(l));d.current=t(d.current,l,r)}}(c),await async function(a){for(let n=0;n<a.length;n++){const l=a[n],r=await i.put(`/api/sites/${o.siteId}/floors/${e.floorId}/layerGroups/${l.id}`,Sa(l));d.current=t(d.current,l,r)}}(s),await async function(t){for(let a=0;a<t.length;a++){const n=t[a];await i.delete(`/api/sites/${o.siteId}/floors/${e.floorId}/layerGroups/${n.id}`)}}(u),await async function(t){await i.put(`/api/sites/${o.siteId}/floors/${e.floorId}/geometry`,{geometry:JSON.stringify(t.zones.map(e=>e.points))})}(E),n())}catch(e){r()}},1e3);Object(s.wb)(()=>{m()},[e])}const Wa=Object(l.createContext)();function La(){return Object(l.useContext)(Wa)}function Da({equipmentId:e}){const t=Object(c.i)();return r.a.createElement(s.s,{url:`/api/sites/${t.siteId}/assets/byequipment/${e}`},e=>{const t=M.a.chunk(e.assetParameters,2);return r.a.createElement(s.W,{type:"content"},r.a.createElement(s.B,null,r.a.createElement(s.db,{type:"label"},e.identifier),r.a.createElement(s.db,{type:"h3"},e.name)),t.length>0&&r.a.createElement(s.Z,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,null,"Key"),r.a.createElement(s.h,null,"Value"),r.a.createElement(s.h,null,"Key"),r.a.createElement(s.h,null,"Value"))),r.a.createElement(s.e,null,t.map(e=>{var t,a;return r.a.createElement(s.U,{key:e[0].key},r.a.createElement(s.h,null,r.a.createElement(s.db,{type:"label"},e[0].displayName)),r.a.createElement(s.h,null,e[0].value),r.a.createElement(s.h,null,r.a.createElement(s.db,{type:"label"},null===(t=e[1])||void 0===t?void 0:t.displayName)),r.a.createElement(s.h,null,null===(a=e[1])||void 0===a?void 0:a.value))}))),0===t.length&&r.a.createElement(s.W,null,r.a.createElement(s.J,null,"No details found")))})}function Za({equipmentId:e}){const t=Object(c.i)();return r.a.createElement(Xt,{url:`/api/sites/${t.siteId}/equipments/${e}/tickets?isClosed=true`})}function Pa({equipmentId:e}){const t=Object(c.i)();return r.a.createElement(Xt,{url:`/api/sites/${t.siteId}/equipments/${e}/tickets?isClosed=false`})}function _a({equipmentId:e}){const t=Object(c.i)();return r.a.createElement(Tt,{url:`/api/sites/${t.siteId}/equipments/${e}/insights`})}const Ra=Object(l.createContext)();function Ta(){return Object(l.useContext)(Ra)}function Fa(e){return null==e?null:"Invalid Date"!==new Date(e)?new Date(e).valueOf():e}function Ga(e,t){return e.map(e=>{const a=function(e,t){var a,n,l,r;const o=e.lines.flatMap(e=>e.points.map(e=>e.x)),i=null!==(a=Fa(t.minX))&&void 0!==a?a:Math.min(...o),c=null!==(n=Fa(t.maxX))&&void 0!==n?n:Math.max(...o),s=e.lines.flatMap(e=>e.points.filter(e=>e.x>=i&&e.x<=c).map(e=>e.y));let d=null!==(l=Fa(t.minY))&&void 0!==l?l:Math.min(...s),m=null!==(r=Fa(t.maxY))&&void 0!==r?r:Math.max(...s);d=d===1/0?0:d,m=m===-1/0?0:m;const u={minX:i,maxX:c,minY:d===m?d-1:d,maxY:d===m?m+1:m};return{...u,diffX:u.maxX-u.minX,diffY:u.maxY-u.minY}}(e,t);return{...e,bounds:a,lines:e.lines.map(e=>({...e,points:e.points.map(t=>"line"===e.type?{...t,x:(t.x-a.minX)/a.diffX,y:1-(t.y-a.minY)/a.diffY,min:1-(t.min-a.minY)/a.diffY,max:1-(t.max-a.minY)/a.diffY}:{...t,x:(t.x-a.minX)/a.diffX})}))}})}var $a=a("Cp5M"),Ua=a.n($a);function Ba({onClose:e}){const t=Object(s.Ib)(),a=Ta(),n=Object(s.tb)();function l(e){var l;const r=null!==(l=t.options.timeMachineFavorites)&&void 0!==l?l:[],o=e.data.name.trim();if(""===o)throw new s.lb({name:"name",message:"Name must be given"});if(r.some(e=>e.name.toLowerCase()===o.toLowerCase()))throw new s.lb({name:"name",message:"Name already exists in favorites"});t.saveUserOptions("timeMachineFavorites",[...r,{name:o,timeDiffs:[n(a.now).differenceInMilliseconds(a.times[0]),n(a.now).differenceInMilliseconds(a.times[1])],type:a.type,equipmentIds:a.equipmentIds,pointIds:a.pointIds}])}return r.a.createElement(s.I,{header:"Add favorite",onClose:e},e=>r.a.createElement(s.z,{onSubmit:l,onSubmitted:()=>e.close()},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.E,{name:"name",label:"Name"})),r.a.createElement(s.W,{className:Ua.a.footer,padding:"large"},r.a.createElement(s.f,{type:"submit",color:"blue"},"Add favorite")))))}var Xa=a("Vhk0"),Va=a.n(Xa);function Ha(){var e;const t=Object(c.g)(),a=Object(s.tb)(),[n,o]=Object(l.useState)(!1),i=Object(s.Ib)(),d=null!==(e=i.options.timeMachineFavorites)&&void 0!==e?e:[];const m=Ee()(Va.a.header,{[Va.a.hasFavorites]:d.length>0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.n,{className:Va.a.favorites},r.a.createElement(s.W,{horizontal:!0,size:"small",align:"middle"},r.a.createElement(s.C,{icon:"star"})),r.a.createElement(s.p,{position:"right",contentClassName:Va.a.content},r.a.createElement(s.W,{type:"content",className:Va.a.header},r.a.createElement(s.W,{padding:"medium",className:m},r.a.createElement(s.f,{icon:"star",color:"grey",size:"small",onClick:function(){o(!0)}},"Add favorite")),r.a.createElement("div",null,d.map((e,n)=>r.a.createElement("div",{key:n,className:Va.a.favorite},r.a.createElement(s.o,{onClick:()=>function(e){const n=a.now(),l=n.addMilliseconds(-e.timeDiffs[0]).format(),r=n.addMilliseconds(-e.timeDiffs[1]).format(),o=s.pb.createUrl("/time-machine",{from:l,to:r,type:e.type,equipmentIds:e.equipmentIds,pointIds:e.pointIds});t.push(o)}(e)},e.name),r.a.createElement(s.f,{icon:"trash",iconSize:"small",onClick:()=>function(e){i.saveUserOptions("timeMachineFavorites",d.filter(t=>t.name.toLowerCase()!==e.name.toLowerCase()))}(e)}))))))),n&&r.a.createElement(Ba,{onClose:()=>o(!1)}))}var Ya=a("6TGN"),Ja=a.n(Ya);function Ka({graph:e,isDimmed:t}){const a=e.lines[0];if(null==a||0===a.points.length)return null;const n=a.points[0].x,l=a.points.slice(-1)[0].x,o=`M${n},0 ${l},0 ${l},100 ${n},100`,i=a.points.map((e,t)=>{var n;const l=e.true+e.false,r=e.true/l,o=null===(n=a.points[t+1])||void 0===n?void 0:n.x;if(r<=0||null==o)return null;let i=r;i>.9&&i<1&&(i=.9),i<.1&&(i=.1);const c=(o-e.x)*i+e.x;return`M${e.x},1 ${e.x},0 ${c},0 ${c},1`}).filter(e=>null!=e).join(" "),c=Ee()(Ja.a.booleanGraph,{[Ja.a.isDimmed]:t});return r.a.createElement("svg",{viewBox:"0 0 1 1",preserveAspectRatio:"none",className:c,"data-graph":!0},r.a.createElement("path",{d:o,fill:a.color,className:Ja.a.backgroundPath}),r.a.createElement("path",{d:i,fill:a.color}))}var Qa=a("yO0c"),en=a.n(Qa);function tn({graphRef:e,graph:t}){const a=Ta(),n=Object(s.Fb)(e),[o,i]=Object(l.useState)([]);function c(){const e=Math.max(2,1+2*Math.floor(n.height/250)),a=[...Array(e)].map((a,l)=>({y:(t.bounds.maxY-t.bounds.minY)*(l/(e-1))+t.bounds.minY,top:n.height-n.height*(l/(e-1))}));i(a)}return Object(l.useEffect)(()=>{c()},[n]),Object(l.useEffect)(()=>{c()},[a.points]),r.a.createElement(r.a.Fragment,null,o.map(e=>r.a.createElement(s.K,{key:e.y,value:e.y,format:"0.[00]",className:en.a.label,style:{top:e.top}})),r.a.createElement(s.db,{className:en.a.yLabel},t.yAxis))}var an=a("ytvz"),nn=a.n(an);function ln({x:e,graph:t,isDimmed:a}){const n=Object(l.useRef)(),o=Object(l.useMemo)(()=>t.lines.map(e=>{const t="M"+e.points.map(e=>`${e.x},${e.max}`).join(" "),a="M"+e.points.map(e=>`${e.x},${e.min}`).join(" "),n=`${t} ${e.points.map(e=>`${e.x},${e.min}`).reverse().join(" ")}`,l="M"+e.points.map(e=>`${e.x},${e.y}`).join(" ");return{...e,fillPath:n,maxPath:t,minPath:a,path:l}}),[t.lines]),i=Ee()(nn.a.lineGraph,{[nn.a.isDimmed]:a});return r.a.createElement("div",{ref:n,className:i,"data-graph":!0},r.a.createElement("div",{className:nn.a.content},r.a.createElement("svg",{viewBox:"0 0 1 1",preserveAspectRatio:"none",className:nn.a.svg},o.filter(e=>e.points.length>0).map(e=>r.a.createElement("g",{key:e.pointId},r.a.createElement("path",{d:e.fillPath,fill:e.color,className:nn.a.fillPath}),r.a.createElement("path",{d:e.maxPath,stroke:e.color,className:nn.a.fillPathBorder}),r.a.createElement("path",{d:e.minPath,stroke:e.color,className:nn.a.fillPathBorder}),r.a.createElement("path",{d:e.path,stroke:e.color,className:nn.a.path})))),r.a.createElement(tn,{graphRef:n,graph:t}),null!=e&&t.lines.map(t=>{const a=t.points.find(t=>t.x===e);return null==a?null:r.a.createElement("div",{key:t.pointId,className:nn.a.point,style:{backgroundColor:t.color,left:100*a.x+"%",top:100*a.y+"%"}})})))}var rn=a("CIT5"),on=a.n(rn);function cn({target:e,lines:t,index:a}){const n=Ta();if(null==e||0===t.length)return null;const l=[...n.contentRef.current.childNodes[0].querySelectorAll("[data-graph]")],o=t[0].item.x;return r.a.createElement(s.hb,{target:e,yTarget:l[a],position:"left",showPointer:!1,contentClassName:on.a.tooltip},r.a.createElement(s.W,{horizontal:!0,align:"middle",size:"small",padding:"medium",className:on.a.header},r.a.createElement(s.db,{type:"value",color:"light",size:"large"},r.a.createElement(s.gb,{value:o}))),r.a.createElement(s.W,{size:"medium",padding:"medium"},t.map(e=>{var t;return r.a.createElement(s.W,{key:e.pointId,className:on.a.line},r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",size:"medium",className:on.a.header},r.a.createElement(s.W,{horizontal:!0,align:"middle",size:"small"},r.a.createElement("div",{className:on.a.color,style:{color:e.color}}),r.a.createElement(s.db,null,e.name))),"line"===e.type&&r.a.createElement(s.W,{align:"center"},r.a.createElement(s.W,{horizontal:!0},r.a.createElement(s.W,{align:"center middle",className:on.a.value},r.a.createElement(s.K,{value:e.item.y,format:"0.[00]"}),r.a.createElement(s.db,{type:"label"},null!==(t=e.yAxis)&&void 0!==t?t:"Value")),e.item.min!==e.item.y&&r.a.createElement(s.W,{align:"center middle",className:on.a.value},r.a.createElement(s.K,{value:e.item.min,format:"0.[00]"}),r.a.createElement(s.db,{type:"label"},"Min")),e.item.max!==e.item.y&&r.a.createElement(s.W,{align:"center middle",className:on.a.value},r.a.createElement(s.K,{value:e.item.max,format:"0.[00]"}),r.a.createElement(s.db,{type:"label"},"Max")))),"boolean"===e.type&&r.a.createElement(s.W,{align:"center",padding:"medium"},0===e.item.true&&r.a.createElement(s.db,{type:"value",size:"large",className:on.a.booleanValue},"Off"),e.item.true>0&&r.a.createElement(s.db,{type:"value",size:"large",className:on.a.booleanValue},"On"),e.item.true>0&&e.item.false>0&&r.a.createElement(s.db,{type:"label"},r.a.createElement(s.K,{value:e.item.true/(e.item.true+e.item.false)*100,format:"0"}),"% of the time")))})))}var sn=a("JFGN"),dn=a.n(sn);function mn(){var e,t;const a=Object(s.tb)(),n=Ta(),o=Object(l.useRef)(),[i,c]=Object(l.useState)();let d;if(null!=(null==i?void 0:i.startX)&&null!=(null==i?void 0:i.nextX)){const e=M.a.orderBy([i.startX,i.nextX]);d={left:e[0],width:e[1]-e[0]}}function m(e,t){var l,r;if(null==(null===(l=n.contentRef.current)||void 0===l||null===(r=l.childNodes)||void 0===r?void 0:r[0]))return null;const o=n.contentRef.current.getBoundingClientRect(),i=n.contentRef.current.childNodes[0].getBoundingClientRect(),c=[a(n.times[0]).valueOf(),a(n.times[1]).valueOf()],s=(e-i.x)/i.width;if(s<0||s>1)return null;let d=s*(c[1]-c[0])+c[0];d-=d%9e5,t&&(d+=9e5);return(d-c[0])/(c[1]-c[0])*i.width+(i.x-o.x)}function u(e){const t=n.contentRef.current.getBoundingClientRect(),l=n.contentRef.current.childNodes[0].getBoundingClientRect(),{bounds:r}=n.graphs[0],o=(e-(l.left-t.left))/l.width;return a(o*(r.maxX-r.minX)+r.minX).format()}return r.a.createElement(s.W,{ref:n.contentRef,className:dn.a.graphContent,onPointerMove:function(e){var t,a;if(null==(null===(t=n.contentRef.current)||void 0===t||null===(a=t.childNodes)||void 0===a?void 0:a[0]))return;let l;const r=e.target.closest("[data-graph]");null!=r&&(l=[...r.parentNode.children].indexOf(r));const o=n.contentRef.current.getBoundingClientRect(),s=n.contentRef.current.childNodes[0].getBoundingClientRect(),d=(e.clientX-s.x)/s.width;if(d<0||d>=1)return void c();const u=n.xValues.find(e=>e>d);let p=m(e.clientX,!0);if(p<=(null==i?void 0:i.startX)&&(p=m(e.clientX,!1)),null==u)return void c();const E=u*s.width+s.x-o.x,h=n.graphs[l],f=n.graphs.filter(e=>"boolean"===(null==h?void 0:h.type)&&"boolean"===e.type||h===e).flatMap(e=>e.lines).map(e=>({...e,item:e.data[e.points.findIndex(e=>e.x===u)]})).filter(e=>null!=e.item);c(e=>({...e,x:u,index:l,nextX:p,left:E,lines:f}))},onPointerLeave:function(){c()},onPointerDown:function(e){if(0===e.button){const t=m(e.clientX);if(null==t)return;let a;const n=e.target.closest("[data-graph]");null!=n&&(a=[...n.parentNode.children].indexOf(n)),c(e=>({...e,startX:t,index:a}))}},onPointerUp:function(){if(null!=d){const e=u(d.left),t=u(d.left+d.width);e!==t&&a(t).differenceInMinutes(e)>15&&n.onTimesChange([e,t]),c(e=>({...e,startX:void 0}))}}},r.a.createElement(s.W,{height:"100%",size:"medium"},n.graphs.map((e,t)=>{var a;return r.a.createElement(l.Fragment,{key:`${e.id} ${e.lines.length}`},"line"===e.type&&r.a.createElement(ln,{x:null==i?void 0:i.x,graph:e,isDimmed:null!=(null==i?void 0:i.index)&&t!==i.index}),"boolean"===e.type&&r.a.createElement(Ka,{graph:e,isDimmed:null!=(null==i?void 0:i.index)&&"boolean"!==(null===(a=n.graphs[null==i?void 0:i.index])||void 0===a?void 0:a.type)}))}),(null==i||null===(e=i.lines)||void 0===e?void 0:e.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:o,className:dn.a.line,style:{left:i.left}}),null!=(null===(t=i.lines[0])||void 0===t?void 0:t.item)&&r.a.createElement(s.W,{align:"center",className:dn.a.time,style:{left:i.left}},r.a.createElement("div",null,r.a.createElement(s.gb,{value:i.lines[0].item.x,format:"date"})),r.a.createElement("div",null,r.a.createElement(s.gb,{value:i.lines[0].item.x,format:"time"}))),r.a.createElement(cn,{key:i.index,target:o.current,lines:i.lines,index:i.index}),null!=d&&r.a.createElement("div",{className:dn.a.timeWindow,style:{left:d.left,width:d.width}}))))}var un=a("BNEN"),pn=a.n(un);function En({label:e}){return r.a.createElement("div",{className:pn.a.label,style:{left:e.x}},r.a.createElement("div",null,r.a.createElement(s.gb,{value:e.value,format:"date"})),r.a.createElement("div",null,r.a.createElement(s.gb,{value:e.value,format:"time"})))}var hn=a("bN1B"),fn=a.n(hn);function gn(){const e=Ta(),[t,a]=Object(l.useState)([]),n=Object(s.Fb)(e.contentRef),{bounds:o}=e.graphs[0];function i(){var t,n;if(null==(null===(t=e.contentRef.current)||void 0===t||null===(n=t.childNodes)||void 0===n?void 0:n[0]))return;const l=e.contentRef.current.getBoundingClientRect(),r=e.contentRef.current.childNodes[0].getBoundingClientRect(),i=r.x-l.x,c=l.width-(l.right-r.right),s=Math.max(2,1+2*Math.floor(r.width/300));a([...Array(s)].map((e,t)=>({x:t/(s-1)*(c-i)+i,value:(o.maxX-o.minX)*(t/(s-1))+o.minX})))}return Object(l.useEffect)(()=>{i()},[e.contentRef,n]),Object(l.useEffect)(()=>{i()},[e.points]),r.a.createElement("div",{className:fn.a.xAxis},t.map(e=>r.a.createElement(En,{key:e.x,label:e})))}var bn=a("MVJS"),yn=a.n(bn);function vn(){return 0===Ta().graphs.length?r.a.createElement(s.J,{icon:"graph"},"Trend points"):r.a.createElement(s.W,{type:"content",overflow:"hidden",className:yn.a.graph},r.a.createElement(gn,null),r.a.createElement(mn,null))}function In({onClose:e}){const t=Object(s.Gb)();return r.a.createElement(s.I,{header:"Share the current view",onClose:e},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,{size:"medium",padding:"large"},r.a.createElement("span",null,"Here's a link to your view"),r.a.createElement(s.E,{value:window.location.href,readOnly:!0})),r.a.createElement(s.y,{onClick:function(){navigator.clipboard.writeText(window.location.href),t.show({icon:"check",header:"The link has been copied to your clipboard",timeout:3e3})}},"Copy link")))}function wn(){const e=Object(s.tb)(),t=Ta();function a(a){const n=e.now();t.onTimesChange([a(n).format(),n.format()])}return r.a.createElement(s.k,{type:"date-time-range",helper:r.a.createElement(r.a.Fragment,null,r.a.createElement(s.l,{onClick:()=>a(e=>e.addHours(-1))},"Last Hour"),r.a.createElement(s.l,{onClick:()=>a(e=>e.addHours(-4))},"Last 4 Hours"),r.a.createElement(s.l,{onClick:()=>a(e=>e.addHours(-24))},"Last 24 Hours"),r.a.createElement(s.l,{onClick:()=>a(e=>e.addDays(-7))},"Last 7 Days"),r.a.createElement(s.l,{onClick:()=>a(e=>e.addDays(-30))},"Last 30 Days"),r.a.createElement(s.l,{onClick:()=>a(e=>e.addDays(-90))},"Last 90 Days"),r.a.createElement(s.l,{onClick:()=>a(e=>e.addMonths(-12))},"Last 12 Months")),value:t.times,onChange:t.onTimesChange})}function On({timeMachineType:e}){const t=Ta(),[a,n]=Object(l.useState)(!1);return r.a.createElement(r.a.Fragment,null,"normal"===e&&r.a.createElement(s.cb,null,r.a.createElement(s.f,{icon:"share",onClick:()=>n(!0)}),a&&r.a.createElement(In,{onClose:()=>n(!1)})),r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",size:"medium",overflow:"hidden",padding:"medium"},r.a.createElement(s.W,{horizontal:!0,size:"medium"},r.a.createElement(wn,null),r.a.createElement(s.V,{value:t.type,unselectable:!1,onChange:t.onTypeChange},r.a.createElement(s.M,{value:"grouped"},"Grouped"),r.a.createElement(s.M,{value:"stacked"},"Stacked"),r.a.createElement(s.M,{value:"shared"},"Shared")))))}function kn(){return null}var Cn=a("22nM"),jn=a.n(Cn);function Nn({point:e}){var t;const a=Object(s.Gb)(),n=Ta(),o=null===(t=n.points.find(t=>t.pointId===e.id))||void 0===t?void 0:t.color,i=n.pointIds.includes(e.id),c=Ee()(jn.a.point,{[jn.a.isSelected]:i,[jn.a.isVisible]:e.isVisible});return Object(l.useEffect)(()=>{e.isSelected&&n.selectPointId(e.id)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.f,{className:c,onClick:()=>n.selectPointId(e.id)},r.a.createElement(s.W,{horizontal:!0,type:"content",align:"middle",size:"medium",overflow:"hidden",width:"100%"},r.a.createElement(s.C,{icon:i?"eye-open":"eye-close",size:"tiny",className:jn.a.icon,style:{color:o}}),r.a.createElement(s.W,{overflow:"hidden"},r.a.createElement(s.db,{type:"value",color:"dark"},e.externalPointId),r.a.createElement(s.db,null,e.name)),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.s,{url:`/api/livedata/points/${e.entityId}/data?start=${n.times[0]}&end=${n.times[1]}`,loader:r.a.createElement(s.W,{padding:"0 small"},r.a.createElement(s.C,{icon:"progress",size:"tiny"})),error:null,onResponse:e=>{n.addOrUpdatePoint(e)},onError:()=>{n.removePoint(e),a.show({header:"An error has occurred loading a point",description:"PointId: "+e.entityId,timeout:3e3})},onLoading:()=>{n.addLoadingPointId(e.id)}}),r.a.createElement(s.j,{onMount:()=>()=>n.removePoint(e)})))))}var xn=a("v/va"),Mn=a.n(xn);function zn({timeMachineType:e,equipmentIds:t}){const a=Object(s.Gb)(),n=H(),o=Ta(),i=Object(l.useRef)(),[c,d]=Object(l.useState)(),[m,u]=Object(l.useState)("");function p(){const e=i.current.getBoundingClientRect();d(window.innerHeight-e.top-18)}return Object(s.Jb)("resize",()=>{p()}),Object(l.useEffect)(()=>{p()},[]),r.a.createElement(s.w,{ref:i,header:r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",padding:"0 large 0 0"},r.a.createElement(s.db,null,"Current selection"),o.isPointsLoading()&&r.a.createElement(s.C,{icon:"progress",size:"small"})),style:{maxHeight:c}},r.a.createElement(s.W,{size:"medium"},r.a.createElement(s.W,null,r.a.createElement(s.E,{icon:"search",placeholder:"Search",debounce:!0,value:m,onChange:u})),r.a.createElement(s.W,{size:"medium"},t.map(t=>r.a.createElement(s.s,{key:t,url:"/api/equipments/"+t,onError:()=>{a.show("Error loading equipment"),o.removeEquipmentId(t)}},t=>{const a=n.sites.find(e=>e.id===t.siteId),l=t.points.map(e=>({...e,isSelected:"normal"!==o.timeMachineType,isVisible:""===m||o.pointIds.includes(e.id)||e.externalPointId.toLowerCase().includes(m.toLowerCase())||e.name.toLowerCase().includes(m.toLowerCase())}));return r.a.createElement(s.x,{key:t.id,header:r.a.createElement(s.W,null,null!=a&&r.a.createElement("span",{className:Mn.a.site},a.name),r.a.createElement(s.db,null,t.name))},l.map(e=>r.a.createElement(Nn,{key:e.id,point:e})),"normal"===e&&r.a.createElement(s.W,{align:"right"},r.a.createElement(s.f,{icon:"trash",iconSize:"small",onClick:()=>function(e){o.removeEquipmentId(e)}(t.id)})))})),0===t.length&&r.a.createElement(s.J,null,"No equipment selected"))))}var An=a("DcnG"),Sn=a("5iOM"),qn=a.n(Sn);function Wn({times:e,type:t,timeMachineType:a="normal",equipmentIds:n=[],pointIds:o=[],onEquipmentIdRemove:i,onTimesChange:c,onTypeChange:d,onPointIdsChange:m}){const u=Object(s.tb)(),[p,E]=Object(l.useState)([]),[h,f]=Object(l.useState)([]),[g,b]=Object(l.useState)(),y=Object(l.useRef)();Object(l.useEffect)(()=>{b(u.now().format())},[e]),Object(l.useEffect)(()=>{E(e=>e.filter(e=>o.includes(e.pointId)))},[o]);const v=Object(l.useMemo)(()=>function(e,t){const a=t.map(e=>({pointId:e.pointId,name:e.pointName,type:"analog"===e.pointType?"line":"boolean",yAxis:e.unit,data:e.timeSeriesData.map(t=>"analog"===e.pointType?{x:t.timestamp,y:t.average,min:t.minimum,max:t.maximum}:{x:t.timestamp,true:t.onCount,false:t.offCount}),color:e.color})),n=a.filter(e=>"line"===e.type),l=a.filter(e=>"boolean"===e.type).map(e=>({id:e.pointId,type:e.type,yAxis:e.yAxis,lines:[e]}));return"grouped"===e?[...M()(n).groupBy(e=>e.yAxis).map(e=>({id:e[0].pointId,type:e[0].type,yAxis:e[0].yAxis,lines:e})).value(),...l]:"stacked"===e?[...n.map(e=>({id:e.pointId,type:e.type,yAxis:e.yAxis,lines:[e]})),...l]:n.length>0?[{id:n[0].pointId,type:"line",yAxis:"Shared",lines:n},...l]:l}(t,p),[t,p]),I=function(e,t){let a=e.map(e=>({...e,lines:e.lines.map(e=>({...e,points:e.data.map(e=>({...e,x:Fa(e.x)}))}))}));return a=Ga(a,t),{xValues:M()(a).flatMap(e=>e.lines).flatMap(e=>e.points).flatMap(e=>e.x).orderBy().uniq().value(),graphs:a}}(v,{minX:e[0],maxX:e[1],minY:void 0,maxY:void 0}),w={contentRef:y,timeMachineType:a,now:g,times:e,type:t,equipmentIds:n,pointIds:o,points:p,graphData:v,...I,onTimesChange:c,onTypeChange:d,isPointsLoading:()=>h.length>0,addLoadingPointId(e){f(t=>[...t,e])},removeLoadingPointId(e){f(t=>t.filter(t=>t!==e))},selectPointId(e){m(t=>M.a.xor(t,[e]))},removeEquipmentId(e){i(e)},addOrUpdatePoint(e){w.removeLoadingPointId(e.pointId),E(t=>t.some(t=>t.pointId===e.pointId)?t.map(t=>t.pointId===e.pointId?{...t,...e}:t):[...t,e].map(e=>{var t;const a=o.indexOf(e.pointId);return{...e,color:null!==(t=An[a])&&void 0!==t?t:An.slice(-1)[0]}}))},removePoint(e){w.removeLoadingPointId(e.id),m(t=>t.filter(t=>t!==e.id))}};return r.a.createElement(Ra.Provider,{value:w},r.a.createElement(s.W,{type:"content",className:qn.a.timeMachine},r.a.createElement(On,{timeMachineType:a}),r.a.createElement("div",{className:qn.a.content},r.a.createElement(vn,null)),r.a.createElement(kn,null),r.a.createElement(s.W,{horizontal:!0,size:"medium",className:qn.a.right},"normal"===a&&r.a.createElement(Ha,null),r.a.createElement(zn,{timeMachineType:a,equipmentIds:n}))))}function Ln(){return(Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Dn({times:e,type:t,onTimesChange:a,onTypeChange:n,...o}){const i=Object(s.tb)(),[c,d]=Object(l.useState)(()=>{const e=i.now().format();return{times:[i(e).addDays(-7).format(),e],type:"grouped"}});return r.a.createElement(Wn,Ln({},o,{times:null!=e?e:c.times,type:null!=t?t:c.type,onTimesChange:function(e){d(t=>({...t,times:e})),null==a||a(e)},onTypeChange:function(e){d(t=>({...t,type:e})),null==n||n(e)}}))}function Zn({equipmentId:e}){const t=Object(s.tb)(),[a,n]=Object(l.useState)(()=>{const a=t.now().format();return{times:[t(a).addDays(-7).format(),a],type:"grouped",equipmentIds:[e],pointIds:[]}});return r.a.createElement(s.W,{height:"100%"},r.a.createElement(Dn,{times:a.times,type:a.type,equipmentIds:a.equipmentIds,pointIds:a.pointIds,timeMachineType:"floor",onTimesChange:e=>n(t=>({...t,times:e})),onTypeChange:e=>n(t=>({...t,type:e})),onEquipmentIdRemove:e=>{n(t=>({...t,equipmentIds:t.equipmentIds.filter(t=>t!==e)}))},onPointIdsChange:e=>n(t=>({...t,pointIds:e(t.pointIds)}))}))}function Pn(){const e=Object(s.Ab)(),t=Object(s.Eb)(),a=La(),n="viewer-dashboard-details-new"===t.maximized,l=n?"minimize":"maximize";if(null==a.selectedEquipmentId)return null;return r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"Details"},r.a.createElement(Da,{equipmentId:a.selectedEquipmentId})),r.a.createElement(s.X,{header:"Time Machine"},r.a.createElement(Zn,{key:a.selectedEquipmentId,equipmentId:a.selectedEquipmentId})),r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.X,{header:"In progress"},r.a.createElement(Pa,{equipmentId:a.selectedEquipmentId}))),r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.X,{header:"History"},r.a.createElement(Za,{equipmentId:a.selectedEquipmentId}))),r.a.createElement(lt,{feature:"isInsightsDisabled",off:!0},r.a.createElement(s.X,{header:"Insights"},r.a.createElement(_a,{equipmentId:a.selectedEquipmentId}))),r.a.createElement(s.W,{horizontal:!0,align:"right",width:"100%"},r.a.createElement(s.f,{icon:l,iconSize:"small",onClick:function(){e.maximizePanel("viewer-dashboard-details-new",!n)}}),r.a.createElement(s.f,{icon:"close",iconSize:"small",onClick:function(){a.selectEquipmentId()}})))}function _n({selectedAssetCategoryId:e,search:t}){const a=Object(c.i)(),n=La();return r.a.createElement(s.Z,{url:`/api/sites/${a.siteId}/assets`,params:{floorId:n.floorId,categoryId:e,searchKeyword:t.length>=3?t:void 0},notFound:"No assets found"},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,{sort:"name"},"Name"),r.a.createElement(s.h,{sort:"identifier",width:130},"Id"))),r.a.createElement(s.e,null,e.map(e=>r.a.createElement(s.U,{key:e.id,selected:n.selectedAssetId===e.id,onClick:()=>n.selectAsset(e)},r.a.createElement(s.h,null,e.name),r.a.createElement(s.h,null,e.identifier))))))}function Rn({floorId:e,selectedAssetCategoryIds:t,setSelectedAssetCategoryIds:a}){const n=Object(c.i)();return r.a.createElement(s.ib,{url:`/api/sites/${n.siteId}/categories/roots`,params:{floorId:e,includeAssetCount:!0},itemIds:t,onChange:a},t=>function t(a){return a.map(a=>r.a.createElement(s.jb,{key:a.id,itemId:a.id,header:a.name,url:`/api/sites/${n.siteId}/categories/${a.id}/children`,params:{floorId:e,includeAssetCount:!0},cache:!0,isLeaf:a.hasTemplateAssigned},e=>t(e.filter(e=>e.hasChildren||e.assetCount>0))))}(t.filter(e=>e.hasChildren||e.assetCount>0)))}var Tn=a("R4Wl"),Fn=a.n(Tn);function Gn({selectedSystemCategoryId:e}){const t=Object(c.i)(),a=La(),[n,o]=Object(l.useState)("");return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.cb,null,r.a.createElement(s.W,{width:"100%"},r.a.createElement(s.E,{icon:"search",inputType:"search",debounce:!0,placeholder:"Search",value:n,onChange:o}))),r.a.createElement(s.Z,{url:`/api/sites/${t.siteId}/floors/${a.floorId}/categories/${e}/equipments`,notFound:"No points found",filter:e=>e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.tags.some(e=>e.name.toLowerCase().includes(n.toLowerCase())))},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,!a.isReadOnly&&r.a.createElement(s.h,{width:32}),r.a.createElement(s.h,{sort:"name"},"Name"),r.a.createElement(s.h,null,"Tags"))),r.a.createElement(s.e,null,e.map(e=>{var t,n;const l=null===(t=a.layerGroup)||void 0===t?void 0:t.equipments.some(t=>t.id===e.id),o="create"===a.mode&&"floor_layer"!==(null===(n=a.layerGroup)||void 0===n?void 0:n.id)&&!l,i=Ee()(Fn.a.row,{[Fn.a.draggable]:o});return r.a.createElement(s.U,{key:e.id,draggable:o,selected:a.selectedEquipmentId===e.id,className:i,onDragStart:t=>{o?t.dataTransfer.setData("text/plain",JSON.stringify({...e,pointTags:e.pointTags.filter(e=>"2d"===e.feature)})):t.preventDefault()},onClick:a.isReadOnly?()=>{a.selectEquipmentId(e.id),a.centerEquipmentId(e.id)}:void 0},!a.isReadOnly&&r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.W,{align:"center middle"},r.a.createElement(s.C,{icon:"drag",className:Fn.a.drag}))),r.a.createElement(s.h,null,e.name),r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.W,{horizontal:!0,size:"small"},e.tags.map(e=>r.a.createElement(s.Q,{key:e.id,className:Fn.a.pill},e.name)))))})))))}function $n({selectedSystemCategoryId:e,selectSystemCategory:t}){const a=Object(c.i)(),n=La();return r.a.createElement(s.Z,{url:`/api/sites/${a.siteId}/floors/${n.floorId}/categories`,notFound:"No live assets found"},a=>r.a.createElement(s.e,null,a.map(a=>r.a.createElement(s.U,{key:a.id,selected:a.id===e,onClick:()=>t(a.id)},r.a.createElement(s.h,null,a.name)))))}function Un(){const e=Object(s.Ab)(),t=La(),[a,n]=Object(l.useState)(),[o,i]=Object(l.useState)([]),[c,d]=Object(l.useState)(""),m=o.slice(-1)[0];function u(e){n(t=>t!==e?e:void 0)}return Object(l.useLayoutEffect)(()=>{e.maximizePanel("viewer-dashboard-equipment-categories",null==a&&null==m&&c.length<3)},[a,m,c]),r.a.createElement(s.O,{defaultMaximized:"viewer-dashboard-equipment-categories"},r.a.createElement(s.N,{name:"viewer-dashboard-equipment-categories"},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"System"},r.a.createElement(s.j,{onMount:()=>i([])}),r.a.createElement($n,{selectedSystemCategoryId:a,selectSystemCategory:u})),t.isReadOnly&&r.a.createElement(s.X,{header:"Asset"},r.a.createElement(s.cb,null,r.a.createElement(s.j,{onMount:()=>()=>d("")}),r.a.createElement(s.W,{width:"100%"},r.a.createElement(s.E,{icon:"search",inputType:"search",placeholder:"Search",debounce:!0,value:c,onChange:d}))),r.a.createElement(s.j,{onMount:()=>u()}),r.a.createElement(Rn,{floorId:t.floorId,selectedAssetCategoryIds:o,setSelectedAssetCategoryIds:i}))))),r.a.createElement(s.N,{name:"viewer-dashboard-equipment",initialSize:300},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.ab,null,null!=a&&r.a.createElement(s.X,{header:"Equipment"},r.a.createElement(Gn,{selectedSystemCategoryId:a})),(null!=m||c.length>=3)&&r.a.createElement(s.X,{header:"Assets"},r.a.createElement(_n,{selectedAssetCategoryId:m,search:c}))))))}function Bn({onClose:e}){const t=Object(s.yb)();return r.a.createElement(s.T,{header:"Error",buttonText:"Refresh",closable:!1,showCancel:!1,showSubmitted:!1,onSubmitted:e=>{e.close(),t("floor")},onClose:e},r.a.createElement(s.db,{whiteSpace:"normal"},"An error has occurred saving the floor."))}function Xn({assetId:e}){const t=Object(c.i)();return r.a.createElement(s.s,{url:`/api/sites/${t.siteId}/assets/${e}`},e=>{const t=M.a.chunk(e.assetParameters,2);return r.a.createElement(s.W,{type:"content"},r.a.createElement(s.B,null,r.a.createElement(s.db,{type:"label"},e.identifier),r.a.createElement(s.db,{type:"h3"},e.name)),t.length>0&&r.a.createElement(s.Z,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,null,"Key"),r.a.createElement(s.h,null,"Value"),r.a.createElement(s.h,null,"Key"),r.a.createElement(s.h,null,"Value"))),r.a.createElement(s.e,null,t.map(e=>{var t,a;return r.a.createElement(s.U,{key:e[0].key},r.a.createElement(s.h,null,r.a.createElement(s.db,{type:"label"},e[0].displayName)),r.a.createElement(s.h,null,e[0].value),r.a.createElement(s.h,null,r.a.createElement(s.db,{type:"label"},null===(t=e[1])||void 0===t?void 0:t.displayName)),r.a.createElement(s.h,null,null===(a=e[1])||void 0===a?void 0:a.value))}))),0===t.length&&r.a.createElement(s.W,null,r.a.createElement(s.J,null,"No details found")))})}function Vn({assetId:e}){const t=Object(c.i)();return r.a.createElement(Xt,{url:`/api/sites/${t.siteId}/assets/${e}/tickets?isClosed=false`})}function Hn({assetId:e}){const t=Object(c.i)();return r.a.createElement(Xt,{url:`/api/sites/${t.siteId}/assets/${e}/tickets?isClosed=true`})}function Yn(){const e=Object(s.Ab)(),t=Object(s.Eb)(),a=La(),n="viewer-dashboard-details-new"===t.maximized,l=n?"minimize":"maximize";if(null==a.selectedAssetId)return null;return r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"Details"},r.a.createElement(Xn,{assetId:a.selectedAssetId})),r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.X,{header:"In progress"},r.a.createElement(Vn,{assetId:a.selectedAssetId}))),r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0},r.a.createElement(s.X,{header:"History"},r.a.createElement(Hn,{assetId:a.selectedAssetId}))),r.a.createElement(s.W,{horizontal:!0,align:"right",width:"100%"},r.a.createElement(s.f,{icon:l,iconSize:"small",onClick:function(){e.maximizePanel("viewer-dashboard-details-new",!n)}}),r.a.createElement(s.f,{icon:"close",iconSize:"small",onClick:function(){a.selectAsset()}})))}function Jn(e,t){return M()(e.layerGroup.zones).flatMap(e=>e.points).filter(e=>Math.abs(e[0]-t[0])<5).orderBy(e=>Math.abs(e[1]-t[1])).value()[0]}function Kn(e,t){return M()(e.layerGroup.zones).flatMap(e=>e.points).filter(e=>Math.abs(e[1]-t[1])<5).orderBy(e=>Math.abs(e[0]-t[0])).value()[0]}const Qn=Object(l.createContext)();function el(){return Object(l.useContext)(Qn)}var tl=a("qx7s"),al=a.n(tl);function nl(){return(nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ll({mode:e,...t}){const a=La(),n=a.mode===e,l=Ee()(al.a.tabsButton,{[al.a.selected]:n});return r.a.createElement(s.f,nl({},t,{iconSize:"small",selected:n,className:l,onClick:()=>a.selectMode(e)}))}var rl=a("Op1I"),ol=a.n(rl);function il(){var e,t;const a=La(),n=el(),l="edit"===a.mode&&((null===(e=n.selectedObject)||void 0===e?void 0:e.points.length)>1&&null==n.selectedPointIndex||null!=n.copiedZone),o="edit"===a.mode&&null!=n.selectedObject&&null==n.selectedPointIndex,i=null!=(null===(t=n.selectedObject)||void 0===t?void 0:t.pointTags);return r.a.createElement(s.cb,null,a.is2d&&r.a.createElement(s.W,{horizontal:!0,align:"center",width:"100%",className:ol.a.buttons},r.a.createElement(ll,{icon:"create",mode:"create","data-tooltip":"Draw zone"}),r.a.createElement(ll,{icon:"edit",mode:"edit","data-tooltip":"Edit zone/equipment"}),r.a.createElement(s.W,{horizontal:!0,align:"middle",className:ol.a.tools},r.a.createElement(s.f,{icon:"copy",iconSize:"small",className:Ee()(ol.a.button,{[ol.a.visible]:l}),"data-tooltip":"Copy zone",onClick:()=>n.setCopiedZone(n.selectedObject)}),r.a.createElement(s.f,{icon:"trash",iconSize:"small",className:Ee()(ol.a.button,{[ol.a.visible]:o}),"data-tooltip":"Delete "+(i?"equipment":"zone"),onClick:()=>a.deleteObject(n.selectedObject)}))),r.a.createElement(s.W,{horizontal:!0,height:"100%",size:"medium",align:"middle",padding:"0 medium",className:ol.a.right},null!=a.lastSavedTime&&"loading"!==a.lastSavedTime&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.db,null,"Last saved:"),r.a.createElement(s.gb,{value:a.lastSavedTime,format:"secondsAgo"})),"loading"===a.lastSavedTime&&r.a.createElement(s.C,{icon:"progress",size:"small"}),r.a.createElement(s.g,null,r.a.createElement(s.f,{color:a.is2d?"greyLight":"grey",size:"tiny",selected:a.is2d,onClick:()=>a.setIs2d(!0)},"2D"),r.a.createElement(s.f,{color:a.is2d?"grey":"greyLight",size:"tiny",selected:!a.is2d,onClick:()=>a.setIs2d(!1)},"3D"))))}function cl(){const e=La();return r.a.createElement(s.cb,null,r.a.createElement(s.W,{align:"middle",padding:"0 medium"},r.a.createElement(s.g,null,r.a.createElement(s.f,{color:e.is2d?"greyLight":"grey",size:"tiny",selected:e.is2d,onClick:()=>e.setIs2d(!0)},"2D"),r.a.createElement(s.f,{color:e.is2d?"grey":"greyLight",size:"tiny",selected:!e.is2d,onClick:()=>e.setIs2d(!1)},"3D"))))}function sl({...e}){return La().isReadOnly?r.a.createElement(cl,e):r.a.createElement(il,e)}const dl=Object(l.createContext)();function ml(){return Object(l.useContext)(dl)}function ul(){const e=La(),t=ml();Object(l.useLayoutEffect)(()=>{!function(){var a;const n=Math.max(t.contentRef.current.offsetWidth-290,100),l=Math.max(t.contentRef.current.offsetHeight-30,100),r=[10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,220,240,260,280,300,350,400,450,500,550,600,650,700,750,800,900,1e3,1100,1200,1400,1600,1800,2e3],o=null!==(a=[...r].reverse().find(t=>{const a=e.width*t/100,r=e.height*t/100;return a<n&&r<l}))&&void 0!==a?a:r[0],i=r.findIndex(e=>e===o),c=n/2-e.width*o/200,s=l/2-e.height*o/200;t.setZoomLevels(r.slice(i)),t.move({x:c,y:s,zoom:o})}()},[])}function pl(){const e=La(),t=ml();return Object(s.xb)(t.svgRef,"dragover",e=>{e.preventDefault()}),Object(s.xb)(t.svgRef,"drop",a=>{const n=JSON.parse(a.dataTransfer.getData("text/plain")),l=a.currentTarget.getBoundingClientRect(),r=100/t.zoom;let o=(a.clientX-l.x)*r,i=(a.clientY-l.y)*r;o=+o.toFixed(0),i=+i.toFixed(0),e.addEquipment({...n,points:[[o,i]]})}),null}var El=a("xCsS"),hl=a.n(El);function fl(){return(fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function gl({zone:e,className:t,...a}){const n=Ee()(hl.a.zone,t);return r.a.createElement("polygon",fl({points:e.points.join(" ")},a,{className:n}))}var bl=a("F6ZH"),yl=a.n(bl);function vl({mouse:e,zone:t,setZone:a}){const n=La(),l=ml();let o,i;if(null!=t&&(o="M"+t.points.map(e=>e.join(",")).join(" ")),null!=t&&null!=e){i=`M${t.points.slice(-1)[0].join(",")} ${e.join(",")}`}const c=Object(s.Cb)(e=>{null!=t&&0!==e.diffClientX&&0!==e.diffClientY&&a({...t,isDragging:!0})}),d=Object(s.Cb)(()=>{if(null!=e){if((null==t?void 0:t.isDragging)&&1===t.points.length){const l=Math.min(t.points[0][0],e[0]),r=Math.max(t.points[0][0],e[0]),o=Math.min(t.points[0][1],e[1]),i=Math.max(t.points[0][1],e[1]);l!==r&&o!==i&&n.addZone({points:[[l,o],[r,o],[r,i],[l,i]]}),a()}}else a({...t,isDragging:!1})}),m=Object(s.ub)({onDown(e){var a,r,o;if("floor_layer"===(null===(a=n.layerGroup)||void 0===a?void 0:a.id)&&(null==t||null===(r=t.points)||void 0===r?void 0:r.length)>=1)return null;const i=n.visibleLayerGroups.flatMap(e=>e.equipments).length>0?2:1;return null!=t&&(null==t||null===(o=t.points)||void 0===o?void 0:o.length)>=i?null:{...e,x:l.x,y:l.y}},onMove(e){c(e)},onUp(){d()}});return Object(s.xb)(l.svgRef,"pointerdown",l=>{if(0!==l.button)return;if(null==e)return;if(null==t)return void a({points:[e]});M.a.isEqual(t.points[0],e)?(t.points.length>2&&n.addZone(t),a()):a({points:[...t.points,e]})}),Object(s.xb)(l.svgRef,"pointerdown",e=>0!==e.button?null:m.onPointerDown(e)),Object(s.Jb)("keydown",e=>{"Escape"===e.key&&((null==t?void 0:t.points.length)>1&&!t.isDragging?a({...t,points:t.points.slice(0,-1)}):a())}),r.a.createElement(r.a.Fragment,null,null!=e&&r.a.createElement("circle",{cx:e[0],cy:e[1],className:yl.a.mouse}),null!=o&&r.a.createElement("path",{d:o,className:yl.a.path}),null!=i&&!t.isDragging&&r.a.createElement("path",{d:i,className:yl.a.path}),null!=e&&null!=t&&t.isDragging&&r.a.createElement(gl,{zone:{points:[[Math.min(t.points[0][0],e[0]),Math.min(t.points[0][1],e[1])],[Math.max(t.points[0][0],e[0]),Math.min(t.points[0][1],e[1])],[Math.max(t.points[0][0],e[0]),Math.max(t.points[0][1],e[1])],[Math.min(t.points[0][0],e[0]),Math.max(t.points[0][1],e[1])]]}}),null!=t&&t.points.map((e,t)=>r.a.createElement("circle",{key:t,cx:e[0],cy:e[1],className:yl.a.circle})))}const Il=Object(l.createContext)();function wl({targetRef:e,selected:t=!0}){const a=Object(s.Ib)(),n=La(),l=ml();return Object(s.wb)(()=>{if(t){var n,r,o;const t=null!==(n=null===(r=a.options.panelsSizes)||void 0===r||null===(o=r.find(e=>"viewer-dashboard-details-new"===e.name))||void 0===o?void 0:o.size)&&void 0!==n?n:0,i=e.current.getBoundingClientRect(),c=l.contentRef.current.getBoundingClientRect(),s=l.svgRef.current.getBoundingClientRect(),d=window.innerHeight-c.height>100?c.height:c.height-t,m=s.x-i.x+c.width/2,u=s.y-i.y+d/2;l.move({x:m,y:u})}},[n.centeredEquipmentId]),null}var Ol=a("T7aC"),kl=a.n(Ol);function Cl(){return(Cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function jl({targetRef:e,point:t,clickable:a,selected:n,className:o,children:i,...c}){const d=ml(),m=Object(l.useRef)(),[u,p]=Object(l.useState)({left:0,top:0}),E=Ee()(kl.a.tooltip,{[kl.a.isClickable]:a,[kl.a.isSelected]:n},o);return Object(l.useLayoutEffect)(()=>{!function(){if(null!=d.tooltipsRef.current){const t=d.tooltipsRef.current.getBoundingClientRect(),a=e.current.getBoundingClientRect(),n=m.current.getBoundingClientRect(),l=a.left+a.width/2-n.width/2-t.left,r=a.top-n.height-t.top;p({left:l,top:r})}}()},[d.x,d.y,d.zoom,t,i]),r.a.createElement(s.R,{target:d.tooltipsRef.current},r.a.createElement("div",Cl({ref:m},c,{className:E,style:u}),i))}function Nl({item:e}){return null==e.rawData?"-":"Bool"!==e.unit||0!==e.rawData.value&&1!==e.rawData.value?r.a.createElement(s.db,{type:"value"},r.a.createElement(s.K,{value:e.rawData.value,format:"0.[00]"}),r.a.createElement("span",null," ",e.unit)):r.a.createElement(s.db,{type:"value"},0===e.rawData.value?"Off":"On")}var xl=a("HISs"),Ml=a.n(xl);function zl(){return(zl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Al({type:e="normal",equipment:t,clickable:a,selected:n,className:o,onPointerDown:i,onClick:c,...d}){const m=La(),u=Object(l.useRef)(),p=Object(l.useContext)(Il),E=t.pointTags.filter(e=>m.selectedDataPointIds.includes(e.id)).map(e=>{const a=null==p?void 0:p.data.find(t=>{var a;return t.layerId===(null===(a=e.layer)||void 0===a?void 0:a.id)});return{...e,layer:null!=e.layer?{...e.layer,item:null!=(null==a?void 0:a.data)?{...a,data:a.data.filter(e=>e.equipmentId===t.id)}:a}:e.layer}});let h;1===t.priority&&(h="red"),2===t.priority&&(h="orange"),3===t.priority&&(h="yellow");const f="details"===e&&E.length>0,g=Ee()(Ml.a.equipment,{[Ml.a.isClickable]:a,[Ml.a.isSelected]:n,[Ml.a.colorRed]:"red"===h,[Ml.a.colorOrange]:"orange"===h,[Ml.a.colorYellow]:"yellow"===h},o),b=Ee()(Ml.a.tooltip,{[Ml.a.isContentSelected]:n,[Ml.a.isSelected]:n,[Ml.a.showDetails]:f,[Ml.a.colorRed]:"red"===h,[Ml.a.colorOrange]:"orange"===h,[Ml.a.colorYellow]:"yellow"===h});return r.a.createElement(r.a.Fragment,null,r.a.createElement("circle",zl({ref:u,cx:t.points[0][0],cy:t.points[0][1]},d,{className:g,onPointerDown:i,onClick:c})),r.a.createElement(wl,{targetRef:u,selected:n}),r.a.createElement(jl,{targetRef:u,point:t.points,clickable:a,selected:n,className:b,onPointerDown:i,onClick:c},r.a.createElement(s.W,{horizontal:!0,align:"middle",size:"small",padding:"medium",className:Ml.a.header},m.isReadOnly&&null!=h&&r.a.createElement(s.C,{icon:"error",color:"white","data-tooltip":"Priority "+t.priority}),r.a.createElement(s.db,{type:"h3"},t.name)),f&&r.a.createElement(s.W,{size:"medium",padding:"medium",className:Ml.a.content},E.map(e=>{var t,a,n,l,o,i;return r.a.createElement(s.W,{key:e.id,size:"tiny"},r.a.createElement(s.db,{type:"label",color:"light"},e.name),null!=(null===(t=e.layer)||void 0===t||null===(a=t.item)||void 0===a?void 0:a.data)&&r.a.createElement(s.W,null,e.layer.item.data.map(e=>r.a.createElement(s.W,{key:e.pointEntityId,horizontal:!0},r.a.createElement(s.C,{icon:"corner",className:Ml.a.corner}),r.a.createElement(Nl,{item:e})))),null==(null===(n=e.layer)||void 0===n||null===(l=n.item)||void 0===l?void 0:l.data)&&!0===(null===(o=e.layer)||void 0===o||null===(i=o.item)||void 0===i?void 0:i.error)&&r.a.createElement(s.W,{align:"center"},r.a.createElement(s.C,{icon:"error",color:null!=h?"white":void 0,size:"small"})))}))))}function Sl(){var e,t;const a=La(),n=ml(),[o,i]=Object(l.useState)(),[c,d]=Object(l.useState)(),[m,u]=Object(l.useState)(!1);return Object(s.Jb)("keydown",e=>{"Shift"===e.key&&(null!=o&&i(n.getClosestPoint(o)),u(!0))}),Object(s.Jb)("keyup",e=>{"Shift"===e.key&&u(!1)}),Object(s.xb)(n.svgRef,"pointermove",e=>{const t=100/n.zoom,a=e.currentTarget.getBoundingClientRect();let l=(e.clientX-a.left)*t,r=(e.clientY-a.top)*t;if(null!=c&&null!=o){const e=c.points[0];Math.abs(e[0]-l)<5&&Math.abs(e[1]-r)<5&&([l,r]=e)}l=+l.toFixed(0),r=+r.toFixed(0),i(m?n.getClosestPoint([l,r]):[l,r])}),Object(s.xb)(n.svgRef,"pointerleave",()=>{i()}),r.a.createElement(r.a.Fragment,null,null===(e=a.layerGroup)||void 0===e?void 0:e.zones.map(e=>r.a.createElement(gl,{key:e.localId,zone:e})),null===(t=a.layerGroup)||void 0===t?void 0:t.equipments.map(e=>r.a.createElement(Al,{key:e.localId,equipment:e})),r.a.createElement(vl,{mouse:o,zone:c,setZone:d}),r.a.createElement(pl,{mouse:o}))}var ql=a("sqAZ"),Wl=a.n(ql);function Ll(){const e=La(),t=ml(),a=el(),[n,o]=Object(l.useState)(),[i,c]=Object(l.useState)(!1);Object(s.Jb)("keydown",e=>{"Shift"===e.key&&(null!=n&&o(t.getClosestPoint(n)),c(!0))}),Object(s.Jb)("keyup",e=>{"Shift"===e.key&&c(!1)}),Object(s.xb)(t.svgRef,"pointermove",e=>{const a=100/t.zoom,n=e.currentTarget.getBoundingClientRect();let l=(e.clientX-n.left)*a,r=(e.clientY-n.top)*a;l=+l.toFixed(0),r=+r.toFixed(0),o(i?t.getClosestPoint([l,r]):[l,r])});const d=Math.min(...a.copiedZone.points.map(e=>e[0])),m=Math.min(...a.copiedZone.points.map(e=>e[1])),u=null!=n?{...a.copiedZone,points:a.copiedZone.points.map(e=>[e[0]-d+n[0],e[1]-m+n[1]])}:a.copiedZone;return Object(s.xb)(t.svgRef,"click",()=>{e.addZone(u)}),Object(s.Jb)("keydown",e=>{"Escape"===e.key&&a.setCopiedZone()}),r.a.createElement(gl,{zone:u,className:Wl.a.zone})}function Dl({equipment:e}){const t=el();return r.a.createElement(Al,{equipment:e,clickable:!0,selected:t.selectedObject===e,onPointerDown:a=>{0===a.button&&(a.stopPropagation(),t.selectObject(e))},onClick:e=>e.stopPropagation()})}function Zl({zone:e}){const t=ml(),a=el(),n=a.selectedObject===e,o=Ee()(Wl.a.zone,{[Wl.a.selected]:n,[Wl.a.move]:n&&null==a.selectedPointIndex}),i=Object(s.Cb)(e=>{const n=100/t.zoom;let l=e.diffClientX*n,r=e.diffClientY*n;l=+l.toFixed(0),r=+r.toFixed(0),a.moveObject(e.selectedObject,l,r)}),c=Object(s.ub)({onDown:e=>({...e,selectedObject:M.a.cloneDeep(a.selectedObject),x:t.x,y:t.y}),onMove:e=>i(e)});return r.a.createElement(l.Fragment,{key:e.localId},r.a.createElement(gl,{zone:e,className:o,onPointerDown:t=>{0===t.button&&(n&&null==a.selectedPointIndex?null==a.selectedPointIndex&&c.onPointerDown(t):a.selectObject(e))},onClick:e=>e.stopPropagation()}),a.selectedObject===e&&r.a.createElement(r.a.Fragment,null,e.points.map((e,t)=>r.a.createElement("circle",{key:t,cx:e[0],cy:e[1],className:Ee()(Wl.a.point,{[Wl.a.selected]:a.selectedPointIndex===t}),onPointerDown:e=>{0===e.button&&a.selectPointIndex(t)},onClick:e=>e.stopPropagation()}))))}function Pl(){var e,t;const a=La(),n=el();return Object(s.Jb)("click",e=>{0===e.button&&n.selectObject()}),Object(s.Jb)("keydown",e=>{null!=n.selectedObject&&("ArrowLeft"===e.key&&n.moveObject(n.selectedObject,-1,0),"ArrowRight"===e.key&&n.moveObject(n.selectedObject,1,0),"ArrowUp"===e.key&&n.moveObject(n.selectedObject,0,-1),"ArrowDown"===e.key&&n.moveObject(n.selectedObject,0,1))}),r.a.createElement(r.a.Fragment,null,null===(e=a.layerGroup)||void 0===e?void 0:e.zones.map(e=>r.a.createElement(Zl,{key:e.localId,zone:e})),null===(t=a.layerGroup)||void 0===t?void 0:t.equipments.map(e=>r.a.createElement(Dl,{key:e.localId,equipment:e})),null!=n.copiedZone&&r.a.createElement(Ll,null))}var _l=a("/M+F"),Rl=a.n(_l),Tl=a("HMpR"),Fl=a.n(Tl);function Gl(){return(Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function $l({name:e,header:t,className:a,children:n,...o}){const i=Object(s.Ib)(),[c,d]=Object(l.useState)(()=>{var t;return null==e||(null===(t=i.options["floating-panel-section-"+e])||void 0===t||t)});Object(s.wb)(()=>{i.saveUserOptions("floating-panel-section-"+e,c)},[c]);const m=Ee()(Fl.a.floatingPanelSection,{[Fl.a.isOpen]:c},a);return r.a.createElement(s.W,Gl({},o,{className:m}),r.a.createElement(s.f,{className:Fl.a.header,onClick:()=>d(e=>!e)},r.a.createElement(s.W,{padding:"0 tiny",width:"100%"},r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",size:"medium",padding:"medium"},r.a.createElement(s.db,{type:"h4",color:c?"light":"text"},t),r.a.createElement(s.C,{icon:"chevron",className:Fl.a.chevron})))),c&&n)}var Ul=a("ggaf"),Bl=a.n(Ul);function Xl(){return(Xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Vl({className:e,children:t,...a}){const n=Ee()(Bl.a.floatingPanelFooter,e);return r.a.createElement(s.W,Xl({align:"right"},a,{className:n}),t)}function Hl(){return(Hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Yl({name:e,header:t,className:a,children:n,...o}){const i=Object(s.Ib)(),[c,d]=Object(l.useState)(()=>{var t;return null==e||(null===(t=i.options["floating-panel-"+e])||void 0===t||t)});Object(s.wb)(()=>{i.saveUserOptions("floating-panel-"+e,c)},[c]);const m=Ee()(Rl.a.floatingPanel,{[Rl.a.isOpen]:c},a);return r.a.createElement(s.W,Hl({},o,{className:m}),r.a.createElement(s.W,{type:"content"},r.a.createElement(s.f,{className:Rl.a.header,onClick:function(){d(e=>!e)}},r.a.createElement(s.W,{horizontal:!0,type:"header",align:"middle",width:"100%",padding:"0 0 0 tiny"},r.a.createElement(s.db,{type:"h3",selected:c},t),r.a.createElement(s.C,{icon:"chevron",className:Rl.a.chevron}))),r.a.createElement("div",{className:Rl.a.content},n)))}var Jl=a("vfd9"),Kl=a.n(Jl);function Ql(){return(Ql=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function er({selected:e,className:t,children:a,...n}){const o=Object(s.Hb)(),i=Object(l.useRef)(),[c,d]=Object(l.useState)({status:e?"opened":"closed",style:{maxHeight:e?"none":0}});Object(s.wb)(()=>{e&&d({status:"opening",style:{maxHeight:i.current.scrollHeight}}),e||(d({status:"closing",style:{maxHeight:i.current.scrollHeight}}),o.requestAnimationFrame(()=>{d({status:"closing",style:{maxHeight:0}})}))},[e]);const m=Ee()(Kl.a.slide,t);return r.a.createElement("div",Ql({},n,{ref:i,className:m,style:c.style,onTransitionEnd:()=>{"opening"===c.status?d({status:"opened",style:{maxHeight:"none"}}):"closing"===c.status&&d({status:"closed",style:{maxHeight:0}})}}),a)}var tr=a("h6S+"),ar=a.n(tr);function nr(){return(nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function lr({header:e,isVisible:t,priority:a,selected:n,className:l,children:o,onClick:i,onVisibilityClick:c,onChange:d,...m}){const u=La(),p="view"===u.mode||null==d;let E;1===a&&(E="red"),2===a&&(E="orange"),3===a&&(E="yellow");const h=Ee()(ar.a.accordion,{[ar.a.isReadOnly]:p,[ar.a.selected]:n},l);return r.a.createElement("div",nr({},m,{className:h}),r.a.createElement(s.f,{className:ar.a.button,preventDefault:!1,onClick:i},r.a.createElement(s.W,{padding:"medium 0 medium medium"},r.a.createElement(s.C,{icon:"chevronFill",className:ar.a.chevron})),u.isReadOnly&&r.a.createElement(s.W,{padding:"0 0 0 medium",onClick:e=>{e.stopPropagation(),c()}},r.a.createElement(s.C,{icon:t?"eyeOpen":"eyeClose",size:"small"})),r.a.createElement("input",{type:"text",value:e,readOnly:p,placeholder:"Layer name",className:ar.a.input,onClick:e=>{"view"!==u.mode&&n&&e.stopPropagation()},onKeyUp:e=>e.preventDefault(),onChange:e=>d(e.target.value)}),u.isReadOnly&&null!=E&&r.a.createElement(s.W,{padding:"medium"},r.a.createElement(s.C,{icon:"error",color:E}))),r.a.createElement(er,{selected:n},o))}var rr=a("a7LG"),or=a.n(rr);function ir(){const e=Object(c.i)(),t=La();return r.a.createElement(r.a.Fragment,null,!t.floorLayer.hasLoaded&&r.a.createElement(s.s,{url:`/api/sites/${e.siteId}/floors`,params:{hasBaseModule:!1},loader:r.a.createElement(s.W,{align:"center",padding:"medium",className:or.a.loader},r.a.createElement(s.C,{icon:"progress"})),error:r.a.createElement(s.W,{align:"center",padding:"medium",className:or.a.error},r.a.createElement(s.H,{icon:"error"},"Error loading floor layer")),onResponse:e=>{const a=e.find(e=>e.id===t.floorId);let n=[];try{n=JSON.parse(a.geometry),M.a.isArray(n)||(n=[])}catch(e){}t.setFloorLayerGeometry(n)}}),t.floorLayer.hasLoaded&&r.a.createElement(lr,{header:t.floorLayer.name,selected:t.layerGroup===t.floorLayer,onClick:()=>t.selectLayerGroup(t.floorLayer)},r.a.createElement(s.W,{padding:"0 tiny"},r.a.createElement(s.W,{padding:"medium"},r.a.createElement(s.db,{type:"value"},"Floor outline")))))}var cr=a("s+M6"),sr=a.n(cr);function dr({image:e,onDeleteClick:t}){const a=La(),n=Ee()(sr.a.imageLayer,{[sr.a.isFirst]:e.isFirst,[sr.a.modeView]:a.isReadOnly,[sr.a.hidden]:!e.canBeDeleted});return r.a.createElement(s.W,{horizontal:!0,type:"content",overflow:"hidden",className:n},r.a.createElement(s.f,{icon:e.isVisible?"eye-open":"eye-close",iconSize:"small",disabled:e.isFirst,className:sr.a.toggle,onClick:()=>a.toggleImage(e.id)}),r.a.createElement("input",{value:e.typeName,readOnly:!0,className:sr.a.input}),r.a.createElement(s.f,{icon:"close",iconSize:"small",disabled:a.isReadOnly||!e.canBeDeleted,className:sr.a.delete,onClick:t}))}var mr=a("b1T3"),ur=a.n(mr);function pr({layerGroup:e}){const t=La(),a=M()(e.equipments).flatMap(e=>e.pointTags).uniqBy(e=>e.id).value(),n=M()(e.equipments).map(e=>e.priority).filter(e=>e>0).orderBy(e=>e).value()[0];return r.a.createElement(lr,{header:e.name,isVisible:t.isLayerGroupVisible(e),priority:n,selected:t.layerGroup===e,onClick:()=>t.selectLayerGroup(e),onVisibilityClick:()=>t.toggleIsVisible(e),onChange:a=>t.setLayerGroupName(e,a)},r.a.createElement(s.W,{className:ur.a.content},r.a.createElement(s.db,{type:"label"},"Data Points"),r.a.createElement(s.W,{horizontal:!0,type:"wrap",size:"tiny",padding:"small 0"},a.map(e=>{const a="view"===t.mode&&t.isReadOnly,n="view"===t.mode&&t.selectedDataPointIds.includes(e.id);return r.a.createElement(s.Q,{key:e.id,color:a&&n?"green":void 0,onClick:a?()=>t.selectDataPoint(e):void 0},e.name)}),0===e.equipments.length&&r.a.createElement(s.W,{align:"center",width:"100%"},"-"))),!t.isReadOnly&&r.a.createElement(s.W,{align:"right"},r.a.createElement(s.f,{icon:"trash",iconSize:"small",onClick:()=>t.deleteLayerGroup(e)})))}function Er({image:e,onClose:t}){const a=La();return r.a.createElement(s.T,{header:"Delete item",onSubmitted:function(t){t.close(!0),a.removeImage(e.id)},onClose:t},"Are you sure you want to delete",r.a.createElement(s.W,{align:"center"},r.a.createElement(s.db,{whiteSpace:"normal"},'"',e.name,'"')))}var hr=a("ocZb"),fr=a.n(hr);function gr({onClose:e}){const t=Object(c.i)(),a=Object(s.rb)(),n=Object(s.yb)(),l=La();function o(e){return a.post(`/api/sites/${t.siteId}/floors/${l.floorId}/2dmodules`,{files:e.data.files},{headers:{"Content-Type":"multipart/form-data"}})}return r.a.createElement(s.I,{header:"Add floor images",onClose:e},e=>r.a.createElement(s.z,{onSubmit:o,onSubmitted:()=>function(e){e.close(),n("floor")}(e)},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.v,{name:"files",align:"center",showError:!0,buttonClassName:fr.a.filesSelectButton,buttonContentClassName:fr.a.filesSelectButtonContent,contentClassName:fr.a.filesSelectContent},r.a.createElement(s.W,{align:"center middle"},r.a.createElement(s.C,{icon:"image",className:fr.a.icon}),r.a.createElement(s.db,{type:"h3"},"Add Images"),r.a.createElement(s.db,{type:"label"},"Add more floor images.")))),r.a.createElement(s.y,null,"Add floor images"))))}var br=a("Kww/"),yr=a.n(br);function vr(){const e=La(),[t,a]=Object(l.useState)(!1),[n,o]=Object(l.useState)(),i=e.layerGroups.filter(e=>"floor_layer"!==e.id);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.W,{padding:"medium",className:yr.a.toolbar},r.a.createElement(Yl,{name:"layers",header:"Layers"},r.a.createElement(s.W,{size:"medium",padding:"medium"},r.a.createElement($l,{name:"levelImages",header:"Level images"},e.modules2D.map(e=>r.a.createElement(dr,{key:e.id,image:e,onDeleteClick:()=>o(e)})),!e.isReadOnly&&r.a.createElement(Vl,null,r.a.createElement(s.f,{icon:"add",size:"small",onClick:()=>a(!0)}))),r.a.createElement($l,{name:"zoneLayers",header:"Zone layers"},i.map(e=>r.a.createElement(pr,{key:e.localId,layerGroup:e})),!e.isReadOnly&&r.a.createElement(ir,null),0===i.length&&e.isReadOnly&&r.a.createElement(s.J,null,"No zone layers"),!e.isReadOnly&&r.a.createElement(Vl,null,r.a.createElement(s.f,{icon:"add",size:"small",onClick:()=>e.addLayerGroup()})))))),t&&r.a.createElement(gr,{onClose:()=>a(!1)}),null!=n&&r.a.createElement(Er,{image:n,onClose:()=>o()}))}function Ir({children:e}){const t=Object(c.i)(),a=La(),[n,o]=Object(l.useState)([]),i=a.visibleLayerGroups.flatMap(e=>M()(e.equipments).flatMap(e=>e.pointTags.filter(e=>a.selectedDataPointIds.includes(e.id)).filter(e=>null!=e.layer)).uniqBy(e=>e.id).map(t=>({...t,layerGroupId:e.id})).value());const d={data:n};return r.a.createElement(Il.Provider,{value:d},e,a.isReadOnly&&i.map(e=>r.a.createElement(l.Fragment,{key:`${e.layerGroupId} ${e.id}`},r.a.createElement(s.j,{onMount:()=>{return t=e.layer.id,o(e=>[...e,{layerId:t}]),()=>{o(e=>e.filter(e=>e.layerId!==t))};var t}}),r.a.createElement(s.s,{url:`/api/sites/${t.siteId}/floors/${a.floorId}/layerGroup/${e.layerGroupId}/layers/${e.layer.id}/points/livedata`,poll:12e4,loader:null,error:null,onResponse:t=>{return a=e.layer.id,n=t,void o(e=>e.some(e=>e.layerId===a)?e.map(e=>e.layerId===a?{...e,data:n,error:!1}:e):[...e,{layerId:a,data:n}]);var a,n},onError:()=>{return t=e.layer.id,void o(e=>e.map(e=>e.layerId===t?{...e,error:!0}:e));var t}}))))}function wr({asset:e}){const t=La();return Object(l.useEffect)(()=>{var a;2===(null===(a=e.geometry)||void 0===a?void 0:a.length)&&t.hideLayerGroups()},[]),null}var Or=a("tJ8s"),kr=a.n(Or);function Cr({asset:e}){var t;const a=La(),n=Object(l.useRef)();function o(t){0===t.button&&a.isReadOnly&&a.selectAsset(e)}return Object(l.useEffect)(()=>{a.centerEquipmentId(e.id)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("circle",{ref:n,cx:e.geometry[0],cy:e.geometry[1],className:kr.a.asset,onPointerDown:o}),r.a.createElement(wl,{targetRef:n}),r.a.createElement(wr,{asset:e}),r.a.createElement(jl,{targetRef:n,point:e.geometry,clickable:a.isReadOnly,selected:e.id===(null===(t=a.selectedAsset)||void 0===t?void 0:t.id),onPointerDown:o},r.a.createElement(s.W,{padding:"medium"},r.a.createElement(s.db,{type:"label"},e.identifier),r.a.createElement(s.db,{type:"h3"},e.name))))}function jr(){var e;const t=La();return r.a.createElement(Ir,null,t.visibleLayerGroups.flatMap(e=>e.zones).map(e=>r.a.createElement(gl,{key:e.localId,zone:e})),t.visibleLayerGroups.flatMap(e=>e.equipments.filter(e=>0===t.selectedDataPointIds.length||e.pointTags.some(e=>t.selectedDataPointIds.includes(e.id))).map(e=>r.a.createElement(Al,{key:e.localId,type:t.isReadOnly?"details":void 0,equipment:e,clickable:t.isReadOnly,selected:e.id===t.selectedEquipmentId,onPointerDown:a=>{0===a.button&&t.isReadOnly&&(t.selectEquipmentId(e.id),t.centerEquipmentId(e.id))}}))),2===(null===(e=t.selectedAsset)||void 0===e?void 0:e.geometry.length)&&r.a.createElement(Cr,{key:t.selectedAsset.id,asset:t.selectedAsset}))}var Nr=a("Vz7R"),xr=a.n(Nr);function Mr({value:e=0,values:t,className:a,onChange:n=(()=>{})}){var o,i;const c=Object(l.useRef)(),d=t.map((e,a)=>({value:e,percentage:100*a/(t.length-1)})),m=null!==(o=null===(i=d.find(t=>t.value===e))||void 0===i?void 0:i.percentage)&&void 0!==o?o:0,u=Ee()(xr.a.range,a);return r.a.createElement(s.W,{horizontal:!0,size:"small",className:u},r.a.createElement(s.f,{icon:"remove",iconSize:"small",size:"tiny",disabled:e===t[0],className:xr.a.minus,onClick:function(){var a;const l=null!==(a=[...t].reverse().find(t=>t<e))&&void 0!==a?a:t[0];n(l)}}),r.a.createElement(s.m,{moveOnDown:!0,onDown:function(e){return{...e,startTrackX:c.current.getBoundingClientRect().left}},onMove:function(e){const t=100*(e.clientX-e.startTrackX)/c.current.offsetWidth,a=d.map((e,t)=>{const a=d[t-1],n=d[t+1];return{...e,minPercentage:null!=a?e.percentage+(a.percentage-e.percentage)/2:e.percentage,maxPercentage:null!=n?e.percentage+(n.percentage-e.percentage)/2:e.percentage}});let l=a.find(e=>t>=e.minPercentage&&t<=e.maxPercentage);null==l&&(l=t<0?a[0]:a.slice(-1)[0]),n(l.value)},className:xr.a.drag},e=>r.a.createElement("div",{ref:c,className:xr.a.track,onPointerDown:e.onPointerDown},r.a.createElement("div",{className:xr.a.trackCenter},r.a.createElement("div",{className:xr.a.highlightedTrack,style:{width:m+"%"}}),r.a.createElement(s.f,{className:xr.a.point,style:{left:m+"%"}})))),r.a.createElement(s.f,{icon:"add",iconSize:"small",size:"tiny",disabled:e===t.slice(-1)[0],className:xr.a.plus,onClick:function(){var a;const l=null!==(a=t.find(t=>t>e))&&void 0!==a?a:t.slice(-1)[0];n(l)}}))}var zr=a("yIbG"),Ar=a.n(zr);function Sr(){const e=La(),t=ml();ul();const a=function(){const e=La(),t=ml(),a=Object(s.ub)({onDown:e=>({...e,x:t.x,y:t.y}),onMove(e){t.move({x:e.x+e.diffClientX,y:e.y+e.diffClientY})}});return Object(s.xb)(t.contentRef,"pointerdown",t=>2===t.button||"view"===e.mode?a.onPointerDown(t):null),{isDragging:a.isDragging}}(),n=function(){const e=ml();function t(t,a,n){if(e.zoom===n)return;const l=n/100/(e.zoom/100),r=(e.x-t)*l+t,o=(e.y-a)*l+a;e.move({x:r,y:o,zoom:n})}return Object(s.xb)(e.contentRef,"wheel",a=>{const n=e.contentRef.current.getBoundingClientRect(),l=a.clientX-n.x,r=a.clientY-n.y;if(a.deltaY<0){var o;t(l,r,null!==(o=e.zoomLevels.find(t=>t>e.zoom))&&void 0!==o?o:e.zoomLevels.slice(-1)[0])}else{var i;t(l,r,null!==(i=[...e.zoomLevels].reverse().find(t=>t<e.zoom))&&void 0!==i?i:e.zoomLevels[0])}}),{zoomAtCenter(a){t(e.contentRef.current.offsetWidth/2,e.contentRef.current.offsetHeight/2,a)}}}(),l=Ee()(Ar.a.editorContent,{[Ar.a.view]:"view"===e.mode,[Ar.a.create]:"create"===e.mode});return r.a.createElement(s.W,{type:"content",overflow:"hidden",className:l},r.a.createElement(vr,null),r.a.createElement("div",{ref:t.contentRef,className:Ar.a.content,onContextMenu:e=>e.preventDefault()},r.a.createElement("svg",{ref:t.svgRef,width:e.width,height:e.height,viewBox:`0 0 ${e.width} ${e.height}`,className:Ar.a.svg,style:{transform:`matrix(${t.zoom/100}, 0, 0, ${t.zoom/100}, ${t.x}, ${t.y})`}},e.modules2D.map(e=>r.a.createElement("image",{key:e.id,href:e.url,className:Ee()(Ar.a.image,{[Ar.a.visible]:e.isVisible})})),"view"===e.mode&&r.a.createElement(jr,null),"create"===e.mode&&r.a.createElement(Sl,null),"edit"===e.mode&&r.a.createElement(Pl,null)),r.a.createElement("div",{ref:t.tooltipsRef,className:Ar.a.tooltips})),r.a.createElement(s.W,{align:"center",className:Ar.a.rangeContainer},r.a.createElement(Mr,{value:t.zoom,values:t.zoomLevels,className:Ar.a.range,onChange:n.zoomAtCenter})),a.isDragging&&r.a.createElement(s.d,{className:Ar.a.blocker}))}var qr=a("SYKD"),Wr=a.n(qr);function Lr(){const e=La();return e.isReadOnly?e.floorName:r.a.createElement("input",{type:"text",value:e.floorName,className:Wr.a.input,onChange:function(t){e.updateName(t.currentTarget.value)}})}function Dr(){return(Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Zr(e){var t,a,n;const o=La(),[i,c]=Object(l.useState)(),[s,d]=Object(l.useState)(),[m,u]=Object(l.useState)();Object(l.useEffect)(()=>{c(),d(),u()},[o.mode]);const p={selectedObject:null!==(t=null===(a=o.layerGroup)||void 0===a?void 0:a.zones.find(e=>e.localId===i))&&void 0!==t?t:null===(n=o.layerGroup)||void 0===n?void 0:n.equipments.find(e=>e.localId===i),selectedPointIndex:s,copiedZone:m,setCopiedZone:u,selectObject(e){null==m&&(c(t=>null==e||t===e.localId&&null==s?void 0:e.localId),d())},selectPointIndex(e){null==m&&d(t=>t!==e?e:void 0)},moveObject(e,t,a){let n={...e,points:e.points.map((e,n)=>null!=s?s===n?[e[0]+t,e[1]+a]:e:[e[0]+t,e[1]+a]).map(e=>[+e[0].toFixed(0),+e[1].toFixed(0)])};if(null==s){const e=Math.min(...n.points.map(e=>e[0]),0),t=Math.min(...n.points.map(e=>e[1]),0),a=Math.max(...n.points.map(e=>e[0]),o.width)-o.width,l=Math.max(...n.points.map(e=>e[1]),o.height)-o.height;n={...n,points:n.points.map(n=>[n[0]-e-a,n[1]-t-l])}}n.points.every(e=>e[0]>=0&&e[0]<=o.width&&e[1]>=0&&e[1]<=o.height)&&o.updateObject(n)}};return r.a.createElement(Qn.Provider,Dr({},e,{value:p}))}var Pr=a("Enyl"),_r=a.n(Pr);function Rr({layer:e,isSelected:t,iframeRef:a,onClick:n,onDeselect:l,onDeleteClick:o}){const i=La();return Object(s.wb)(()=>{var n;const r=null===(n=a.current)||void 0===n?void 0:n.contentWindow;var o;t?null!=(null==r?void 0:r.loadModule)&&null!=e.url?null==r||r.loadModule(e.url):l():null==r||null===(o=r.unloadModule)||void 0===o||o.call(r,e.url)},[t]),r.a.createElement(s.W,{horizontal:!0,type:"content",overflow:"hidden"},r.a.createElement(s.f,{icon:t?"eye-open":"eye-close",iconSize:"small",onClick:()=>n(!t)}),r.a.createElement("input",{value:e.typeName,readOnly:!0,className:_r.a.input}),!i.isReadOnly&&!1)}class Tr extends Error{constructor(e){super("An error has occurred"),this.response=e}}var Fr=a("mt16"),Gr=a.n(Fr);function $r({onClose:e}){const t=Object(c.i)(),a=Object(s.yb)(),n=La(),[o,i]=Object(l.useState)();function d(e){return new Promise((a,l)=>{const r="/"+s.ob.get("api");if(0===e.data.files.length)throw new s.lb({name:"files",message:"Files must be given"});const o=new FormData;e.data.files.forEach(e=>{o.append("files",e)});const c=new XMLHttpRequest;c.upload.addEventListener("progress",e=>{i(e.loaded/e.total*100)},!1),c.addEventListener("load",()=>{if((null==c?void 0:c.status)>=200&&(null==c?void 0:c.status)<300)a();else{let e;try{e=JSON.parse(null==c?void 0:c.response)}catch(e){}i(),l(new Tr({status:null==c?void 0:c.status,data:e}))}}),c.addEventListener("error",()=>{i(),l()}),c.open("POST",`${r}/api/sites/${t.siteId}/floors/${n.floorId}/3dmodules`),c.send(o)})}return r.a.createElement(s.I,{header:"Add model",onClose:e},e=>r.a.createElement(s.z,{onSubmit:d,onSubmitted:()=>function(e){e.close(),a("floor")}(e)},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.v,{accept:".nwd",name:"files",align:"center",showError:!0,buttonClassName:Gr.a.filesSelectButton,buttonContentClassName:Gr.a.filesSelectButtonContent,contentClassName:Gr.a.filesSelectContent},r.a.createElement(s.W,{align:"center middle"},r.a.createElement(s.C,{icon:"image",className:Gr.a.icon}),r.a.createElement(s.db,{type:"h3"},"Add Models"),r.a.createElement(s.db,{type:"label"},"Add more floor models."))),null!=o&&r.a.createElement("span",{className:Gr.a.progress,style:{width:o+"%"}})),r.a.createElement(s.y,null,"Add floor models"))))}function Ur({layer:e,onClose:t}){return r.a.createElement(s.T,{header:"Delete model",onSubmitted:function(e){e.close(!0)},onClose:t},"Are you sure you want to delete",r.a.createElement(s.W,{align:"center"},r.a.createElement(s.db,{whiteSpace:"normal"},'"',e.name,'"')))}var Br=a("1Lox"),Xr=a.n(Br);function Vr({header:e,children:t}){const a=Object(s.Ib)(),[n,o]=Object(l.useState)(()=>{var t;return null==e||(null===(t=a.options["toolbar-group-"+e])||void 0===t||t)});Object(s.wb)(()=>{a.saveUserOptions("toolbar-group-"+e,n)},[n]);const i=Ee()(Xr.a.group,{[Xr.a.isOpen]:n});return r.a.createElement("div",{className:i},r.a.createElement(s.f,{className:Xr.a.button,onClick:()=>o(e=>!e)},r.a.createElement("div",{className:Xr.a.chevron},r.a.createElement(s.C,{icon:"chevronFill",className:Xr.a.chevronIcon})),r.a.createElement("div",{className:Xr.a.header},e)),r.a.createElement("div",{className:Xr.a.content},t))}var Hr=a("3DdC"),Yr=a.n(Hr);function Jr({iframeRef:e}){const t=Object(s.Gb)(),a=La(),[n,o]=Object(l.useState)(!1),[i,c]=Object(l.useState)([]),[d,m]=Object(l.useState)();function u(e){c(t=>t.filter(t=>t!==e))}Object(l.useEffect)(()=>{window.deselectLayer=e=>{const n=a.modules3D.find(t=>t.url===e);null!=n&&(t.show(`Error loading 3d model "${n.name}"`),u(n.id))}},[]);const p=M()(a.modules3D).orderBy(e=>e.sortOrder).groupBy(e=>e.groupType).value();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.W,{padding:"medium",className:Yr.a.toolbar},r.a.createElement(Yl,{name:"layers",header:"Layers"},r.a.createElement(s.W,{size:"medium",padding:"medium"},r.a.createElement($l,{name:"levelImages",header:"Level images"},M.a.map(p,(t,a)=>r.a.createElement(Vr,{key:a,header:a},t.map(t=>r.a.createElement(Rr,{key:t.id,layer:t,isSelected:i.includes(t.id),iframeRef:e,onClick:()=>{return e=t.id,void c(t=>M.a.xor(t,[e]));var e},onDeselect:()=>u(t.id),onDeleteClick:()=>m(t)})))),0===a.modules3D.length&&r.a.createElement(s.J,null,"No layers found"),!a.isReadOnly&&r.a.createElement(Vl,null,r.a.createElement(s.f,{icon:"add",size:"small",onClick:()=>o(!0)})))))),n&&r.a.createElement($r,{onClose:()=>o(!1)}),null!=d&&r.a.createElement(Ur,{layer:d,onClose:()=>m()}))}function Kr({iframeRef:e}){const t=La();return Object(l.useEffect)(()=>{var a,n,l,r;null===(a=e.current)||void 0===a||null===(n=a.contentWindow)||void 0===n||null===(l=n.selectAsset)||void 0===l||l.call(n,null===(r=t.selectedAsset)||void 0===r?void 0:r.forgeViewerModelId)},[t.selectedAsset]),r.a.createElement(Jr,{iframeRef:e})}var Qr=a("CErF"),eo=a.n(Qr);function to(){const e=Object(l.useRef)(),[t,a]=Object(l.useState)(!1);return r.a.createElement(s.W,{type:"header",height:"100%",position:"relative"},r.a.createElement("iframe",{ref:e,title:"3d",src:"/public/3d.html",className:eo.a.iframe,onLoad:()=>a(!0)}),t&&r.a.createElement(Kr,{iframeRef:e}))}function ao(){const e=La(),t=Object(l.useRef)(),a=Object(l.useRef)(),n=Object(l.useRef)(),[o,i]=Object(l.useState)({x:0,y:0,zoomLevels:[]}),c={x:o.x,y:o.y,zoom:o.zoom,zoomLevels:o.zoomLevels,contentRef:t,svgRef:a,tooltipsRef:n,setZoomLevels(e){i(t=>({...t,zoomLevels:e}))},move(e){i(t=>({...t,...e}))},getClosestPoint:t=>function(e,t){var a,n,l,r,o;return null!==(a=e.layerGroup.zones.flatMap(e=>e.points).find(e=>Math.abs(e[0]-t[0])<5&&Math.abs(e[1]-t[1])<5))&&void 0!==a?a:[null!==(n=null===(l=Jn(e,t))||void 0===l?void 0:l[0])&&void 0!==n?n:t[0],null!==(r=null===(o=Kn(e,t))||void 0===o?void 0:o[1])&&void 0!==r?r:t[1]]}(e,t)};return r.a.createElement(Zr,null,r.a.createElement(dl.Provider,{value:c},r.a.createElement(s.ab,{color:"light",overflow:"hidden"},r.a.createElement(s.X,{header:r.a.createElement(Lr,null)},r.a.createElement(sl,null),e.is2d?r.a.createElement(Sr,null):r.a.createElement(to,null)))))}function no({floor:e}){var t,a;const n=Object(s.Ab)(),o=aa(),i=Object(s.Ib)(),[c,d]=Object(l.useState)(()=>{const t={...e,layerGroups:[...e.layerGroups.map(e=>({...e,localId:M.a.uniqueId(),zones:e.zones.map(e=>({id:e.id,localId:M.a.uniqueId(),points:e.geometry,equipmentIds:e.equipmentIds})),equipments:e.equipments.map(t=>({id:t.id,localId:M.a.uniqueId(),name:t.name,priority:t.priority,points:t.geometry,pointTags:t.pointTags.filter(e=>"2d"===e.feature).map(t=>({...t,layer:e.layers.find(e=>e.tagName===t.name)}))})),layers:e.layers.map(e=>({...e,localId:M.a.uniqueId()}))})),{id:"floor_layer",localId:M.a.uniqueId(),name:"Floor layer",hasLoaded:!1,zones:[],equipments:[],layers:[]}],modules2D:M()(e.modules2D).orderBy(e=>e.sortOrder).map((e,t)=>({...e,isVisible:0===t})).value()},a=t.layerGroups.filter(e=>e.equipments.some(e=>e.priority>0)).map(e=>e.id);return{floor:t,lastSavedTime:void 0,mode:void 0,selectedLayerGroupLocalId:void 0,selectedEquipmentId:s.pb.get("equipmentId"),selectedAsset:void 0,selectedDataPointIds:[],visibleLayerGroupIds:a}}),[m,u]=Object(l.useState)(),[p,E]=Object(l.useState)(!1),[h,f]=Object(l.useState)(()=>{var e;return null===(e=i.options.is2d)||void 0===e||e});Object(s.wb)(()=>{i.saveUserOptions("is2d",h)},[h]),qa({floor:c.floor,updateLayerGroup(e,t,a){function n(e){return{...e,layerGroups:e.layerGroups.map(e=>e.localId===t.localId?{...e,id:a.id,zones:e.zones.map((e,t)=>{var n;return{...e,id:null===(n=a.zones[t])||void 0===n?void 0:n.id}})}:e)}}return d(e=>{const t=n(e.floor);return{...e,floor:t}}),n(e)},onSaving(){d(e=>({...e,lastSavedTime:"loading"}))},onSaved(){d(e=>({...e,lastSavedTime:(new Date).toISOString()}))},onError(){E(!0)}});const g=c.floor.layerGroups.find(e=>e.localId===c.selectedLayerGroupLocalId);let b=c.floor.layerGroups.filter(e=>c.visibleLayerGroupIds.includes(e.id));o.isReadOnly||(b=null!=g?[g]:[]);const y={...c.floor,lastSavedTime:c.lastSavedTime,mode:null!==(t=c.mode)&&void 0!==t?t:"view",layerGroup:g,visibleLayerGroups:b,selectedEquipmentId:c.selectedEquipmentId,selectedAsset:c.selectedAsset,selectedAssetId:null===(a=c.selectedAsset)||void 0===a?void 0:a.id,selectedDataPointIds:c.selectedDataPointIds,hasChanged:!1,centeredEquipmentId:m,isReadOnly:o.isReadOnly,is2d:h,setIs2d:f,floorLayer:c.floor.layerGroups.find(e=>"floor_layer"===e.id),isLayerGroupVisible:e=>c.visibleLayerGroupIds.includes(e.id),toggleImage(e){d(t=>({...t,floor:{...t.floor,modules2D:t.floor.modules2D.map(t=>t.id===e?{...t,isVisible:!t.isVisible}:t)}}))},removeImage(e){d(t=>({...t,floor:{...t.floor,modules2D:t.floor.modules2D.filter(t=>t.id!==e)}}))},selectMode(e){d(t=>({...t,mode:t.mode!==e?e:void 0}))},selectLayerGroup(e){d(t=>({...t,selectedLayerGroupLocalId:t.selectedLayerGroupLocalId!==e.localId?e.localId:void 0}))},selectEquipmentId(e){d(t=>({...t,selectedEquipmentId:t.selectedEquipmentId!==e?e:void 0,selectedAsset:void 0}))},centerEquipmentId(e){u(t=>t!==e?e:void 0)},selectAsset(e){d(t=>{var a;return{...t,selectedAsset:(null===(a=t.selectedAsset)||void 0===a?void 0:a.id)!==(null==e?void 0:e.id)?e:void 0,selectedEquipmentId:void 0}})},addLayerGroup(){d(e=>{const t=M.a.uniqueId();return{...e,floor:{...e.floor,layerGroups:[...e.floor.layerGroups,{localId:t,name:"New layer",zones:[],equipments:[]}]},selectedLayerGroupLocalId:t}})},deleteLayerGroup(e){d(t=>({...t,floor:{...t.floor,layerGroups:t.floor.layerGroups.filter(t=>t!==e)},selectedLayerGroupLocalId:void 0}))},setFloorImageName(e,t){d(a=>({...a,floor:{...a.floor,modules2D:a.floor.modules2D.map(a=>a.id===e?{...a,name:t}:a)}}))},setLayerGroupName(e,t){d(a=>({...a,floor:{...a.floor,layerGroups:a.floor.layerGroups.map(a=>a.localId===e.localId?{...a,name:t}:a)}}))},addZone(e){null==c.selectedLayerGroupLocalId&&y.addLayerGroup(),d(t=>({...t,floor:{...t.floor,layerGroups:t.floor.layerGroups.map(a=>a.localId===t.selectedLayerGroupLocalId?{...a,zones:[...a.zones,{...M.a.omit(e,"id"),localId:M.a.uniqueId()}]}:a)}}))},addEquipment(e){null==c.selectedLayerGroupLocalId&&y.addLayerGroup(),d(t=>({...t,floor:{...t.floor,layerGroups:t.floor.layerGroups.map(a=>a.localId===t.selectedLayerGroupLocalId?{...a,equipments:[...a.equipments,{...e,localId:M.a.uniqueId()}]}:a)}}))},updateObject(e){d(t=>({...t,floor:{...t.floor,layerGroups:t.floor.layerGroups.map(t=>t.localId===c.selectedLayerGroupLocalId?{...t,zones:t.zones.map(t=>t.localId===e.localId?e:t),equipments:t.equipments.map(t=>t.localId===e.localId?e:t)}:t)}}))},deleteObject(e){d(t=>({...t,floor:{...t.floor,layerGroups:t.floor.layerGroups.map(t=>t.localId===c.selectedLayerGroupLocalId?{...t,zones:t.zones.filter(t=>t.localId!==e.localId),equipments:t.equipments.filter(t=>t.localId!==e.localId)}:t)}}))},updateName(e){d(t=>({...t,floor:{...t.floor,floorName:e}}))},selectDataPoint(e){d(t=>({...t,selectedDataPointIds:M.a.xor(t.selectedDataPointIds,[e.id])}))},setFloorLayerGeometry(e){d(t=>({...t,floor:{...t.floor,layerGroups:t.floor.layerGroups.map(t=>"floor_layer"===t.id?{...t,hasLoaded:!0,zones:e.map(e=>({localId:M.a.uniqueId(),points:e,equipmentIds:[]}))}:t)}}))},toggleIsVisible(e){d(t=>({...t,visibleLayerGroupIds:M.a.xor(t.visibleLayerGroupIds,[e.id])}))},hideLayerGroups(){d(e=>({...e,visibleLayerGroupIds:[]}))}};return Object(l.useLayoutEffect)(()=>{const e=null!=c.selectedEquipmentId&&o.isReadOnly;n.maximizePanel("viewer-dashboard-floor",!e&&null==c.selectedAsset)},[c.selectedEquipmentId,c.selectedAsset]),r.a.createElement(Wa.Provider,{value:y},r.a.createElement(s.O,{horizontal:!0},r.a.createElement(s.N,{name:"viewer-dashboard-equipmentSelector",initialSize:250},r.a.createElement(Un,null)),r.a.createElement(s.N,{name:"viewer-dashboard-side"},r.a.createElement(s.O,{defaultMaximized:"viewer-dashboard-floor"},r.a.createElement(s.N,{name:"viewer-dashboard-floor"},r.a.createElement(s.W,{type:"header"},r.a.createElement(ao,null))),r.a.createElement(s.N,{name:"viewer-dashboard-details-new",initialSize:200,minSize:110},r.a.createElement(s.W,{type:"header"},r.a.createElement(Pn,null),r.a.createElement(Yn,null)))))),p&&r.a.createElement(Bn,{onClose:()=>E(!1)}))}function lo({src:e,children:t}){const a=Object(l.useRef)(!1),[n,o]=Object(l.useState)(),[i,c]=Object(l.useState)();return Object(l.useEffect)(()=>{const t=new Image;return t.onload=()=>{a.current||o({width:t.width,height:t.height})},t.onerror=e=>{a.current||c(e)},t.src=e,()=>{a.current=!0}},[]),null!=i?r.a.createElement(s.q,null):null==n?r.a.createElement(s.S,null):t(n)}var ro=a("d7oy"),oo=a.n(ro);function io({floor:e}){const t=Object(c.i)(),a=Object(s.rb)(),n=Object(s.yb)();return aa().isReadOnly?r.a.createElement(s.J,null,"The selected floor has no images"):r.a.createElement(s.W,{height:"100%",align:"center middle",className:oo.a.container},r.a.createElement(s.z,{defaultValue:{...e,name:e.floorName},onSubmit:async function(n){return await a.put(`/api/sites/${t.siteId}/floors/${e.floorId}`,{name:n.data.name}),a.post(`/api/sites/${t.siteId}/floors/${e.floorId}/2dmodules`,{files:n.data.files},{headers:{"Content-Type":"multipart/form-data"}})},onSubmitted:function(){n("floor")}},e=>{var t;return r.a.createElement(s.W,{height:"100%"},r.a.createElement(s.W,{size:"medium",align:"center middle",padding:"large"},r.a.createElement(s.db,{type:"h2"},"Start by uploading floor images."),r.a.createElement(s.W,{align:"center",size:"large",className:oo.a.panel,padding:"large"},r.a.createElement(s.E,{name:"name",label:"Floor name",className:oo.a.floorName}),r.a.createElement("hr",{className:oo.a.hr}),r.a.createElement(s.W,{align:"center",size:"large"},r.a.createElement(s.v,{name:"files",align:"center",showError:!0,buttonClassName:oo.a.filesSelectButton,buttonContentClassName:oo.a.filesSelectButtonContent,contentClassName:oo.a.filesSelectContent},r.a.createElement(s.W,{align:"center middle"},r.a.createElement(s.C,{icon:"image",className:oo.a.icon}),r.a.createElement(s.db,{type:"h3"},"New Images"),r.a.createElement(s.db,{type:"label"},"Start from new images"))),(null===(t=e.data.files)||void 0===t?void 0:t.length)>0&&r.a.createElement(s.f,{type:"submit",color:"blue",className:oo.a.upload},"Upload")))))}))}function co(){const e=Object(c.i)();return r.a.createElement(s.s,{name:"floor",url:`/api/sites/${e.siteId}/floors/${e.floorId}/layerGroups`},e=>r.a.createElement(r.a.Fragment,null,0===e.modules2D.length&&r.a.createElement(io,{floor:e}),e.modules2D.length>0&&r.a.createElement(lo,{src:e.modules2D[0].url},t=>r.a.createElement(no,{floor:{...t,...e}}))))}function so(){const e=Object(c.i)(),t=Object(c.g)(),[a,n]=Object(l.useState)(),o="admin"!==H().site.userRole||"true"!==s.pb.get("admin");Object(l.useEffect)(()=>{o&&"true"===s.pb.get("admin")&&t.replace(t.location.pathname)},[]);const i={isReadOnly:o,hoverFloorId:a,setHoverFloorId:n};return r.a.createElement(ta.Provider,{value:i},r.a.createElement(s.s,{url:`/api/sites/${e.siteId}/floors`,params:{hasBaseModule:o}},e=>r.a.createElement(s.W,{horizontal:!0,type:"content",padding:"0 0 0 medium"},r.a.createElement(ca,{floors:e}),r.a.createElement(c.b,{path:"/dashboard/sites/:siteId",exact:!0},r.a.createElement(za,{floors:e})),r.a.createElement(c.b,{path:"/dashboard/sites/:siteId/floors/:floorId"},r.a.createElement(lt,{feature:"is2DViewerDisabled",off:!0,allowAdmin:!0,showMessage:!0},r.a.createElement(co,null))))))}function mo(){const e=Object(c.i)(),t=Object(c.g)(),a="admin"!==H().site.userRole||"true"!==s.pb.get("admin");return Object(l.useEffect)(()=>{a&&"true"===s.pb.get("admin")&&t.replace(t.location.pathname)},[]),r.a.createElement(l.Fragment,{key:`${e.siteId} ${a}`},r.a.createElement(St,{isReadOnly:a}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/dashboard/sites/:siteId/tickets",exact:!0},r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0,showMessage:!0},r.a.createElement(Vt,null))),r.a.createElement(c.b,{path:"/dashboard/sites/:siteId/tickets/:ticketId",exact:!0},r.a.createElement(lt,{feature:"isTicketingDisabled",off:!0,showMessage:!0},r.a.createElement(ea,null))),r.a.createElement(c.b,{path:"/dashboard/sites/:siteId/insights",exact:!0},r.a.createElement(lt,{feature:"isInsightsDisabled",off:!0,showMessage:!0},r.a.createElement(Ft,null))),r.a.createElement(c.b,{path:"/dashboard/sites/:siteId/insights/:insightId",exact:!0},r.a.createElement(lt,{feature:"isInsightsDisabled",off:!0,showMessage:!0},r.a.createElement(Ut,null))),r.a.createElement(c.b,{path:"/dashboard/sites/:siteId/:floors?/:floorId?",component:so})))}var uo=a("TISX");a("0dnp");function po(){var e,t;const a=null!==(e=s.pb.get("groupId"))&&void 0!==e?e:"02f6698e-a5dc-48c6-a581-22f8bfc3b38b",n=null!==(t=s.pb.get("reportId"))&&void 0!==t?t:"24004fea-dc0c-41ea-a416-aab89bb4e03e";return r.a.createElement(s.s,{url:`/api/powerbi/groups/${a}/reports/${n}/token`},e=>r.a.createElement(uo.Report,{tokenType:"Embed",embedId:n,embedUrl:e.url,accessToken:e.token,permissions:"View"}))}var Eo=a("i+UY"),ho=a.n(Eo);function fo({app:e,onClose:t}){const a=Object(c.i)(),n=Object(s.rb)(),l=Object(s.yb)();function o(){return n.post(`/api/sites/${a.siteId}/installedApps`,{appId:e.id})}return r.a.createElement(s.I,{header:"Install app",closable:!1,onClose:t},t=>r.a.createElement(s.z,{onSubmit:o,onSubmitted:()=>function(e){e.close(),l("app")}(t)},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.W,{padding:"large",size:"large"},r.a.createElement(s.W,{align:"center",size:"large"},r.a.createElement(s.mb,{className:ho.a.willow}),r.a.createElement("img",{src:e.iconUrl,alt:e.name,className:ho.a.icon})),r.a.createElement(s.H,null,r.a.createElement(s.db,{whiteSpace:"normal"},'Do you authorize "',e.name,'" to be installed?'))),r.a.createElement(s.y,null,"Authorize"))))}function go({app:e,onClose:t}){const a=Object(c.i)(),n=Object(s.rb)(),l=Object(s.yb)();return r.a.createElement(s.T,{header:"Uninstall app",onSubmit:function(){return n.delete(`/api/sites/${a.siteId}/installedApps/${e.id}`)},onSubmitted:function(e){e.close(),l("app")},onClose:t},"Are you sure you want to uninstall",r.a.createElement(s.W,{align:"center"},r.a.createElement(s.db,{whiteSpace:"normal"},'"',e.name,'"?')))}var bo=a("hjhf"),yo=a.n(bo);function vo({app:e}){const t=H(),[a,n]=Object(l.useState)(!1),[o,i]=Object(l.useState)(!1),c="b1d9eab3-14d2-4558-8c7f-c21ee50ba6bc"!==e.id&&"39601286-eadf-4e43-8dc7-ad0d6799b5b3"!==e.id;return r.a.createElement(s.W,{padding:"0 extraLarge",className:yo.a.header},r.a.createElement(s.W,{horizontal:!0,type:"content",width:"page",overflow:"hidden",padding:"extraLarge 0"},r.a.createElement("div",{className:yo.a.logo},r.a.createElement("img",{src:e.iconUrl,alt:e.name,className:yo.a.img})),r.a.createElement(s.W,{size:"large",padding:"medium large"},r.a.createElement(s.W,null,r.a.createElement(s.db,{type:"h1"},e.name),r.a.createElement(s.db,{type:"label"},"version ",e.version)),r.a.createElement(s.W,{horizontal:!0,type:"wrap",size:"tiny"},e.categoryNames.map(e=>r.a.createElement(s.Q,{key:e},e)))),r.a.createElement(s.W,{align:"bottom",size:"medium",className:yo.a.right},e.needPrerequisite&&""!==e.prerequisiteDescription&&r.a.createElement(s.H,{icon:"warning",className:yo.a.message},r.a.createElement(s.db,{whiteSpace:"normal"},e.prerequisiteDescription)),"admin"===t.site.userRole&&(e.isInstalled?r.a.createElement(s.f,{color:"blue",width:"large",disabled:!c,onClick:()=>i(!0)},"Uninstall"):r.a.createElement(s.f,{color:"blue",width:"large",disabled:e.needPrerequisite,onClick:()=>n(!0)},"Install")))),a&&r.a.createElement(fo,{app:e,onClose:()=>n(!1)}),o&&r.a.createElement(go,{app:e,onClose:()=>i(!1)}))}var Io=a("cuDZ"),wo=a.n(Io);function Oo({app:e}){const t=Object(l.useRef)(),[a,n]=Object(l.useState)(250),o={top:a};return Object(l.useLayoutEffect)(()=>{n(t.current.offsetTop)},[]),r.a.createElement("div",{ref:t,className:wo.a.configuration},r.a.createElement("div",{className:wo.a.container,style:o},r.a.createElement("iframe",{title:e.name,src:e.manifest.configurationUrl,className:wo.a.iframe})))}var ko=a("Rga0"),Co=a.n(ko);function jo({app:e}){return e.websiteUrl||e.privacyPolicyUrl?r.a.createElement(s.W,{size:"medium",padding:"0 0 large extraLarge",className:Co.a.additionalInformation},r.a.createElement(s.db,{type:"h2"},"Additional Information"),r.a.createElement(s.W,{size:"small"},e.websiteUrl&&r.a.createElement(s.f,{href:e.websiteUrl,className:Co.a.button},r.a.createElement(s.db,{type:"value",className:Co.a.buttonText},"Website"),r.a.createElement(s.C,{icon:"chevron",className:Co.a.chevron})),e.privacyPolicyUrl&&r.a.createElement(s.f,{href:e.privacyPolicyUrl,className:Co.a.button},r.a.createElement(s.db,{type:"value",className:Co.a.buttonText},"Privacy Policy"),r.a.createElement(s.C,{icon:"chevron",className:Co.a.chevron})))):null}var No=a("+pm9"),xo=a.n(No);function Mo({app:e}){const t=Object(l.useRef)(),[a,n]=Object(l.useState)(0),o={transform:`translate(-${100*a}%, 0)`};return Object(s.Bb)(()=>{null!=t.current&&1==+window.getComputedStyle(t.current).getPropertyValue("opacity")||n(t=>(t+1)%e.imageUrls.length)},7e3),0===e.imageUrls.length?null:r.a.createElement("div",{className:xo.a.carousel},r.a.createElement("div",{className:xo.a.images,style:o},e.imageUrls.map((t,a)=>r.a.createElement("img",{key:a,src:t,alt:`${e.name} ${a+1}`,className:xo.a.img}))),r.a.createElement(s.W,{ref:t,horizontal:!0,className:xo.a.buttons},e.imageUrls.map((e,t)=>{const l=Ee()(xo.a.button,{[xo.a.selected]:a===t});return r.a.createElement(s.f,{key:t,icon:"status",className:l,onClick:()=>n(t)})})))}var zo=a("HkdZ"),Ao=a.n(zo);function So({app:e}){return r.a.createElement(s.W,{size:"extraLarge",padding:"extraLarge 0"},r.a.createElement(Mo,{app:e}),r.a.createElement(s.W,{horizontal:!0,type:"header"},r.a.createElement(s.W,{size:"large",padding:"0 extraLarge large 0"},r.a.createElement(s.db,{type:"h2"},"App Overview"),r.a.createElement(s.W,{size:"medium",className:Ao.a.content},e.description.split("\n").map((e,t)=>r.a.createElement("div",{key:t},e)))),r.a.createElement(jo,{app:e})))}var qo=a("bqn4"),Wo=a.n(qo);function Lo(){const e=Object(c.i)(),t=H();return r.a.createElement(s.W,{type:"content",className:Wo.a.app},r.a.createElement(s.s,{name:"app",url:"/api/apps/"+e.appId,params:{siteId:e.siteId}},e=>{const a="admin"===t.site.userRole&&e.isInstalled&&null!=e.manifest.configurationUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement(vo,{app:e}),r.a.createElement(s.W,{padding:"0 extraLarge"},r.a.createElement(s.W,{width:"page"},r.a.createElement(s.ab,{headerClassName:Wo.a.tabsHeader,contentClassName:Wo.a.tabsContent},r.a.createElement(s.X,{header:"Overview"},r.a.createElement(So,{app:e})),a&&r.a.createElement(s.X,{header:"Configuration",autoFocus:!0},r.a.createElement(Oo,{app:e}))))))}))}var Do=a.p+"public/0b95758bdc631d17e5929b8fe75133d3.png",Zo=a("Q43d"),Po=a.n(Zo);function _o(){const e=Object(c.i)(),t=H();return r.a.createElement("div",{className:Po.a.header},r.a.createElement(s.W,{horizontal:!0,align:"center middle",size:"extraLarge",height:"100%"},r.a.createElement("div",{className:Po.a.content},r.a.createElement(s.W,{type:"content",size:"large",className:Po.a.description},r.a.createElement(s.db,{type:"h1"},"Analytics made easy"),r.a.createElement(s.db,{whiteSpace:"normal"},"Monitor and optimise your buildings performance and energy consumption"),"admin"===t.site.userRole&&r.a.createElement(s.f,{color:"white",width:"small",to:`/marketplace/sites/${e.siteId}/apps/1e2bb1c7-498a-466b-94bd-7978e72b913b`},"Install"))),r.a.createElement("div",null,r.a.createElement(s.W,{align:"center",size:"small"},r.a.createElement("div",{className:Po.a.logo},r.a.createElement("img",{src:Do,alt:"CopperTree",className:Po.a.img})),r.a.createElement(s.db,null,"CopperTree Analytics")))))}var Ro=a("rgPR"),To=a.n(Ro);function Fo(){return(Fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Go({selected:e,children:t,...a}){const n=Ee()(To.a.menuButton,{[To.a.selected]:e});return r.a.createElement(s.f,Fo({},a,{selected:e,className:n}),t)}const $o=Object(l.createContext)();function Uo(){return Object(l.useContext)($o)}var Bo=a("zsf1"),Xo=a.n(Bo);function Vo(){const e=Uo();return r.a.createElement(s.W,{padding:"extraLarge",className:Xo.a.menu},r.a.createElement(s.s,{url:"/api/appCategories",cache:!0},t=>{const a=[{id:"All",name:"All"},...M.a.orderBy(t,e=>e.name)];return r.a.createElement(s.W,{size:"medium"},r.a.createElement(s.db,{type:"h2"},"App Categories"),r.a.createElement(s.W,null,a.map(t=>{var a;return r.a.createElement(Go,{key:t.id,selected:t.id===(null===(a=e.category)||void 0===a?void 0:a.id),onClick:()=>e.selectCategory(t)},t.name)})))}))}var Ho=a("ZPgp"),Yo=a.n(Ho);function Jo({app:e}){const t=Object(c.i)(),a=Ee()(Yo.a.appSummary,{[Yo.a.isInstalled]:e.isInstalled});return r.a.createElement(s.f,{to:`/marketplace/sites/${t.siteId}/apps/${e.id}`,className:a},r.a.createElement(s.Q,{color:"green",className:Yo.a.installed},"Installed"),r.a.createElement(s.W,{type:"footer",size:"large",overflow:"hidden",padding:"large",className:Yo.a.content},r.a.createElement("div",{className:Yo.a.logo},r.a.createElement("img",{src:e.iconUrl,alt:e.name,className:Yo.a.img})),r.a.createElement("hr",null),r.a.createElement(s.W,{size:"medium"},r.a.createElement(s.db,{color:"light",size:"header"},e.name),r.a.createElement("div",null,r.a.createElement(s.db,{whiteSpace:"normal",className:Yo.a.description},e.description))),e.categoryNames.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement(s.W,{horizontal:!0,type:"header",align:"bottom",overflow:"hidden"},r.a.createElement(s.W,{horizontal:!0,size:"small",overflow:"hidden"},e.categoryNames.map(e=>r.a.createElement(s.Q,{key:e,className:Yo.a.pill},e))),r.a.createElement(s.W,{align:"center middle",className:Yo.a.add},r.a.createElement(s.C,{icon:"add"})))))))}function Ko(){const e=Object(c.i)(),t=Uo();return r.a.createElement(s.W,{size:"large",width:"pageLarge",padding:"extraLarge"},r.a.createElement(s.s,{url:"/api/apps",params:{siteId:e.siteId}},e=>{const a=e.filter(e=>"All"===t.category.name||e.categoryNames.includes(t.category.name));return r.a.createElement(s.W,{key:t.category.id,size:"medium"},r.a.createElement(s.db,{type:"h2"},t.category.name),r.a.createElement(s.W,{horizontal:!0,type:"wrap",size:"medium"},a.map(e=>r.a.createElement(Jo,{key:e.id,app:e})),0===a.length&&r.a.createElement(s.W,{width:"100%",padding:"large"},r.a.createElement(s.J,null,"No apps found"))))}))}var Qo=a("hB7p"),ei=a.n(Qo);function ti(){const[e,t]=Object(l.useState)({id:"All",name:"All"}),a={category:e,selectCategory(e){t(t=>e.id!==(null==t?void 0:t.id)?e:{id:"All",name:"All"})}};return r.a.createElement($o.Provider,{value:a},r.a.createElement(s.W,{type:"content",overflow:"hidden",className:ei.a.apps},r.a.createElement(_o,null),r.a.createElement(s.W,{horizontal:!0,type:"content"},r.a.createElement(Vo,null),r.a.createElement(Ko,null))))}var ai=a("wrKc"),ni=a.n(ai);function li(){const e=Object(c.i)(),t=H();return r.a.createElement(s.W,{height:"100%",className:ni.a.myApps},r.a.createElement(s.W,{size:"large",width:"pageLarge",padding:"extraLarge"},r.a.createElement(s.s,{url:"/api/apps",params:{siteId:e.siteId}},e=>{const a=e.filter(e=>e.isInstalled);return r.a.createElement(s.W,{size:"medium"},r.a.createElement(s.db,{type:"h2"},t.site.name),a.length>0&&r.a.createElement(s.W,{horizontal:!0,size:"medium",type:"wrap"},a.map(e=>r.a.createElement(Jo,{key:e.id,app:e}))),0===a.length&&r.a.createElement(s.W,{padding:"large"},r.a.createElement(s.J,null,"No apps found")))})))}function ri(){const e=Object(c.i)(),t=H();return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null,r.a.createElement(At,{to:e=>t.getSiteUrl(e.id)}),r.a.createElement(s.ab,{type:"primary"},r.a.createElement(s.X,{header:"Apps",to:"/marketplace/sites/"+e.siteId,exclude:["/my-apps"]}),r.a.createElement(s.X,{header:"My apps",to:`/marketplace/sites/${e.siteId}/my-apps`}))),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/marketplace/sites/:siteId",exact:!0,component:ti}),r.a.createElement(c.b,{path:"/marketplace/sites/:siteId/apps/:appId",component:Lo}),r.a.createElement(c.b,{path:"/marketplace/sites/:siteId/my-apps",exact:!0,component:li})))}function oi({site:e,category:t,onCategoryChange:a}){return r.a.createElement(s.Z,{url:`/api/sites/${e.id}/categories`,notFound:"No categories found"},e=>r.a.createElement(s.e,null,e.map(e=>r.a.createElement(s.U,{key:e.id,selected:t===e,onClick:()=>{var n;a(t!==(n=e)?n:void 0)}},r.a.createElement(s.h,null,e.name)))))}var ii=a("N0uF"),ci=a.n(ii);function si({site:e,category:t,equipmentIds:a,setEquipmentIds:n}){const o=H(),[i,c]=Object(l.useState)("");if(null==t)return null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.cb,null,r.a.createElement(s.W,{width:"100%"},r.a.createElement(s.E,{icon:"search",inputType:"search",debounce:!0,placeholder:"Search",value:i,onChange:c}))),r.a.createElement(s.Z,{url:`/api/sites/${e.id}/categories/${t.id}/equipments`,defaultSort:[["name"],["asc"]],filter:e=>e.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.tags.some(e=>e.name.toLowerCase().includes(i.toLowerCase()))).map(e=>{var t;return{...e,siteCode:null===(t=o.sites.find(t=>t.id===e.siteId))||void 0===t?void 0:t.code}}),notFound:"No equipment found"},e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.U,null,r.a.createElement(s.h,{sort:"name"},"Name"),r.a.createElement(s.h,null,"Tags"),r.a.createElement(s.h,{sort:"siteCode",width:100},"Site code"))),r.a.createElement(s.e,null,e.map(e=>r.a.createElement(s.U,{key:e.id,selected:a.includes(e.id),onClick:()=>{return t=e.id,void n(e=>M.a.xor(e,[t]));var t}},r.a.createElement(s.h,null,e.name),r.a.createElement(s.h,{type:"fill"},r.a.createElement(s.W,{horizontal:!0,size:"small"},e.tags.map(e=>r.a.createElement(s.Q,{key:e.id,className:ci.a.pill},e.name)))),r.a.createElement(s.h,null,e.siteCode)))))))}function di({equipmentIds:e,setEquipmentIds:t}){const a=Object(s.Ab)(),n=H(),[o,i]=Object(l.useState)(n.site),[c,d]=Object(l.useState)();return Object(l.useEffect)(()=>{d()},[o]),Object(l.useLayoutEffect)(()=>{a.maximizePanel("time-machine-categories",null==c)},[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null,r.a.createElement(s.W,{align:"left"},r.a.createElement(At,{value:o,onChange:e=>{i(e)}})),r.a.createElement(s.W,{align:"right"},r.a.createElement(xt,{siteId:o.id}))),r.a.createElement(s.O,{defaultMaximized:"time-machine-categories"},r.a.createElement(s.N,{name:"time-machine-categories"},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"Categories"},r.a.createElement(oi,{site:o,category:c,onCategoryChange:d}))))),r.a.createElement(s.N,{name:"time-machine-equipments",initialSize:300},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"Equipment"},r.a.createElement(si,{site:o,category:c,equipmentIds:e,setEquipmentIds:t})))))))}function mi(){const e=Object(s.tb)();const[t,a]=function(e,t){const a=Object(c.g)(),n=Object(c.h)(),[r,o]=Object(l.useState)(()=>e());return Object(l.useEffect)(()=>{a.replace(t(r))},[]),Object(s.wb)(()=>{const e=t(r);n.search.slice(1)!==e.split("?")[1]&&a.push(e)},[r]),Object(s.wb)(()=>{const t=e();M.a.isEqual(r,t)||o(t)},[n]),[r,o]}((function(){var t,a,n,l,r;const o=null!==(t=s.pb.get("to"))&&void 0!==t?t:e.now().format();return{times:[null!==(a=s.pb.get("from"))&&void 0!==a?a:e(o).addDays(-7).format(),o],type:null!==(n=s.pb.get("type"))&&void 0!==n?n:"grouped",equipmentIds:null!==(l=s.pb.get("equipmentIds"))&&void 0!==l?l:[],pointIds:null!==(r=s.pb.get("pointIds"))&&void 0!==r?r:[]}}),(function(e){return s.pb.createUrl("/time-machine",{from:e.times[0],to:e.times[1],type:e.type,equipmentIds:e.equipmentIds,pointIds:e.pointIds})}));return r.a.createElement(s.O,{horizontal:!0},r.a.createElement(s.N,{name:"time-machine-equipment-selector",initialSize:300},r.a.createElement(di,{equipmentIds:t.equipmentIds,setEquipmentIds:e=>{a(t=>({...t,equipmentIds:e(t.equipmentIds)}))}})),r.a.createElement(s.N,{name:"time-machine-content"},r.a.createElement(s.W,{type:"header"},r.a.createElement(s.ab,null,r.a.createElement(s.X,{header:"Trend Logs"},r.a.createElement(Dn,{times:t.times,type:t.type,equipmentIds:t.equipmentIds,pointIds:t.pointIds,onTimesChange:e=>a(t=>({...t,times:e})),onTypeChange:e=>a(t=>({...t,type:e})),onEquipmentIdRemove:function(e){a(t=>({...t,equipmentIds:t.equipmentIds.filter(t=>t!==e)}))},onPointIdsChange:e=>a(t=>({...t,pointIds:e(t.pointIds)}))}))))))}function ui(){const e=Object(s.sb)(),t=H();return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:["/","/dashboard"],exact:!0},r.a.createElement(c.a,{to:"/dashboard/sites/"+t.site.id})),r.a.createElement(nt,{path:"/dashboard/sites/:siteId",component:mo}),r.a.createElement(c.b,{path:"/marketplace",exact:!0},r.a.createElement(c.a,{to:"/marketplace/sites/"+t.site.id})),r.a.createElement(nt,{path:"/marketplace/sites/:siteId",component:ri}),r.a.createElement(c.b,{path:"/time-machine",exact:!0,component:mi}),e.hasFeatureToggle("wp-kpi-enabled")&&r.a.createElement(c.b,{path:"/kpi",component:po}),r.a.createElement(c.b,{path:"/admin",component:Je}),r.a.createElement(c.b,null,r.a.createElement(s.J,null,"Page not found")))}Object(s.qb)(s.ob.get("api")),Object(n.setConfig)({reloadHooks:!1});const pi=function(){return r.a.createElement(s.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/account/auth0callback",exact:!0,component:X}),r.a.createElement(c.b,{path:["/account/create-password","/account/reset-password"],exact:!0},r.a.createElement($,null,r.a.createElement(N,null))),r.a.createElement(s.D,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/account"},r.a.createElement(s.b,{authenticated:!1},r.a.createElement($,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/account/login",exact:!0,component:b}),r.a.createElement(c.b,{path:"/account/forgot-password",exact:!0,component:y}),r.a.createElement(c.a,{to:"/account/login"}))))),r.a.createElement(s.b,null,r.a.createElement(et,null,r.a.createElement(ui,null)))))),r.a.createElement(s.nb,null))};i.a.render(r.a.createElement(pi,null),document.getElementById("root"))},ts07:function(e,t,a){e.exports={flash:"_3ZvHYFHjWv5MGBL1QRczuu",camera:"hGTYHtp-C_WzaRs4V5rcC"}},uez9:function(e,t,a){e.exports={floors:"_2xyXuG__3OCKfD971ij4LH"}},"v/va":function(e,t,a){e.exports={site:"pOxuxT9QUqF2wFD7Agbld"}},vHfG:function(e,t,a){e.exports={site:"_28JdVf_WxySPNXWavePOMW",content:"_2BBg_FXYQNht3HXAMWXFEZ",icon:"_2uK6fV9L8vz4VJRlYuB7Md"}},vfd9:function(e,t,a){e.exports={slide:"_3R_Ub_PmtlNVGDPtBaLjny"}},wrKc:function(e,t,a){e.exports={myApps:"YmFCDqzct8ASrUDHvf9Ud"}},xCsS:function(e,t,a){e.exports={zone:"Qrt8Q8EiXbIRPmjkAmM0A"}},yIbG:function(e,t,a){e.exports={editorContent:"_39ylGJb1wbL29-LvyDbI0R",content:"_17AYvbEEET1RbCdKADLnIL",view:"_33XQOZQG2xXvMMCkkfsnqY",svg:"_2Ghw6qMeAGFFo3F4UkedH4",create:"PpKQyOSAZA3y3BjyHftf5",image:"_1M9RBE49MGFs77AiMkywG8",visible:"SahJCrgyYzr6f25c59dUE",tooltips:"_2x-kIjX621FgefpJSNKidl",range:"_2vsDI-OXmg_yPfeltJmQHH",blocker:"_3LIrAxp2oqNc8jEfGfMzw3",rangeContainer:"_2yQQmLjcVZQ9cqja9-aaEc"}},yO0c:function(e,t,a){e.exports={label:"_1EM1uigecqzhkROZ4IugT0",yLabel:"MSOpJjtT0uLcWlIlRYpWv"}},ytvz:function(e,t,a){e.exports={lineGraph:"_1X5hR4NdVBzJzxNv0KbpeG",isDimmed:"_2u-lgD16XlXuWqTmrG7Awz",content:"dp1FyW5-VLWimaFQeDrz7",svg:"_1CWjZwcXxXnHKEgfFjUwXL",fillPath:"_2v9cmGyW6zQqQIvYPPHLG2",fillPathBorder:"_13xKSemMqRHx5OIOcRsHtK",path:"_1WsNcLcfyXNpUOYDg6TaY7",point:"_2yLgX8piIPOsJBcFj5gOKf"}},zsf1:function(e,t,a){e.exports={menu:"_1Oo1Jao8KeQD-QlAnqxSAM"}}},[["tjUo",1,2,3]]]);